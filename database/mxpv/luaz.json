{
  "name": "luaz",
  "owner": "mxpv",
  "repo": "luaz",
  "description": " Zero-cost Luau wrapper for Zig",
  "type": "package",
  "topics": [
    "lua",
    "luau",
    "zig",
    "zig-library",
    "zig-package",
    "zig-lib"
  ],
  "stars": 34,
  "forks": 1,
  "watchers": 0,
  "updated_at": "2026-01-27T18:00:43Z",
  "dependencies": [
    {
      "name": "luau",
      "url": "git+https://github.com/luau-lang/luau.git?ref=0.702#c836feb2450a074581010f84da2eadeea38a3d55",
      "hash": "N-V-__8AAFTGpwCGECbgY1xtyv_VqnBz-6vqicDCwsPr3hl9"
    }
  ],
  "minimum_zig_version": "0.14.1",
  "readme": "<p align=\"center\">\n  <img src=\"docs/logo.png\" />\n</p>\n\n# luaz\n\n[![CI](https://github.com/mxpv/luaz/actions/workflows/ci.yml/badge.svg)](https://github.com/mxpv/luaz/actions/workflows/ci.yml)\n[![Docs](https://github.com/mxpv/luaz/actions/workflows/docs.yml/badge.svg)](https://github.com/mxpv/luaz/actions/workflows/docs.yml)\n[![GitHub License](https://img.shields.io/github/license/mxpv/luaz)](./LICENSE)\n[![codecov](https://codecov.io/gh/mxpv/luaz/branch/main/graph/badge.svg?token=GUTOF5TGFQ)](https://codecov.io/gh/mxpv/luaz)\n\n`luaz` is a zero-cost wrapper library for [`Luau`](https://github.com/luau-lang/luau).\nUnlike other libraries, it focuses specifically on `Luau`, providing idiomatic `Zig` bindings that leverage Luau's [unique features](https://luau.org/why)\nand [performance](https://luau.org/performance) characteristics.\n\n## ‚ú® Features\n\n- Minimal yet flexible zero-cost [API](#basic-usage)\n- Bidirectional [function calls](#function-calls) between `Zig` and `Lua`\n  - Closures support with upvalue capture\n  - Variadic arguments support\n- Complete Lua API coverage:\n  - Support for references, tables, and functions\n  - Full coroutine and thread support\n  - Comprehensive garbage collection APIs\n  - A fully featured debugger APIs\n- First-class [userdata support](#userdata-integration) including metamethods\n- Luau-specific features:\n  - Vector type support\n  - Buffer type support for binary data manipulation\n  - [StrBuf support](#string-buffer-strbuf)\n  - Sandboxing APIs for secure execution and improved performance\n  - Native code generation support for improved performance on supported platforms\n  - Built-in Luau tools provided out of the box:\n    - [`luau-compile`](#compiler) - Compile Lua source to optimized bytecode\n    - [`luau-analyze`](#analyzer) - Type checking and linting for Luau code\n  - Supports coverage API\n- Excellent [test coverage](https://app.codecov.io/gh/mxpv/luaz) and API [documentation](#-documentation)\n\n## üìö Documentation\n\nFull API documentation is available at: https://mxpv.github.io/luaz/#luaz\n\nThe documentation is automatically updated on every change to the `main` branch.\n\n- [Documentation](https://mxpv.github.io/luaz/#luaz.lib)\n  + [High level Lua interface](https://mxpv.github.io/luaz/#luaz.lib.Lua)\n    - [Table](https://mxpv.github.io/luaz/#luaz.Table)\n    - [Function](https://mxpv.github.io/luaz/#luaz.Function)\n    - [StrBuf](https://mxpv.github.io/luaz/#luaz.StrBuf)\n    - [Buffer](https://mxpv.github.io/luaz/#luaz.Buffer)\n  + [Low level State wrapper](https://mxpv.github.io/luaz/#luaz.State)\n  + [GC API](https://mxpv.github.io/luaz/#luaz.GC)\n  + [Debugger API](https://mxpv.github.io/luaz/#luaz.Debug)\n  + [Compiler](https://mxpv.github.io/luaz/#luaz.Compiler)\n\n> [!TIP]\n> For a comprehensive overview of all features, see the [guided tour example](examples/guided_tour.zig) which can be run with `zig build guided-tour`.\n\n### Basic Usage\n\n```zig\npub fn main() !void {\n    var gpa = std.heap.GeneralPurposeAllocator(.{}){};\n    defer _ = gpa.deinit();\n\n    var lua = try Lua.init(&gpa.allocator); // Custom allocator (or null for default)\n    defer lua.deinit();\n\n    // Set and get globals\n    try lua.globals().set(\"greeting\", \"Hello from Zig!\");\n    const value = try lua.globals().get(\"greeting\", []const u8);\n    std.debug.assert(std.mem.eql(u8, value.?, \"Hello from Zig!\"));\n\n    // Evaluate Lua code\n    const result = try lua.eval(\"return 2 + 3 * 4\", .{}, i32);\n    std.debug.assert(result.ok.? == 14);\n}\n```\n\n> [!NOTE]\n> Ideally, the bundled  `luau-compile` tool should be used to precompile Lua scripts offline.\n\n### Struct and Array Tables\n\nZig structs and arrays automatically convert to Lua tables:\n\n```zig\nconst Point = struct { x: f64, y: f64 };\n\npub fn main() !void {\n    var lua = try Lua.init(null);\n    defer lua.deinit();\n\n    // Struct ‚Üí table with field names as keys\n    try lua.globals().set(\"point\", Point{ .x = 10.5, .y = 20.3 });\n    \n    // Array ‚Üí table with 1-based indices\n    try lua.globals().set(\"numbers\", [_]i32{ 1, 2, 3, 4, 5 });\n\n    // Access from Lua\n    const x = (try lua.eval(\"return point.x\", .{}, f64)).ok.?;        // 10.5\n    const first = (try lua.eval(\"return numbers[1]\", .{}, i32)).ok.?; // 1\n    const length = (try lua.eval(\"return #numbers\", .{}, i32)).ok.?;  // 5\n}\n```\n\n### Function Calls\n\nSeamless bidirectional function calls with automatic type conversion:\n\n```zig\nfn sum(a: i32, b: i32) i32 { return a + b; }\n\npub fn main() !void {\n    var lua = try Lua.init(null);\n    defer lua.deinit();\n\n    // Register Zig function ‚Üí call from Lua\n    try lua.globals().set(\"sum\", sum);\n    std.debug.assert((try lua.eval(\"return sum(10, 20)\", .{}, i32)).ok.? == 30);\n\n    // Define Lua function ‚Üí call from Zig\n    _ = try lua.eval(\"function multiply(x, y) return x * y end\", .{}, void);\n    std.debug.assert((try lua.globals().call(\"multiply\", .{6, 7}, i32)).ok.? == 42);\n\n    // Closures with upvalues\n    const table = lua.createTable(.{});\n    defer table.deinit();\n    \n    fn getGlobal(upv: Lua.Upvalues(*Lua), key: []const u8) !i32 {\n        return try upv.value.globals().get(key, i32) orelse 0;\n    }\n    try table.set(\"getGlobal\", Lua.Capture(@constCast(&lua), getGlobal));\n    try lua.globals().set(\"funcs\", table);\n    try lua.globals().set(\"myValue\", @as(i32, 123));\n    std.debug.assert((try lua.eval(\"return funcs.getGlobal('myValue')\", .{}, i32)).ok.? == 123);\n}\n```\n\n### UserData Integration\n\nAutomatic compile-time binding generation with metamethod support:\n\n```zig\nconst Counter = struct {\n    value: i32,\n\n    pub fn init(initial: i32) Counter { return .{ .value = initial }; }\n    pub fn deinit(self: *Counter) void { _ = self; } // Auto-called on GC\n    pub fn getMaxValue() i32 { return std.math.maxInt(i32); } // Static method\n    pub fn increment(self: *Counter, amount: i32) i32 { \n        self.value += amount; \n        return self.value; \n    }\n    pub fn getValue(self: *const Counter) i32 { return self.value; }\n    \n    // Metamethods\n    pub fn __add(self: Counter, other: i32) Counter { return .{ .value = self.value + other }; }\n    pub fn __len(self: Counter) i32 { return self.value; }\n    pub fn __tostring(self: Counter) []const u8 { \n        return std.fmt.allocPrint(std.heap.page_allocator, \"Counter({})\", .{self.value}) catch \"Counter\";\n    }\n};\n\npub fn main() !void {\n    var lua = try Lua.init(null);\n    defer lua.deinit();\n\n    try lua.registerUserData(Counter);\n\n    _ = try lua.eval(\n        \\\\local counter = Counter.new(10)      -- Constructor\n        \\\\assert(counter:increment(5) == 15)   -- Instance method\n        \\\\assert(Counter.getMaxValue() == 2147483647) -- Static method\n        \\\\assert(#counter == 15)               -- __len metamethod\n        \\\\local new_counter = counter + 5      -- __add metamethod\n        \\\\assert(new_counter:getValue() == 20)\n    , .{}, void);\n}\n```\n\n### String Buffer (StrBuf)\n\nEfficient string building using Luau's StrBuf API:\n\n```zig\nfn buildGreeting(upv: Lua.Upvalues(*Lua), name: []const u8, age: i32) !Lua.StrBuf {\n    var buf: Lua.StrBuf = undefined;\n    buf.init(upv.value);\n    buf.addString(\"Hello, \");\n    buf.addLString(name);\n    buf.addString(\"! You are \");\n    try buf.add(age);\n    buf.addString(\" years old.\");\n    return buf;\n}\n\n// Register and call from Lua\ntry lua.globals().set(\"buildGreeting\", Lua.Capture(&lua, buildGreeting));\nconst greeting = (try lua.eval(\"return buildGreeting('Alice', 25)\", .{}, []const u8)).ok.?;\n```\n\n## üîß Build Configuration\n\n> [!NOTE]\n> Until Zig reaches 1.0 (stable release), luaz targets the latest released version of Zig. When updating to a new breaking Zig version, we create a branch for the previous version (e.g., `zig-0.14`) that can be checked out if the older version is required.\n\n> [!WARNING]\n> This library is still evolving and the API is not stable. Backward incompatible changes may be introduced up until the 1.0 release. Consider pinning to a specific commit or tag if you need stability.\n\n### Vector Size\nBy default, luaz is built with 4-component vectors. To customize:\n```bash\nzig build -Dvector-size=3  # Build with 3-component vectors\n```\n\n## üõ†Ô∏è Using Luau Tools\n\nThe build system provides prebuilt Luau tools that can be invoked directly:\n\n### Analyzer\n```bash\n$ zig build luau-analyze -- --help\nUsage: /Users/.../luaz/.zig-cache/o/.../luau-analyze [--mode] [options] [file list]\n\nAvailable modes:\n  omitted: typecheck and lint input files\n  --annotate: typecheck input files and output source with type annotations\n\nAvailable options:\n  --formatter=plain: report analysis errors in Luacheck-compatible format\n  --formatter=gnu: report analysis errors in GNU-compatible format\n  --mode=strict: default to strict mode when typechecking\n  --timetrace: record compiler time tracing information into trace.json\n```\n\n### Compiler\n```bash\n$ zig build luau-compile -- --help\nUsage: /Users/.../luaz/.zig-cache/o/.../luau-compile [--mode] [options] [file list]\n\nAvailable modes:\n   binary, text, remarks, codegen\n\nAvailable options:\n  -h, --help: Display this usage message.\n  -O<n>: compile with optimization level n (default 1, n should be between 0 and 2).\n  -g<n>: compile with debug level n (default 1, n should be between 0 and 2).\n  --target=<target>: compile code for specific architecture (a64, x64, a64_nf, x64_ms).\n  ...\n```\n\n## üîó Related Projects\n\nThese projects served as inspiration and are worth exploring:\n\n- [zig-autolua](https://github.com/daurnimator/zig-autolua) - Automatic Lua bindings for Zig\n- [zoltan](https://github.com/ranciere/zoltan) - Lua bindings for Zig\n- [ziglua](https://github.com/natecraddock/ziglua) - Zig bindings for Lua 5.1, 5.2, 5.3, 5.4, and LuaJIT\n\n## üìÑ License\n\nThis project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/865334?u=a47007c3fc95832646d2c935da12aaff81a48ca3&v=4",
  "releases": [
    {
      "tag_name": "v0.6.0",
      "name": "v0.6.0",
      "body": "## Changed\n- Updated Luau dependency from version 0.688 to [0.702](https://github.com/luau-lang/luau/releases/tag/0.702)\n- Raw Luau C API is now re-exported from the library via the `c` module\n- **BREAKING**: Replaced `Table.setClosure()` with `Lua.Capture()` for creating closures with upvalues. New API: `table.set(\"name\", Lua.Capture(upvalues, func))`\n\n## Fixed\n- registerUserData() now properly detects global name collisions when registering types from different modules with the same short name\n\n---\n\nLuau version: [0.702](https://github.com/luau-lang/luau/releases/tag/0.702)",
      "prerelease": false,
      "published_at": "2025-12-03T23:02:01Z",
      "html_url": "https://github.com/mxpv/luaz/releases/tag/v0.6.0",
      "assets": []
    },
    {
      "tag_name": "v0.5.0",
      "name": "v0.5.0",
      "body": "### Added\n- Enabled Ubuntu 22.04 ARM on CI.\n\n### Changed\n- **BREAKING**: Updated Zig toolchain requirement to version 0.15.1 ([#11](https://github.com/mxpv/luaz/issues/11))\n- `setCallbacks()` now explicitly clears unused callback pointers to null, fixing behavior when switching between different callback struct types\n- Updated Luau dependency from version 0.686 to [0.688](https://github.com/luau-lang/luau/releases/tag/0.688)\n\n---\nLuau version: [0.688](https://github.com/luau-lang/luau/releases/tag/0.688)",
      "prerelease": false,
      "published_at": "2025-08-23T01:24:47Z",
      "html_url": "https://github.com/mxpv/luaz/releases/tag/v0.5.0",
      "assets": []
    },
    {
      "tag_name": "v0.4.0",
      "name": "v0.4.0",
      "body": "### Added\n- **Luau Buffer support** for native binary data manipulation\n  - High-level `Buffer` API with direct memory access through `[]u8` slice\n  - Integration with Zig's std.io patterns via `stream()` method\n  - Reference-counted memory management with automatic cleanup\n  - Full interoperability with Lua's buffer library\n  - `Lua.createBuffer(size)` method for buffer creation\n  - Buffer support in `Lua.Value` enum for runtime value handling\n  - Stack operations for buffer values (`pushBuffer`, `toBuffer`, `isBuffer`)\n- Configurable vector size build option (`-Dvector-size=3` or `4`, default 4)\n- `Function.getCoverage()` method for collecting code coverage data from Luau functions compiled with coverage enabled\n\n### Changed\n- **Build System**: Switched from Git submodules to Zig package manager for Luau dependency, simplifying setup process\n- Updated Luau dependency from version 0.684 to 0.686\n- Enhanced State.zig documentation with detailed stack operation descriptions and Lua 5.1 manual references\n\nLuau version: [0.686](https://github.com/luau-lang/luau/releases/tag/0.686)\n",
      "prerelease": false,
      "published_at": "2025-08-17T21:09:27Z",
      "html_url": "https://github.com/mxpv/luaz/releases/tag/v0.4.0",
      "assets": []
    },
    {
      "tag_name": "v0.3.0",
      "name": "",
      "body": "### Added\r\n- **Luau StrBuf support** for efficient string building with automatic memory management\r\n  - High-level `StrBuf` API with `init()`, `initSize()`, `addString()`, `addChar()`, and `add()` methods\r\n  - Support for returning StrBuf from Zig functions with automatic pointer fixup\r\n  - Integration with table operations and closure system\r\n  - Handles both stack buffer (small strings) and dynamic allocation (large strings)\r\n- Variadic arguments support with `Varargs` iterator for functions accepting variable number of arguments\r\n  - `Varargs.raiseError()` method for throwing descriptive type validation errors\r\n- **BREAKING**: `setClosure` Lua closures must use `Upvalues(T)` as first parameter\r\n- Canonical Zig iterator pattern for table iteration with `Table.iterator()`\r\n- Metatable management APIs:\r\n  - `Lua.createMetaTable()` for flexible metatable creation without global registration\r\n  - `Table.setMetaTable()` and `Table.getMetaTable()` for metatable attachment and retrieval\r\n- `Table.clear()` method to remove all entries from a table\r\n- `Table.clone()` method to create a shallow copy of a table\r\n- `Function.clone()` method to create a copy of a function with shared upvalue references\r\n- Debug API with breakpoints, stack inspection, and variable access:\r\n  - `Debug` module with execution control: `setSingleStep()`, `debugBreak()`, `debugTrace()`, `stackDepth()`\r\n  - Call stack inspection: `getInfo()`, `getArg()`, `getLocal()`/`setLocal()`, `getUpvalue()`/`setUpvalue()`\r\n  - Callback-based debugging with `setCallbacks()` for breakpoint and step event handling\r\n  - Function breakpoint support with `Function.setBreakpoint()`\r\n  - Support for debug compilation levels (0-2) for local variable and upvalue name inspection\r\n  - Thread-safe debugging with coroutine support and debug interruption handling\r\n\r\n### Changed\r\n- **BREAKING**: Table iteration API now uses standard Zig iterator pattern (`iterator.next()`)\r\n- Refactored `registerUserData` implementation to use new metatable APIs internally\r\n- Renamed module files to follow Zig naming conventions:\r\n  - `src/state.zig` ‚Üí `src/State.zig`\r\n  - `src/compile.zig` ‚Üí `src/Compiler.zig`\r\n  - Updated all imports to use the module directly instead of accessing nested types\r\n\r\n### Removed\r\n- **BREAKING**: Old manual table iteration method `Table.next()` in favor of canonical iterator",
      "prerelease": false,
      "published_at": "2025-08-12T21:56:29Z",
      "html_url": "https://github.com/mxpv/luaz/releases/tag/v0.3.0",
      "assets": []
    },
    {
      "tag_name": "v0.2.0",
      "name": "v0.2.0",
      "body": "# What's Changed\r\n\r\n### Added\r\n- Sandboxing APIs for secure script execution\r\n- Thread and coroutines support with full Luau threading capabilities\r\n- Generic Lua Value type for runtime value handling\r\n- Table iterator with automatic resource management\r\n- Raw table operations for direct table access bypassing metamethods\r\n- Low-level debug APIs for advanced debugging scenarios\r\n- Metamethod support:\r\n  - `__index` and `__newindex` for table access customization\r\n  - `__tostring` for custom string conversion\r\n  - `__len` for custom length operations\r\n  - `__concat` for concatenation operations\r\n  - Math operation metamethods (`__add`, `__sub`, `__mul`, `__div`, etc.)\r\n  - Comparison metamethods (`__eq`, `__lt`, `__le`)\r\n- Table length operations with `Table.len()` supporting full Lua semantics\r\n- Support for error returns in Lua functions\r\n- Struct and array return type conversion\r\n\r\n### Changed\r\n- Simplified resume API for streamlined coroutine management\r\n- UserData improvements:\r\n  - Support for `*Lua` receiver as first function parameter\r\n  - UserData treated as `Ref` for consistent reference handling\r\n  - No longer requires at least 1 public function when registering\r\n- Arbitrary structs can be set as Lua tables\r\n- Use `pcall` instead of direct `call` for improved error safety\r\n- Exposed GC API for greater control over garbage collection\r\n\r\n### Documentation\r\n- Updated guided tour with new features\r\n- Enhanced README with additional examples\r\n- Added test coverage reporting\r\n\r\nFull Changelog: https://github.com/mxpv/luaz/compare/v0.1.0...v0.2.0",
      "prerelease": false,
      "published_at": "2025-08-06T20:24:42Z",
      "html_url": "https://github.com/mxpv/luaz/releases/tag/v0.2.0",
      "assets": []
    },
    {
      "tag_name": "v0.1.0",
      "name": "v0.1.0",
      "body": "## What's Changed\r\n\r\n### Added\r\n- Core Lua state management with `State` wrapper\r\n- High-level idiomatic Zig API through `Lua` struct\r\n- Luau compiler integration for source-to-bytecode compilation\r\n- Type system integration with automatic conversions:\r\n  - Zig functions wrapped as callable Lua functions\r\n  - Optional types (`?T`) mapping to Lua nil values\r\n  - Tuples converted to Lua tables with array semantics\r\n  - Support for vectors and primitive types\r\n- Table operations:\r\n  - Create, set, and get table values\r\n  - Call table functions with automatic type handling\r\n  - Global environment access via `lua.globals()`\r\n- Reference system (`Ref`) for holding Lua values across function calls\r\n- Function references for direct Lua function access\r\n- UserData support:\r\n  - Register Zig structs as Lua userdata\r\n  - Automatic method binding with compile-time generation\r\n  - Light userdata support\r\n- Custom allocator support through `Lua.init()`\r\n- JIT code generation with `enable_codegen()`\r\n- Standard library loading functions\r\n- Debug utilities:\r\n  - Stack dumping with `dumpStack()`\r\n  - Custom assert handler support\r\n- Build system:\r\n  - Automatic discovery and compilation of Luau source files\r\n  - Multiple build targets (library, compiler, analyzer, docs)\r\n  - Code formatting checks\r\n- Documentation generation\r\n- Unit test suite with memory leak detection\r\n- Continuous integration with coverage reporting\r\n\r\n## New Contributors\r\n* @mxpv made their first contribution in https://github.com/mxpv/luaz/pull/2\r\n\r\n**Full Changelog**: https://github.com/mxpv/luaz/commits/v0.1.0",
      "prerelease": false,
      "published_at": "2025-08-03T19:16:21Z",
      "html_url": "https://github.com/mxpv/luaz/releases/tag/v0.1.0",
      "assets": []
    }
  ],
  "owner_bio": "Infrastructure engineer: containers, microVMs, Kubernetes.\r\n@containerd maintainer.",
  "owner_company": "@NVIDIA",
  "owner_location": "Seattle, WA",
  "owner_blog": null,
  "owner_twitter_username": "mak_pav",
  "owner_followers": 250,
  "owner_following": 12,
  "owner_created_at": "2011-06-21T21:02:30Z",
  "homepage": "https://mxpv.github.io/luaz/",
  "license": "MIT",
  "category": "library"
}