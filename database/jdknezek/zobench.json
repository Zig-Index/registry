{
  "name": "zobench",
  "owner": "jdknezek",
  "repo": "zobench",
  "description": "Simple Zig benchmarking",
  "type": "project",
  "topics": [
    "zig-package"
  ],
  "stars": 1,
  "forks": 0,
  "watchers": 1,
  "updated_at": "2023-03-10T03:36:37Z",
  "readme": "# zobench\n\nZobench is a simple benchmark library for Zig. It's inspired by [Go's testing.B](https://golang.org/pkg/testing/#B).\n\n## Example\n\n```zig\nfn benchmarkAssign(b: *State) !void {\n    // Expensive setup\n    b.resetTimer();\n\n    var i: usize = 0;\n    while (i < b.n) : (i += 1) {\n        i = i;\n    }\n}\n\ntest \"runN\" {\n    const result = try runN(benchmarkAssign, 10);\n    try std.testing.expect(result.n == 10);\n\n    std.debug.print(\"\\n{} ops / {} ns = {d:.3} ns/op\\n\", .{ result.n, result.ns, result.nsPerOp() });\n}\n\ntest \"runNs\" {\n    const result = try runNs(benchmarkAssign, std.time.ns_per_s);\n    try std.testing.expect(result.ns >= std.time.ns_per_s);\n\n    std.debug.print(\"\\n{} ops / {} ns = {d:.3} ns/op\\n\", .{ result.n, result.ns, result.nsPerOp() });\n}\n\nfn benchmarkAlloc(b: *State) !void {\n    var allocator = b.allocator();\n\n    // Expensive setup\n\n    b.resetTimer();\n\n    var i: usize = 0;\n    while (i < b.n) : (i += 1) {\n        const p = try allocator.create(u64);\n        if (i % 2 == 0) {\n            allocator.destroy(p);\n        }\n    }\n}\n\ntest \"leak\" {\n    const result = try runN(benchmarkAlloc, 10);\n\n    std.debug.print(\"\\n{d:.3} allocs/op, {d:.3} bytes/op\\n\", .{ result.allocsPerOp(), result.allocMemPerOp() });\n    if (result.mem > 0) {\n        std.debug.print(\"LEAKED {} BYTES!\\n\", .{result.mem});\n    }\n}\n```\n\nOutput:\n\n```\nTest [1/3] test.runN...\n10 ops / 200 ns = 20.000 ns/op\nTest [2/3] test.runNs...\n927815920 ops / 1154363300 ns = 1.244 ns/op\nTest [3/3] test.alloc...\n1.000 allocs/op, 8.000 bytes/op\nLEAKED 40 BYTES!\n```\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/1338?v=4",
  "releases": [],
  "owner_company": null,
  "owner_location": null,
  "owner_blog": null,
  "owner_twitter_username": null,
  "owner_followers": 12,
  "owner_following": 1,
  "owner_created_at": "2008-02-28T00:26:55Z",
  "license": "ISC",
  "category": "library"
}