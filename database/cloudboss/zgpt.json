{
  "name": "zgpt",
  "owner": "cloudboss",
  "repo": "zgpt",
  "description": "",
  "type": "package",
  "topics": [
    "zig-package"
  ],
  "stars": 0,
  "forks": 0,
  "watchers": 0,
  "updated_at": "2026-01-02T19:12:45Z",
  "dependencies": [
    {
      "name": "example",
      "url": "https://example.com/foo.tar.gz",
      "hash": "..."
    }
  ],
  "minimum_zig_version": "0.15.1",
  "readme": "# ZGPT - Zig GPT Partition Library\n\nA Zig library for reading and manipulating GPT (GUID Partition Table) partition tables.\n\n## Features\n\n- **GPT Parsing**: Read and validate GPT headers and partition entries\n- **Partition Resizing**: Resize partitions to specific sizes or maximum available space\n- **Safety Checks**: Comprehensive validation and error handling\n- **Command Line Interface**: Easy-to-use CLI for common operations\n\n## Installation\n\n```bash\nzig build\n```\n\n## API Usage\n\n### Basic Usage\n\n```zig\nconst std = @import(\"std\");\nconst zgpt = @import(\"zgpt\");\n\npub fn main() !void {\n    var gpa = std.heap.GeneralPurposeAllocator(.{}){};\n    defer _ = gpa.deinit();\n    const allocator = gpa.allocator();\n\n    // Open a GPT device\n    var gpt = try zgpt.ZGpt.init(allocator, \"/dev/nvme0n1\");\n    defer gpt.deinit();\n\n    // Load the partition table\n    try gpt.load();\n\n    // List all partitions\n    const partitions = try gpt.listPartitions();\n    defer gpt.freePartitionList(partitions);\n\n    for (partitions) |partition| {\n        std.debug.print(\"Partition {}: {s}\\\\n\", .{ partition.partition_number, partition.name });\n    }\n\n    // Resize partition 1 to maximum available space\n    try gpt.resizePartitionToMax(1);\n}\n```\n\n### Advanced Usage\n\n```zig\nconst zgpt = @import(\"zgpt\");\n\n// Resize with specific constraints\nvar constraints = zgpt.resize.ResizeConstraints{\n    .allow_shrinking = false,\n    .allow_moving = false,\n    .min_size_sectors = 2048,\n    .alignment_sectors = 8, // 4KB alignment\n};\n\nconst operation = zgpt.resize.ResizeOperation.byGigabytes(1, 20); // 20GB\ntry zgpt.resize.resizePartition(&context, operation, constraints);\n```\n\n## Command Line Interface\n\n### List Partitions\n```bash\n./zig-out/bin/zgpt list /dev/nvme0n1\n```\n\n### Show Partition Information\n```bash\n./zig-out/bin/zgpt info /dev/nvme0n1 1\n```\n\n### Resize Partition\n```bash\n# Resize to specific size (in MB)\n./zig-out/bin/zgpt resize /dev/nvme0n1 1 10240\n\n# Resize to maximum available space\n./zig-out/bin/zgpt resize-max /dev/nvme0n1 1\n```\n\n## Library Structure\n\n### Core Modules\n\n- **`gpt.zig`**: Core GPT data structures (Guid, GptHeader, GptEntry)\n- **`gpt_context.zig`**: GPT device context and I/O operations\n- **`resize.zig`**: Partition resizing functionality\n- **`root.zig`**: Main library interface\n\n### Key Types\n\n#### `Guid`\n```zig\npub const Guid = extern struct {\n    // GUID structure for partition types and identifiers\n    pub fn fromString(str: []const u8) !Guid\n    pub fn toString(self: *const Guid, buffer: []u8) ![]const u8\n    pub fn isEmpty(self: *const Guid) bool\n}\n```\n\n#### `GptHeader`\n```zig\npub const GptHeader = extern struct {\n    // GPT header structure\n    pub fn init() GptHeader\n    pub fn isValid(self: *const GptHeader) bool\n    pub fn getNumPartitions(self: *const GptHeader) u32\n}\n```\n\n#### `GptEntry`\n```zig\npub const GptEntry = extern struct {\n    // GPT partition entry\n    pub fn isEmpty(self: *const GptEntry) bool\n    pub fn getStartLba(self: *const GptEntry) u64\n    pub fn getEndLba(self: *const GptEntry) u64\n    pub fn getSize(self: *const GptEntry) u64\n    pub fn setSize(self: *GptEntry, start: u64, size: u64) void\n}\n```\n\n## EC2 Usage Example\n\nTypical usage for resizing the root partition on an EC2 instance after volume expansion:\n\n```bash\n# After expanding the EBS volume in AWS console\nsudo ./zig-out/bin/zgpt resize-max /dev/nvme0n1 1\nsudo resize2fs /dev/nvme0n1p1  # For ext4 filesystems\n```\n\n## Safety and Validation\n\nThe library includes comprehensive safety checks:\n\n- **CRC32 validation** of GPT headers and partition arrays\n- **Signature verification** of GPT headers\n- **Overlap detection** when resizing partitions\n- **Boundary checking** against usable LBA ranges\n- **Backup header synchronization**\n\n## Error Handling\n\nThe library uses Zig's error union types for comprehensive error handling:\n\n```zig\npub const GptError = error{\n    InvalidSignature,\n    InvalidCrc32,\n    InvalidHeaderSize,\n    InvalidLbaRange,\n    PartitionNotFound,\n    NotEnoughSpace,\n    // ... and many more I/O errors\n};\n```\n\n## Testing\n\n```bash\nzig build test\n```\n\nThe test suite includes:\n- GUID parsing and formatting tests\n- GPT header validation tests\n- Partition entry manipulation tests\n\n## Requirements\n\n- Zig 0.15.2 or later\n- Root privileges for accessing block devices\n- Compatible with GPT partition tables (UEFI/EFI systems)\n\n## Limitations\n\n- Currently supports 512-byte sector sizes only\n- Designed primarily for Linux block devices\n- Does not support MBR partition tables\n- UTF-16 partition names are simplified to ASCII\n\n## Contributing\n\nThis library was ported from the util-linux libfdisk GPT implementation. Contributions welcome for:\n\n- Support for non-512-byte sectors\n- Better UTF-16 name handling\n- Additional partition type definitions\n- Performance optimizations\n\n## License\n\nSee the source files for individual license information. The GPT implementation is based on util-linux which is licensed under various licenses including GPL.\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/15853060?v=4",
  "releases": [],
  "owner_bio": null,
  "owner_location": null,
  "owner_blog": null,
  "owner_twitter_username": null,
  "owner_created_at": "2015-11-15T03:30:33Z",
  "license": "LGPL-3.0",
  "category": "library"
}