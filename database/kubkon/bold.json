{
  "name": "bold",
  "owner": "kubkon",
  "repo": "bold",
  "description": "bold: the bold linker",
  "type": "package",
  "topics": [
    "zig",
    "linker",
    "zig-package"
  ],
  "stars": 335,
  "forks": 24,
  "watchers": 12,
  "updated_at": "2025-12-01T07:20:23Z",
  "readme": "# bold - the *bold* linker\n\n> Bold used to be emerald, but due to time constraints and other commitments I am unable to develop and maintain the other drivers.\n> Emerald now lives in another repo -> [kubkon/emerald-old](https://github.com/kubkon/emerald-old).\n\n`bold` is a drop-in replacement for Apple system linker `ld`, written fully in Zig. It is on par with the LLVM lld linker, \nfaster than the legacy Apple ld linker, but slower than the rewritten Apple ld linker. Some benchmark results between the linkers \nwhen linking stage3-zig compiler which includes linking LLVM statically:\n\n```sh\n$ hyperfine ./bold.sh ./ld.sh ./ld_legacy.sh ./lld.sh\nBenchmark 1: ./bold.sh\n  Time (mean ¬± œÉ):     978.5 ms ¬±   9.9 ms    [User: 3083.2 ms, System: 949.2 ms]\n  Range (min ‚Ä¶ max):   967.6 ms ‚Ä¶ 998.7 ms    10 runs\n\nBenchmark 2: ./ld.sh\n  Time (mean ¬± œÉ):     439.0 ms ¬±   5.4 ms    [User: 1769.9 ms, System: 273.1 ms]\n  Range (min ‚Ä¶ max):   432.2 ms ‚Ä¶ 447.9 ms    10 runs\n\nBenchmark 3: ./ld_legacy.sh\n  Time (mean ¬± œÉ):      1.986 s ¬±  0.021 s    [User: 3.100 s, System: 0.221 s]\n  Range (min ‚Ä¶ max):    1.968 s ‚Ä¶  2.030 s    10 runs\n\nBenchmark 4: ./lld.sh\n  Time (mean ¬± œÉ):      1.043 s ¬±  0.009 s    [User: 1.206 s, System: 0.210 s]\n  Range (min ‚Ä¶ max):    1.031 s ‚Ä¶  1.060 s    10 runs\n\nSummary\n  ./ld.sh ran\n    2.23 ¬± 0.04 times faster than ./bold.sh\n    2.38 ¬± 0.04 times faster than ./lld.sh\n    4.52 ¬± 0.07 times faster than ./ld_legacy.sh\n```\n\nIn the results\n* `bold.sh` calls `bold` with all the required inputs and flags\n* `ld.sh` calls the rewritten Apple linker\n* `ld_legacy.sh` calls `ld -ld_classic` the legacy Apple linker\n* `lld.sh` calls LLVM lld linker\n\ntl;dr `bold` is currently directly competing with LLVM lld but behind the Apple ld linker.\n\n## Quick start guide\n\n### Building\n\nYou will need nightly Zig in your path. You can download it from [here](https://ziglang.org/download/).\n\n```\n$ zig build -Doptimize=ReleaseFast\n```\n\nYou can then pass it to your system C/C++ compiler with `-B` or `-fuse-ld` flag (note that the latter is supported mainly/only by clang):\n\n```\n$ cat <<EOF > hello.c\n#include <stdio.h>\n\nint main() {\n    fprintf(stderr, \"Hello, World!\\n\");\n    return 0;\n}\nEOF\n\n# Using clang\n$ clang hello.c -fuse-ld=bold\n\n# Using gcc\n$ gcc hello.c -B/path/to/bold\n```\n\n### Testing\n\nIf you'd like to run unit and end-to-end tests, run the tests like you'd normally do for any other Zig project.\n\n```\n$ zig build test\n```\n\n## Contributing\n\nYou are welcome to contribute to this repo.\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/1519747?u=242eb0dcd1841303f3f48919c2f5120d35900f50&v=4",
  "releases": [
    {
      "tag_name": "v0.2.0",
      "name": "v0.2.0",
      "body": "## Bold just got faster!\r\n\r\nCompared to v0.1.0, we notice a 1.19x speed-up when linking Zig stage3 compiler:\r\n\r\n```\r\nBenchmark 1: ./bold.sh\r\n  Time (mean ¬± œÉ):     968.2 ms ¬±   4.5 ms    [User: 3015.3 ms, System: 959.4 ms]\r\n  Range (min ‚Ä¶ max):   960.0 ms ‚Ä¶ 972.8 ms    10 runs\r\n\r\nBenchmark 2: ./bold-0.1.0.sh\r\n  Time (mean ¬± œÉ):      1.148 s ¬±  0.016 s    [User: 4.639 s, System: 0.903 s]\r\n  Range (min ‚Ä¶ max):    1.129 s ‚Ä¶  1.182 s    10 runs\r\n\r\nSummary\r\n  ./bold.sh ran\r\n    1.19 ¬± 0.02 times faster than ./bold-0.1.0.sh\r\n```\r\n\r\nWith this, we have now officially overtaken LLD for this benchmark, but are still behind Apple's rewritten ld64:\r\n\r\n```\r\nBenchmark 1: ./bold.sh\r\n  Time (mean ¬± œÉ):     969.4 ms ¬±   7.5 ms    [User: 3014.2 ms, System: 955.4 ms]\r\n  Range (min ‚Ä¶ max):   952.4 ms ‚Ä¶ 978.2 ms    10 runs\r\n\r\nBenchmark 2: ./bold-0.1.0.sh\r\n  Time (mean ¬± œÉ):      1.150 s ¬±  0.012 s    [User: 4.680 s, System: 0.894 s]\r\n  Range (min ‚Ä¶ max):    1.135 s ‚Ä¶  1.171 s    10 runs\r\n\r\nBenchmark 3: ./ld.sh\r\n  Time (mean ¬± œÉ):     445.1 ms ¬±   7.7 ms    [User: 1773.4 ms, System: 292.3 ms]\r\n  Range (min ‚Ä¶ max):   438.6 ms ‚Ä¶ 464.2 ms    10 runs\r\n\r\nBenchmark 4: ./lld.sh\r\n  Time (mean ¬± œÉ):      1.062 s ¬±  0.024 s    [User: 1.213 s, System: 0.237 s]\r\n  Range (min ‚Ä¶ max):    1.043 s ‚Ä¶  1.122 s    10 runs\r\n\r\nSummary\r\n  ./ld.sh ran\r\n    2.18 ¬± 0.04 times faster than ./bold.sh\r\n    2.39 ¬± 0.07 times faster than ./lld.sh\r\n    2.58 ¬± 0.05 times faster than ./bold-0.1.0.sh\r\n```\r\n\r\n## What's Changed\r\n* Add zacho via nix flake by @kubkon in https://github.com/kubkon/bold/pull/172\r\n* Update to zig 0.14 by @kubkon in https://github.com/kubkon/bold/pull/173\r\n* Make Atom.Index safe by @kubkon in https://github.com/kubkon/bold/pull/174\r\n* Migrate remaining unsafe indexes to safe indexes except File by @kubkon in https://github.com/kubkon/bold/pull/175\r\n* Migrate to safe File.Index by @kubkon in https://github.com/kubkon/bold/pull/176\r\n\r\n\r\n**Full Changelog**: https://github.com/kubkon/bold/compare/v0.1.0...v0.2.0",
      "prerelease": false,
      "published_at": "2025-05-10T08:08:15Z",
      "html_url": "https://github.com/kubkon/bold/releases/tag/v0.2.0",
      "assets": [
        {
          "name": "bold-0.2.0-aarch64-macos.tar.xz",
          "url": "https://github.com/kubkon/bold/releases/download/v0.2.0/bold-0.2.0-aarch64-macos.tar.xz",
          "size": 456188,
          "content_type": "application/x-xz"
        },
        {
          "name": "bold-0.2.0-x86_64-macos.tar.xz",
          "url": "https://github.com/kubkon/bold/releases/download/v0.2.0/bold-0.2.0-x86_64-macos.tar.xz",
          "size": 563812,
          "content_type": "application/x-xz"
        }
      ]
    },
    {
      "tag_name": "v0.1.0",
      "name": "v0.1.0",
      "body": "## `zld` is now `bold`\r\n\r\nI have renamed `zld` and then `emerald` to `bold` and made it a Mach-O only linker. I needed to face the harsh reality that I will not be able to develop and maintain multiple drivers at the same time and so I've decided to focus on Mach-O only. If anyone is interested in carrying on the work with the other drivers however, the source code is archived and available in [kubkon/emerald-old](https://github.com/kubkon/emerald-old) repo. I also think that `bold` being 100% Mach-O only can be a nice complement to the `mold` linker (which is ELF-only). Wishful thinking, I know, maybe one day ;-)\r\n\r\n## Some numbers\r\n\r\nSince landing #143, `bold` is now competing with LLVM lld while still playing catch up with the new Apple linker. Some benchmark results that track the time it takes to link stage3-zig compiler which includes linking LLVM statically:\r\n\r\n```\r\n$ hyperfine ./bold.sh ./ld.sh ./ld_legacy.sh ./lld.sh\r\nBenchmark 1: ./bold.sh\r\n  Time (mean ¬± œÉ):      1.088 s ¬±  0.018 s    [User: 3.174 s, System: 1.004 s]\r\n  Range (min ‚Ä¶ max):    1.039 s ‚Ä¶  1.104 s    10 runs\r\n\r\nBenchmark 2: ./ld.sh\r\n  Time (mean ¬± œÉ):     491.8 ms ¬±  19.5 ms    [User: 1891.5 ms, System: 304.7 ms]\r\n  Range (min ‚Ä¶ max):   458.1 ms ‚Ä¶ 509.9 ms    10 runs\r\n\r\nBenchmark 3: ./ld_legacy.sh\r\n  Time (mean ¬± œÉ):      2.132 s ¬±  0.013 s    [User: 3.242 s, System: 0.256 s]\r\n  Range (min ‚Ä¶ max):    2.104 s ‚Ä¶  2.150 s    10 runs\r\n\r\nBenchmark 4: ./lld.sh\r\n  Time (mean ¬± œÉ):      1.160 s ¬±  0.021 s    [User: 1.329 s, System: 0.247 s]\r\n  Range (min ‚Ä¶ max):    1.133 s ‚Ä¶  1.208 s    10 runs\r\n\r\nSummary\r\n  ./ld.sh ran\r\n    2.21 ¬± 0.10 times faster than ./bold.sh\r\n    2.36 ¬± 0.10 times faster than ./lld.sh\r\n    4.33 ¬± 0.17 times faster than ./ld_legacy.sh\r\n```\r\n\r\nIn the results\r\n* `bold.sh` calls `bold`\r\n* `ld.sh` calls the rewritten Apple linker\r\n* `ld_legacy.sh` calls `ld -ld_classic` the legacy Apple linker\r\n* `lld.sh` calls the LLVM lld linker\r\n\r\n## What's Changed\r\n\r\nI'm only going to list the most notable changes:\r\n1. output produced by the linker is now more compatible with Apple tooling; An example of this is sorting all relocs in descending order (an unwritten rule required by Apple) - https://github.com/kubkon/bold/pull/101\r\n2. some fixes for macOS 11 have also landed. I want `bold` to support as many older versions of macOS as possible but testing it is now a problem since GitHub is deprecating runners with older macOS versions - https://github.com/kubkon/bold/pull/103\r\n3. add support for VisionOS - https://github.com/kubkon/bold/pull/129\r\n4. add support for merging cstrings and literals. This should produce output that has mergeable literals deduped and is thus smaller in size - https://github.com/kubkon/bold/pull/137\r\n5. speed up the linker by embracing multi-threaded approach, which is probably the biggest woop of this release. We are now on par with LLVM lld linker. Next target will be to beat the new Apple linker - https://github.com/kubkon/bold/pull/143\r\n6. handle DWARF v1 all the way to v5 - https://github.com/kubkon/bold/pull/161\r\n7. handle enough flags to be able to link Roc compiler with `bold` - https://github.com/kubkon/bold/pull/163\r\n8. handle `-arch_multiple` and `-final_output` flags, which effectively makes the linker compatible with `lipo` invoked directly by `clang` - https://github.com/kubkon/bold/pull/166 and https://github.com/kubkon/bold/pull/167\r\n\r\n## New Contributors\r\n* @theoparis made their first contribution in https://github.com/kubkon/bold/pull/135\r\n* @der-teufel-programming made their first contribution in https://github.com/kubkon/bold/pull/141\r\n* @Rexicon226 made their first contribution in https://github.com/kubkon/bold/pull/151\r\n\r\n**Full Changelog**: https://github.com/kubkon/bold/compare/v0.0.4...v0.1.0",
      "prerelease": false,
      "published_at": "2024-12-27T11:31:58Z",
      "html_url": "https://github.com/kubkon/bold/releases/tag/v0.1.0",
      "assets": [
        {
          "name": "bold-0.1.0-aarch64-macos.tar.xz",
          "url": "https://github.com/kubkon/bold/releases/download/v0.1.0/bold-0.1.0-aarch64-macos.tar.xz",
          "size": 444024,
          "content_type": "application/x-xz"
        },
        {
          "name": "bold-0.1.0-x86_64-macos.tar.xz",
          "url": "https://github.com/kubkon/bold/releases/download/v0.1.0/bold-0.1.0-x86_64-macos.tar.xz",
          "size": 521872,
          "content_type": "application/x-xz"
        }
      ]
    },
    {
      "tag_name": "v0.0.4",
      "name": "macho: add -r support",
      "body": "Implement `-r` mode for the Mach-O linker.\r\n\r\n## What's Changed\r\n* wasm - fix debug info & misc by @Luukdegram in https://github.com/kubkon/zld/pull/96\r\n* macho: implement -r mode by @kubkon in https://github.com/kubkon/zld/pull/95\r\n* macho: write data-in-code entries in -r mode by @kubkon in https://github.com/kubkon/zld/pull/99\r\n* macho+test: misc fixes by @kubkon in https://github.com/kubkon/zld/pull/100\r\n\r\n\r\n**Full Changelog**: https://github.com/kubkon/zld/compare/v0.0.3...v0.0.4",
      "prerelease": false,
      "published_at": "2024-01-08T22:16:37Z",
      "html_url": "https://github.com/kubkon/bold/releases/tag/v0.0.4",
      "assets": [
        {
          "name": "zld-0.0.4-aarch64-macos.tar.xz",
          "url": "https://github.com/kubkon/bold/releases/download/v0.0.4/zld-0.0.4-aarch64-macos.tar.xz",
          "size": 679452,
          "content_type": "application/x-xz"
        },
        {
          "name": "zld-0.0.4-x86_64-linux-musl.tar.xz",
          "url": "https://github.com/kubkon/bold/releases/download/v0.0.4/zld-0.0.4-x86_64-linux-musl.tar.xz",
          "size": 743744,
          "content_type": "application/x-xz"
        },
        {
          "name": "zld-0.0.4-x86_64-macos.tar.xz",
          "url": "https://github.com/kubkon/bold/releases/download/v0.0.4/zld-0.0.4-x86_64-macos.tar.xz",
          "size": 765216,
          "content_type": "application/x-xz"
        }
      ]
    },
    {
      "tag_name": "v0.0.3",
      "name": "zld 0.0.3",
      "body": "# A complete MachO driver rewrite + ELF x86_64 support\r\n\r\n* MachO driver has been fully redesigned mainly so that we can easily plug it in into Zig much like we did with the ELF driver.\r\n* This is the first tagged release of the ELF x86_64 driver.\r\n* Thanks to @Luukdegram we also get some Wasm linker support üéâ\r\n\r\n## Better MachO link times (on Apple Silicon)\r\n\r\nSeems we have regressed in link times prior to the MachO rewrite. Below you will find a quick benchmark of linking Zig's stage4 binary. You can also see what Rui meant when he mentioned that Apple stepped up their game - Apple's stock linker crushed `zld` before and after the rewrite and so it did with LLVM's LLD. That's good though - it's something we can strive for. The results are also good news for us since the rewrite is significantly faster than what we had before (`zld_old` is based on 19ccd5cacbca0895d6f0444835225415fc1ed7e6 FWIW), and I haven't yet even started thinking about parallelising parsing input objects, etc., a trick that all three linkers currently employ (Apple's `ld`, `ld64.lld` and Rui's `sold` linker).\r\n\r\n```\r\n$ hyperfine ./zld ./zld_old ./lld ./ld64\r\nBenchmark 1: ./zld\r\n  Time (mean ¬± œÉ):      3.236 s ¬±  0.014 s    [User: 3.460 s, System: 0.750 s]\r\n  Range (min ‚Ä¶ max):    3.219 s ‚Ä¶  3.269 s    10 runs\r\n\r\nBenchmark 2: ./zld_old\r\n  Time (mean ¬± œÉ):      4.419 s ¬±  0.011 s    [User: 4.671 s, System: 0.761 s]\r\n  Range (min ‚Ä¶ max):    4.398 s ‚Ä¶  4.430 s    10 runs\r\n\r\nBenchmark 3: ./lld\r\n  Time (mean ¬± œÉ):      1.497 s ¬±  0.019 s    [User: 1.700 s, System: 0.308 s]\r\n  Range (min ‚Ä¶ max):    1.457 s ‚Ä¶  1.529 s    10 runs\r\n\r\nBenchmark 4: ./ld64\r\n  Time (mean ¬± œÉ):     627.0 ms ¬±   7.2 ms    [User: 2140.1 ms, System: 385.3 ms]\r\n  Range (min ‚Ä¶ max):   617.8 ms ‚Ä¶ 639.4 ms    10 runs\r\n\r\nSummary\r\n  ./ld64 ran\r\n    2.39 ¬± 0.04 times faster than ./lld\r\n    5.16 ¬± 0.06 times faster than ./zld\r\n    7.05 ¬± 0.08 times faster than ./zld_old\r\n```\r\n\r\nThe actual full linker invocation is as follows:\r\n\r\n```\r\n/Users/kubkon/dev/zld/zig-out/bin/ld64.zld -dynamic -platform_version macos 13.6.3 14.0 -syslibroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.0.sdk -headerpad_max_install_names /Users/kubkon/dev/zig/build/zigcpp/libzigcpp.a /Users/kubkon/opt/llvm17-release/lib/libclangFrontendTool.a /Users/kubkon/opt/llvm17-release/lib/libclangCodeGen.a /Users/kubkon/opt/llvm17-release/lib/libclangFrontend.a /Users/kubkon/opt/llvm17-release/lib/libclangDriver.a /Users/kubkon/opt/llvm17-release/lib/libclangSerialization.a /Users/kubkon/opt/llvm17-release/lib/libclangSema.a /Users/kubkon/opt/llvm17-release/lib/libclangStaticAnalyzerFrontend.a /Users/kubkon/opt/llvm17-release/lib/libclangStaticAnalyzerCheckers.a /Users/kubkon/opt/llvm17-release/lib/libclangStaticAnalyzerCore.a /Users/kubkon/opt/llvm17-release/lib/libclangAnalysis.a /Users/kubkon/opt/llvm17-release/lib/libclangASTMatchers.a /Users/kubkon/opt/llvm17-release/lib/libclangAST.a /Users/kubkon/opt/llvm17-release/lib/libclangParse.a /Users/kubkon/opt/llvm17-release/lib/libclangSema.a /Users/kubkon/opt/llvm17-release/lib/libclangBasic.a /Users/kubkon/opt/llvm17-release/lib/libclangEdit.a /Users/kubkon/opt/llvm17-release/lib/libclangLex.a /Users/kubkon/opt/llvm17-release/lib/libclangARCMigrate.a /Users/kubkon/opt/llvm17-release/lib/libclangRewriteFrontend.a /Users/kubkon/opt/llvm17-release/lib/libclangRewrite.a /Users/kubkon/opt/llvm17-release/lib/libclangCrossTU.a /Users/kubkon/opt/llvm17-release/lib/libclangIndex.a /Users/kubkon/opt/llvm17-release/lib/libclangToolingCore.a /Users/kubkon/opt/llvm17-release/lib/libclangExtractAPI.a /Users/kubkon/opt/llvm17-release/lib/libclangSupport.a /Users/kubkon/opt/llvm17-release/lib/liblldMinGW.a /Users/kubkon/opt/llvm17-release/lib/liblldELF.a /Users/kubkon/opt/llvm17-release/lib/liblldCOFF.a /Users/kubkon/opt/llvm17-release/lib/liblldWasm.a /Users/kubkon/opt/llvm17-release/lib/liblldMachO.a /Users/kubkon/opt/llvm17-release/lib/liblldCommon.a /Users/kubkon/opt/llvm17-release/lib/libLLVMWindowsManifest.a /Users/kubkon/opt/llvm17-release/lib/libLLVMXRay.a /Users/kubkon/opt/llvm17-release/lib/libLLVMLibDriver.a /Users/kubkon/opt/llvm17-release/lib/libLLVMDlltoolDriver.a /Users/kubkon/opt/llvm17-release/lib/libLLVMCoverage.a /Users/kubkon/opt/llvm17-release/lib/libLLVMLineEditor.a /Users/kubkon/opt/llvm17-release/lib/libLLVMXCoreDisassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMXCoreCodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMXCoreDesc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMXCoreInfo.a /Users/kubkon/opt/llvm17-release/lib/libLLVMX86TargetMCA.a /Users/kubkon/opt/llvm17-release/lib/libLLVMX86Disassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMX86AsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMX86CodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMX86Desc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMX86Info.a /Users/kubkon/opt/llvm17-release/lib/libLLVMWebAssemblyDisassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMWebAssemblyAsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMWebAssemblyCodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMWebAssemblyUtils.a /Users/kubkon/opt/llvm17-release/lib/libLLVMWebAssemblyDesc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMWebAssemblyInfo.a /Users/kubkon/opt/llvm17-release/lib/libLLVMVEDisassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMVEAsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMVECodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMVEDesc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMVEInfo.a /Users/kubkon/opt/llvm17-release/lib/libLLVMSystemZDisassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMSystemZAsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMSystemZCodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMSystemZDesc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMSystemZInfo.a /Users/kubkon/opt/llvm17-release/lib/libLLVMSparcDisassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMSparcAsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMSparcCodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMSparcDesc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMSparcInfo.a /Users/kubkon/opt/llvm17-release/lib/libLLVMRISCVTargetMCA.a /Users/kubkon/opt/llvm17-release/lib/libLLVMRISCVDisassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMRISCVAsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMRISCVCodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMRISCVDesc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMRISCVInfo.a /Users/kubkon/opt/llvm17-release/lib/libLLVMPowerPCDisassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMPowerPCAsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMPowerPCCodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMPowerPCDesc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMPowerPCInfo.a /Users/kubkon/opt/llvm17-release/lib/libLLVMNVPTXCodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMNVPTXDesc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMNVPTXInfo.a /Users/kubkon/opt/llvm17-release/lib/libLLVMMSP430Disassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMMSP430AsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMMSP430CodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMMSP430Desc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMMSP430Info.a /Users/kubkon/opt/llvm17-release/lib/libLLVMMipsDisassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMMipsAsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMMipsCodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMMipsDesc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMMipsInfo.a /Users/kubkon/opt/llvm17-release/lib/libLLVMLoongArchDisassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMLoongArchAsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMLoongArchCodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMLoongArchDesc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMLoongArchInfo.a /Users/kubkon/opt/llvm17-release/lib/libLLVMLanaiDisassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMLanaiCodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMLanaiAsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMLanaiDesc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMLanaiInfo.a /Users/kubkon/opt/llvm17-release/lib/libLLVMHexagonDisassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMHexagonCodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMHexagonAsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMHexagonDesc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMHexagonInfo.a /Users/kubkon/opt/llvm17-release/lib/libLLVMBPFDisassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMBPFAsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMBPFCodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMBPFDesc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMBPFInfo.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAVRDisassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAVRAsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAVRCodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAVRDesc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAVRInfo.a /Users/kubkon/opt/llvm17-release/lib/libLLVMARMDisassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMARMAsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMARMCodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMARMDesc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMARMUtils.a /Users/kubkon/opt/llvm17-release/lib/libLLVMARMInfo.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAMDGPUTargetMCA.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAMDGPUDisassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAMDGPUAsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAMDGPUCodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAMDGPUDesc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAMDGPUUtils.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAMDGPUInfo.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAArch64Disassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAArch64AsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAArch64CodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAArch64Desc.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAArch64Utils.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAArch64Info.a /Users/kubkon/opt/llvm17-release/lib/libLLVMOrcJIT.a /Users/kubkon/opt/llvm17-release/lib/libLLVMWindowsDriver.a /Users/kubkon/opt/llvm17-release/lib/libLLVMMCJIT.a /Users/kubkon/opt/llvm17-release/lib/libLLVMJITLink.a /Users/kubkon/opt/llvm17-release/lib/libLLVMInterpreter.a /Users/kubkon/opt/llvm17-release/lib/libLLVMExecutionEngine.a /Users/kubkon/opt/llvm17-release/lib/libLLVMRuntimeDyld.a /Users/kubkon/opt/llvm17-release/lib/libLLVMOrcTargetProcess.a /Users/kubkon/opt/llvm17-release/lib/libLLVMOrcShared.a /Users/kubkon/opt/llvm17-release/lib/libLLVMDWP.a /Users/kubkon/opt/llvm17-release/lib/libLLVMDebugInfoLogicalView.a /Users/kubkon/opt/llvm17-release/lib/libLLVMDebugInfoGSYM.a /Users/kubkon/opt/llvm17-release/lib/libLLVMOption.a /Users/kubkon/opt/llvm17-release/lib/libLLVMObjectYAML.a /Users/kubkon/opt/llvm17-release/lib/libLLVMObjCopy.a /Users/kubkon/opt/llvm17-release/lib/libLLVMMCA.a /Users/kubkon/opt/llvm17-release/lib/libLLVMMCDisassembler.a /Users/kubkon/opt/llvm17-release/lib/libLLVMLTO.a /Users/kubkon/opt/llvm17-release/lib/libLLVMPasses.a /Users/kubkon/opt/llvm17-release/lib/libLLVMCFGuard.a /Users/kubkon/opt/llvm17-release/lib/libLLVMCoroutines.a /Users/kubkon/opt/llvm17-release/lib/libLLVMipo.a /Users/kubkon/opt/llvm17-release/lib/libLLVMVectorize.a /Users/kubkon/opt/llvm17-release/lib/libLLVMLinker.a /Users/kubkon/opt/llvm17-release/lib/libLLVMInstrumentation.a /Users/kubkon/opt/llvm17-release/lib/libLLVMFrontendOpenMP.a /Users/kubkon/opt/llvm17-release/lib/libLLVMFrontendOpenACC.a /Users/kubkon/opt/llvm17-release/lib/libLLVMFrontendHLSL.a /Users/kubkon/opt/llvm17-release/lib/libLLVMExtensions.a /Users/kubkon/opt/llvm17-release/lib/libLLVMDWARFLinkerParallel.a /Users/kubkon/opt/llvm17-release/lib/libLLVMDWARFLinker.a /Users/kubkon/opt/llvm17-release/lib/libLLVMGlobalISel.a /Users/kubkon/opt/llvm17-release/lib/libLLVMMIRParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAsmPrinter.a /Users/kubkon/opt/llvm17-release/lib/libLLVMSelectionDAG.a /Users/kubkon/opt/llvm17-release/lib/libLLVMCodeGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMTarget.a /Users/kubkon/opt/llvm17-release/lib/libLLVMObjCARCOpts.a /Users/kubkon/opt/llvm17-release/lib/libLLVMCodeGenTypes.a /Users/kubkon/opt/llvm17-release/lib/libLLVMIRPrinter.a /Users/kubkon/opt/llvm17-release/lib/libLLVMInterfaceStub.a /Users/kubkon/opt/llvm17-release/lib/libLLVMFileCheck.a /Users/kubkon/opt/llvm17-release/lib/libLLVMFuzzMutate.a /Users/kubkon/opt/llvm17-release/lib/libLLVMScalarOpts.a /Users/kubkon/opt/llvm17-release/lib/libLLVMInstCombine.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAggressiveInstCombine.a /Users/kubkon/opt/llvm17-release/lib/libLLVMTransformUtils.a /Users/kubkon/opt/llvm17-release/lib/libLLVMBitWriter.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAnalysis.a /Users/kubkon/opt/llvm17-release/lib/libLLVMProfileData.a /Users/kubkon/opt/llvm17-release/lib/libLLVMSymbolize.a /Users/kubkon/opt/llvm17-release/lib/libLLVMDebugInfoBTF.a /Users/kubkon/opt/llvm17-release/lib/libLLVMDebugInfoPDB.a /Users/kubkon/opt/llvm17-release/lib/libLLVMDebugInfoMSF.a /Users/kubkon/opt/llvm17-release/lib/libLLVMDebugInfoDWARF.a /Users/kubkon/opt/llvm17-release/lib/libLLVMObject.a /Users/kubkon/opt/llvm17-release/lib/libLLVMTextAPI.a /Users/kubkon/opt/llvm17-release/lib/libLLVMMCParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMIRReader.a /Users/kubkon/opt/llvm17-release/lib/libLLVMAsmParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMMC.a /Users/kubkon/opt/llvm17-release/lib/libLLVMDebugInfoCodeView.a /Users/kubkon/opt/llvm17-release/lib/libLLVMBitReader.a /Users/kubkon/opt/llvm17-release/lib/libLLVMFuzzerCLI.a /Users/kubkon/opt/llvm17-release/lib/libLLVMCore.a /Users/kubkon/opt/llvm17-release/lib/libLLVMRemarks.a /Users/kubkon/opt/llvm17-release/lib/libLLVMBitstreamReader.a /Users/kubkon/opt/llvm17-release/lib/libLLVMBinaryFormat.a /Users/kubkon/opt/llvm17-release/lib/libLLVMTargetParser.a /Users/kubkon/opt/llvm17-release/lib/libLLVMTableGen.a /Users/kubkon/opt/llvm17-release/lib/libLLVMSupport.a /Users/kubkon/opt/llvm17-release/lib/libLLVMDemangle.a /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.0.sdk/usr/lib/libz.tbd /opt/homebrew/lib/libzstd.a /opt/homebrew/opt/ncurses/lib/libcurses.a /Users/kubkon/dev/zig/zig-cache/o/788cf4223c49f608e5802528f1c13b38/zig.o /Users/kubkon/.cache/zig/o/c1f114e8bf241e222694edf5fdaf1fc1/libcompiler_rt.a /Users/kubkon/.cache/zig/o/a2e3f9b077377eacfcc4074f52b3b03b/libc++abi.a /Users/kubkon/.cache/zig/o/e11d8307ad378132166a93b1ce4b1c1d/libc++.a -o zig_zld -lSystem -L/Users/kubkon/opt/llvm17-release/lib -L/Users/kubkon/opt/llvm17-release/lib\r\n```\r\n\r\n## What's Changed\r\n* Add Tracy integration and fix performance regression in MachO x86_64 by @kubkon in https://github.com/kubkon/zld/pull/13\r\n* Upstream zwld by @Luukdegram in https://github.com/kubkon/zld/pull/14\r\n* macho: skip atomless synthetic globals in dead_strip by @kubkon in https://github.com/kubkon/zld/pull/15\r\n* wasm: check-in Options.zig file by @Luukdegram in https://github.com/kubkon/zld/pull/17\r\n* Various wasm-linker improvements by @Luukdegram in https://github.com/kubkon/zld/pull/18\r\n* bump CI dependency versions by @Luukdegram in https://github.com/kubkon/zld/pull/19\r\n* misc fixes by @Luukdegram in https://github.com/kubkon/zld/pull/20\r\n* macho: backport strict layout adherence from Zig by @kubkon in https://github.com/kubkon/zld/pull/21\r\n* support --export and --export-dynamic by @Luukdegram in https://github.com/kubkon/zld/pull/22\r\n* allow exporting function table by @Luukdegram in https://github.com/kubkon/zld/pull/23\r\n* wasm: export data using correct virtual address by @Luukdegram in https://github.com/kubkon/zld/pull/24\r\n* Implement ctors for WebAssembly by @Luukdegram in https://github.com/kubkon/zld/pull/25\r\n* Support linking with WASI-libc by @Luukdegram in https://github.com/kubkon/zld/pull/27\r\n* wasm: implement `__heap_end` by @Luukdegram in https://github.com/kubkon/zld/pull/28\r\n* macho: add support for parsing and synthesising unwind records by @kubkon in https://github.com/kubkon/zld/pull/29\r\n* update build.zig to Zig master by @Luukdegram in https://github.com/kubkon/zld/pull/30\r\n* macho: sync with zig master by @kubkon in https://github.com/kubkon/zld/pull/31\r\n* macho: sync with zig by @kubkon in https://github.com/kubkon/zld/pull/33\r\n* wasm: Implement shared-memory and TLS by @Luukdegram in https://github.com/kubkon/zld/pull/32\r\n* update to latest master build of Zig by @Luukdegram in https://github.com/kubkon/zld/pull/35\r\n* wasm: refactor virtual addresses by @Luukdegram in https://github.com/kubkon/zld/pull/36\r\n* Update to latest Zig master by @Luukdegram in https://github.com/kubkon/zld/pull/37\r\n* Sync macho fixes for Go; actually run tests by @kubkon in https://github.com/kubkon/zld/pull/38\r\n* elf: auto-infer target CPU architecture by @kubkon in https://github.com/kubkon/zld/pull/39\r\n* macho: handle cases where entrypoint in an archive or dylib by @kubkon in https://github.com/kubkon/zld/pull/40\r\n* Update build script to use latest Zig by @kubkon in https://github.com/kubkon/zld/pull/41\r\n* zld: update zig-dis-x86_64 dependency by @kubkon in https://github.com/kubkon/zld/pull/42\r\n* elf: a complete rewrite by @kubkon in https://github.com/kubkon/zld/pull/43\r\n* test: bundle libSystem.tbd for cross-tests by @kubkon in https://github.com/kubkon/zld/pull/45\r\n* Refactor Options parsing and introduce dedicated warning/error reporting tool by @kubkon in https://github.com/kubkon/zld/pull/46\r\n* elf: minimal gcc compatibility by @kubkon in https://github.com/kubkon/zld/pull/47\r\n* elf: handle --strip-debug and --strip-all flags by @kubkon in https://github.com/kubkon/zld/pull/48\r\n* elf: dynamic linking - first (baby) steps! by @kubkon in https://github.com/kubkon/zld/pull/49\r\n* elf: add handling of local static TLS by @kubkon in https://github.com/kubkon/zld/pull/50\r\n* elf: simplify acquiring a handle to a File by @kubkon in https://github.com/kubkon/zld/pull/51\r\n* elf: reorg and cleanup by @kubkon in https://github.com/kubkon/zld/pull/52\r\n* elf: clean up \"path\" naming conundrum + dedup shared object by their SO name by @kubkon in https://github.com/kubkon/zld/pull/53\r\n* elf: add prelim support for C++ linking by @kubkon in https://github.com/kubkon/zld/pull/54\r\n* elf: sort init/fini/preinit entries by @kubkon in https://github.com/kubkon/zld/pull/55\r\n* elf: more static TLS + misc fixes and improvements by @kubkon in https://github.com/kubkon/zld/pull/56\r\n* elf: handle GNU symbol versioning for executables by @kubkon in https://github.com/kubkon/zld/pull/57\r\n* elf: link Zig stage3 correctly! by @kubkon in https://github.com/kubkon/zld/pull/58\r\n* elf: implement parsing and emitting DWARF CFI (.eh_frame) by @kubkon in https://github.com/kubkon/zld/pull/59\r\n* macho: hash the entire file contents for UUID but calc in parallel by @kubkon in https://github.com/kubkon/zld/pull/60\r\n* macho: add fixes to __eh_frame parsing emitted by Nix compiler by @kubkon in https://github.com/kubkon/zld/pull/61\r\n* elf: support position-independent executables by @kubkon in https://github.com/kubkon/zld/pull/62\r\n* Some ELF DSO gen support, but mostly a new test harness by @kubkon in https://github.com/kubkon/zld/pull/64\r\n* elf: add tests requiring -static flag and implement missing functionality for static glibs by @kubkon in https://github.com/kubkon/zld/pull/65\r\n* elf: add support for -static -pie by @kubkon in https://github.com/kubkon/zld/pull/66\r\n* wasm: Finish TLS & shared-memory implementation by @Luukdegram in https://github.com/kubkon/zld/pull/68\r\n* elf: let's finish off TLS implementation by @kubkon in https://github.com/kubkon/zld/pull/67\r\n* elf: final stretch before upstreaming by @kubkon in https://github.com/kubkon/zld/pull/69\r\n* elf: weed out bugs when linking against musl-libc by @kubkon in https://github.com/kubkon/zld/pull/70\r\n* macho: fix matching target triples for TBDv3 lib stubs by @kubkon in https://github.com/kubkon/zld/pull/71\r\n* macho: unwind info fixes for objects without MH_SUBSECTIONS_VIA_SYMBOLS by @kubkon in https://github.com/kubkon/zld/pull/72\r\n* macho: convert all log.err sites to Zld.ErrorMsg by @kubkon in https://github.com/kubkon/zld/pull/73\r\n* wasm - implement garbage collection by @Luukdegram in https://github.com/kubkon/zld/pull/74\r\n* macho: tie FDEs and unwind records to all symbol aliases by @kubkon in https://github.com/kubkon/zld/pull/76\r\n* wasm: improve linker performance by @Luukdegram in https://github.com/kubkon/zld/pull/77\r\n* macho: improve platform and SDK detection by @kubkon in https://github.com/kubkon/zld/pull/75\r\n* wasm: parse atoms lazily by @Luukdegram in https://github.com/kubkon/zld/pull/78\r\n* elf: sync with Zig master by @kubkon in https://github.com/kubkon/zld/pull/80\r\n* macho: reuse elf's ArgParser for parsing cmdline args by @kubkon in https://github.com/kubkon/zld/pull/81\r\n* update to latest zig by @kubkon in https://github.com/kubkon/zld/pull/82\r\n* Mach-O rewrite, part 1: x86_64 by @kubkon in https://github.com/kubkon/zld/pull/83\r\n* elf: refactor various things by @kubkon in https://github.com/kubkon/zld/pull/84\r\n* macho: misc fixes, link duckdb project correctly by @kubkon in https://github.com/kubkon/zld/pull/85\r\n* macho: actually handle re-exports and dylib hoisting by @kubkon in https://github.com/kubkon/zld/pull/86\r\n* macho: handle -flat_namespace by @kubkon in https://github.com/kubkon/zld/pull/87\r\n* macho: more flat namespace tests and update to new API by @kubkon in https://github.com/kubkon/zld/pull/88\r\n* macho: handle -ObjC, implement synthesising of objc selector stubs, misc all-around improvements by @kubkon in https://github.com/kubkon/zld/pull/89\r\n* Better error handling by @kubkon in https://github.com/kubkon/zld/pull/90\r\n* macho: pass all non-x86_64 tests on aarch64 by @kubkon in https://github.com/kubkon/zld/pull/91\r\n* macho: more arm64 tests by @kubkon in https://github.com/kubkon/zld/pull/92\r\n* macho: implement range extension thunks by @kubkon in https://github.com/kubkon/zld/pull/93\r\n* macho: add more tracy hooks and speed up `findAtomInSection` function by @kubkon in https://github.com/kubkon/zld/pull/94\r\n\r\n## New Contributors\r\n* @Luukdegram made their first contribution in https://github.com/kubkon/zld/pull/14\r\n\r\n**Full Changelog**: https://github.com/kubkon/zld/compare/v0.0.2...v0.0.3",
      "prerelease": false,
      "published_at": "2023-12-23T06:59:04Z",
      "html_url": "https://github.com/kubkon/bold/releases/tag/v0.0.3",
      "assets": [
        {
          "name": "zld-0.0.3-aarch64-macos.tar.xz",
          "url": "https://github.com/kubkon/bold/releases/download/v0.0.3/zld-0.0.3-aarch64-macos.tar.xz",
          "size": 684804,
          "content_type": "application/x-xz"
        },
        {
          "name": "zld-0.0.3-x86_64-linux-musl.tar.xz",
          "url": "https://github.com/kubkon/bold/releases/download/v0.0.3/zld-0.0.3-x86_64-linux-musl.tar.xz",
          "size": 2993576,
          "content_type": "application/x-xz"
        },
        {
          "name": "zld-0.0.3-x86_64-macos.tar.xz",
          "url": "https://github.com/kubkon/bold/releases/download/v0.0.3/zld-0.0.3-x86_64-macos.tar.xz",
          "size": 817444,
          "content_type": "application/x-xz"
        }
      ]
    },
    {
      "tag_name": "v0.0.2",
      "name": "zld 0.0.2",
      "body": "The major achievement of this release is in rewriting of the majority of the MachO linker in the spirit of data-oriented design which led to\r\n* significantly reduced link times to the point where, dare I say, we start to become competitive with `lld` and `ld64` - you can find some numbers below, and\r\n* reduced memory usage by avoiding unnecessary allocs, and instead re-parsing data when actually needed.\r\n\r\n## Some benchmarks\r\n\r\n`zld` refers to our linker as a standalone binary, `lld` to LLVM's linker, and `ld64` to Apple's linker. All in all, I should point out that we are still missing a number of optimisations in the linker such as cstring deduplication, compression of dynamic linker's relocations, and synthesising of the unwind info section, so this difference between us and other linkers will most likely shrink a little.\r\n\r\n### Results on M1Pro\r\n\r\n* linking `redis-server` binary\r\n\r\n```\r\n‚ùØ hyperfine ./zld ./lld ./ld64 --warmup 60\r\nBenchmark 1: ./zld\r\n  Time (mean ¬± œÉ):      35.6 ms ¬±   0.4 ms    [User: 35.9 ms, System: 10.4 ms]\r\n  Range (min ‚Ä¶ max):    34.8 ms ‚Ä¶  36.4 ms    79 runs\r\n \r\nBenchmark 2: ./lld\r\n  Time (mean ¬± œÉ):      49.2 ms ¬±   0.8 ms    [User: 42.6 ms, System: 17.6 ms]\r\n  Range (min ‚Ä¶ max):    48.0 ms ‚Ä¶  51.2 ms    59 runs\r\n \r\nBenchmark 3: ./ld64\r\n  Time (mean ¬± œÉ):      47.2 ms ¬±   0.5 ms    [User: 60.1 ms, System: 14.4 ms]\r\n  Range (min ‚Ä¶ max):    46.2 ms ‚Ä¶  48.1 ms    61 runs\r\n \r\nSummary\r\n  './zld' ran\r\n    1.32 ¬± 0.02 times faster than './ld64'\r\n    1.38 ¬± 0.03 times faster than './lld'\r\n```\r\n\r\n* linking Zig's `stage3` compiler\r\n\r\n```\r\n‚ùØ hyperfine ./zld ./lld ./ld64 --warmup 5\r\nBenchmark 1: ./zld\r\n  Time (mean ¬± œÉ):      1.934 s ¬±  0.012 s    [User: 2.870 s, System: 0.468 s]\r\n  Range (min ‚Ä¶ max):    1.923 s ‚Ä¶  1.962 s    10 runs\r\n \r\nBenchmark 2: ./lld\r\n  Time (mean ¬± œÉ):      1.153 s ¬±  0.014 s    [User: 1.289 s, System: 0.230 s]\r\n  Range (min ‚Ä¶ max):    1.141 s ‚Ä¶  1.179 s    10 runs\r\n \r\nBenchmark 3: ./ld64\r\n  Time (mean ¬± œÉ):      2.349 s ¬±  0.006 s    [User: 3.875 s, System: 0.218 s]\r\n  Range (min ‚Ä¶ max):    2.341 s ‚Ä¶  2.357 s    10 runs\r\n \r\nSummary\r\n  './lld' ran\r\n    1.68 ¬± 0.02 times faster than './zld'\r\n    2.04 ¬± 0.02 times faster than './ld64'\r\n```\r\n\r\n### Results on Intel i9\r\n\r\n* linking Zig's `stage3` compiler\r\n\r\n```\r\n‚ùØ hyperfine ./zld ./lld ./ld64 --warmup 5                                                                                                                                                                                          \r\nBenchmark 1: ./zld\r\n  Time (mean ¬± œÉ):      3.039 s ¬±  0.018 s    [User: 2.339 s, System: 0.671 s]\r\n  Range (min ‚Ä¶ max):    3.000 s ‚Ä¶  3.064 s    10 runs\r\n \r\nBenchmark 2: ./lld\r\n  Time (mean ¬± œÉ):      1.383 s ¬±  0.015 s    [User: 1.393 s, System: 0.483 s]\r\n  Range (min ‚Ä¶ max):    1.363 s ‚Ä¶  1.416 s    10 runs\r\n \r\nBenchmark 3: ./ld64\r\n  Time (mean ¬± œÉ):      2.090 s ¬±  0.018 s    [User: 3.000 s, System: 0.620 s]\r\n  Range (min ‚Ä¶ max):    2.066 s ‚Ä¶  2.126 s    10 runs\r\n \r\nSummary\r\n  './lld' ran\r\n    1.51 ¬± 0.02 times faster than './ld64'\r\n    2.20 ¬± 0.03 times faster than './zld'\r\n```\r\n\r\n## Detailed overview of major changes\r\n\r\n### No relocs/code pre-parsing per `Atom`\r\n\r\nPrior to this rewrite, we would preparse the code and relocs per each `Atom` aka a subsection of an input section per relocatable object file, and store the results on the heap. This is not only slow but also completely unnecessary. We can actually delay the work until we actually need it. This approach is now followed throughout.\r\n\r\n### Linker now follows standard stages\r\n\r\nLike `lld`, `mold` and `ld64`, we also implement linking in stages, e.g., first comes symbol resolution, then we parse input sections into atoms, we then do dead code stripping (if desired), then create synthetic atoms such GOT cells, then create thunks if required, etc. This significantly simplified the entire linker as we do a very specialised work per stage and no more.\r\nWe do not store any code or relocs per synthetic atoms\r\n\r\nInstead of generating the code and relocs per synthetic atoms (GOT, stubs, etc) we only track their numbers, VM addresses and targets, while we generate the code and relocate when writing to the final image. In fact, we do not even need to track the addresses beyond the start and size of each synthetic section. I will refactor this in the future also.\r\n\r\n### Thunks\r\n\r\nWhile at it, I also went ahead and implemented range extending thunks which mean we can now link larger programs on arm64 without erroring out in the linker. One word of explanation is that contrary to what the issue suggested, we extend jump range via thunks rather than branch islands. For those unfamiliar, both methods extend the range of jump for the given RISC ISA, however, thunks use the scratch register and a load to load unreachable target's address into the scratch register and branch via register. As such, a thunk is 12 bytes on arm64. Branch islands on the other hand are 4 bytes as they are simple bl #next_label instructions. Branch islands are thus short range extenders where in order to jump further in the file, we chain the jumps by jumping between islands until reaching the actual target.\r\n\r\n## What's Changed\r\n* macho: improve linking speed, reduce memory usage by @kubkon in https://github.com/kubkon/zld/pull/9\r\n* elf: simplify like macho linker by @kubkon in https://github.com/kubkon/zld/pull/10\r\n* fixes: stage3 the new default by @kubkon in https://github.com/kubkon/zld/pull/11\r\n\r\n\r\n**Full Changelog**: https://github.com/kubkon/zld/compare/v0.0.1...v0.0.2",
      "prerelease": false,
      "published_at": "2022-10-26T09:44:09Z",
      "html_url": "https://github.com/kubkon/bold/releases/tag/v0.0.2",
      "assets": [
        {
          "name": "zld-0.0.2-x86_64-macos.tar.xz",
          "url": "https://github.com/kubkon/bold/releases/download/v0.0.2/zld-0.0.2-x86_64-macos.tar.xz",
          "size": 401544,
          "content_type": "application/x-xz"
        },
        {
          "name": "zld-0.0.2-aarch64-macos.tar.xz",
          "url": "https://github.com/kubkon/bold/releases/download/v0.0.2/zld-0.0.2-aarch64-macos.tar.xz",
          "size": 329636,
          "content_type": "application/x-xz"
        }
      ]
    },
    {
      "tag_name": "v0.0.1",
      "name": "zld 0.0.1",
      "body": "While this linker is still widely incomplete, it is used as the default MachO linker in [Zig toolchain since 0.8.0 release](https://ziglang.org/download/0.8.0/release-notes.html#Self-Hosted-Linker). It should be pointed out that the two codebases do not share code in a simple way - I periodically backport changes/fixes between the two repos so that `zld` can be used effectively both as part of Zig and as a standalone linking driver.\r\n\r\nFor this reason, I have decided to cut first release now that I have cleaned up arguments parsing across linking drivers (Elf and MachO), and will be working on advancing Elf driver more.\r\n\r\n## What's Changed\r\n* coff: Add initial Coff support by @Pombal in https://github.com/kubkon/zld/pull/1\r\n* Update CI scripts to pull QEMU for Linux/ELF testing by @kubkon in https://github.com/kubkon/zld/pull/2\r\n* coff: Implement basic object parsing by @iddev5 in https://github.com/kubkon/zld/pull/4\r\n* Implement different zld drivers via symlinks and refactor usage/options per driver by @kubkon in https://github.com/kubkon/zld/pull/8\r\n\r\n## New Contributors\r\n* @Pombal made their first contribution in https://github.com/kubkon/zld/pull/1\r\n* @kubkon made their first contribution in https://github.com/kubkon/zld/pull/2\r\n* @iddev5 made their first contribution in https://github.com/kubkon/zld/pull/4\r\n\r\n**Full Changelog**: https://github.com/kubkon/zld/commits/v0.0.1",
      "prerelease": false,
      "published_at": "2022-07-26T18:19:56Z",
      "html_url": "https://github.com/kubkon/bold/releases/tag/v0.0.1",
      "assets": [
        {
          "name": "zld-0.0.1-aarch64-macos.tar.xz",
          "url": "https://github.com/kubkon/bold/releases/download/v0.0.1/zld-0.0.1-aarch64-macos.tar.xz",
          "size": 297264,
          "content_type": "application/x-xz"
        },
        {
          "name": "zld-0.0.1-x86_64-linux.tar.xz",
          "url": "https://github.com/kubkon/bold/releases/download/v0.0.1/zld-0.0.1-x86_64-linux.tar.xz",
          "size": 302340,
          "content_type": "application/x-xz"
        },
        {
          "name": "zld-0.0.1-x86_64-macos.tar.xz",
          "url": "https://github.com/kubkon/bold/releases/download/v0.0.1/zld-0.0.1-x86_64-macos.tar.xz",
          "size": 357836,
          "content_type": "application/x-xz"
        }
      ]
    }
  ],
  "owner_bio": "Systems programmer working on the Zed editor",
  "owner_company": "@zed-industries",
  "owner_location": "Warsaw, Poland",
  "owner_blog": "www.jakubkonka.com",
  "owner_twitter_username": null,
  "owner_followers": 852,
  "owner_following": 97,
  "owner_created_at": "2012-03-09T11:12:30Z",
  "license": "MIT",
  "category": "library"
}