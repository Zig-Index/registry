{
  "name": "passcay",
  "owner": "uzyn",
  "repo": "passcay",
  "description": "ðŸ¦ŽðŸ”‘ Secure & fast Passkey (WebAuthn) library for Zig",
  "type": "package",
  "topics": [
    "authentication",
    "passkey",
    "relying-party",
    "security",
    "webauthn",
    "zig",
    "zig-package",
    "ziglang"
  ],
  "stars": 26,
  "forks": 0,
  "watchers": 1,
  "updated_at": "2025-12-04T09:25:08Z",
  "dependencies": [
    {
      "name": "zbor",
      "url": "https://github.com/r4gus/zbor/archive/refs/tags/0.17.2.tar.gz",
      "hash": "zbor-0.17.0-kr-CoHIkAwCy2WhoS6MgwSvyQsLWzzNy6a7UTHqMPMmO"
    }
  ],
  "minimum_zig_version": "0.15.1",
  "readme": "# Passcay\n[![Tests](https://github.com/uzyn/passcay/actions/workflows/test.yml/badge.svg)](https://github.com/uzyn/passcay/actions/workflows/test.yml)\n\n![Passcay Logo](docs/passcay-logo.png)\n\n\n**Minimal**, **fast** and **secure** Passkey (WebAuthn) relying party (RP) library for Zig.\n\nZig version support:\n1. v2.x - Supports Zig latest stable v0.15\n2. v1.x - Supports Zig v0.14\n\n## Features\n\n- Passkey WebAuthn registration\n- Passkey WebAuthn authentication/verification (login)\n- Attestation-less passkey usage (privacy-preserving, does not affect security)\n- Cryptographic signature verification. Supports both ES256 & RS256, covering 100% of all Passkey authenticators today.\n- Secure challenge generation\n\n## Dependencies\n\nDynamically linked to operating system's OpenSSL for crypto verification.\n\nWorks on Linux and macOS. Not on Windows due to OpenSSL dependency.\n\n### Installation\n\nAdd `passcay` to your `build.zig.zon` dependencies:\n\n```zig\n.dependencies = .{\n    .passcay = .{\n        .url = \"https://github.com/uzyn/passcay/archive/main.tar.gz\",\n        // Optionally pin to a specific commit hash\n    },\n},\n```\n\nAnd update your `build.zig` to load `passcay`:\n\n```zig\nconst passcay = b.dependency(\"passcay\", .{\n    .optimize = optimize,\n    .target = target,\n});\nexe.root_module.addImport(\"passcay\", passcay.module(\"passcay\"));\n```\n\n## Build & Test\n\n```sh\nzig build\nzig build test --summary all\n```\n\n## Usage\n\n### Registration\n\n```zig\nconst passcay = @import(\"passcay\");\n\nconst input = passcay.register.RegVerifyInput{\n     .attestation_object = attestation_object,\n     .client_data_json = client_data_json,\n};\n\nconst expectations = passcay.register.RegVerifyExpectations{\n     .challenge = challenge,\n     .origin = \"https://example.com\",\n     .rp_id = \"example.com\",\n     .require_user_verification = true,\n};\n\nconst reg = try passcay.register.verify(allocator, input, expectations);\n\n// Save reg.credential_id, reg.public_key, and reg.sign_count\n// to database for authentication\n```\n\nStore the following in database for authentication:\n- `reg.credential_id`\n- `reg.public_key`\n- `reg.sign_count` (usually starts at 0)\n\n### Authentication\n\n```zig\nconst challenge = try passcay.challenge.generate(allocator);\n// Pass challenge to client-side for authentication\n\nconst input = passcay.auth.AuthVerifyInput{\n    .authenticator_data = authenticator_data,\n    .client_data_json = client_data_json,\n    .signature = signature,\n};\n\nconst expectations = passcay.auth.AuthVerifyExpectations{\n    .public_key = user_public_key, // Retrieve public_key from database, given credential_id from navigator.credentials.get\n    .challenge = challenge,\n    .origin = \"https://example.com\",\n    .rp_id = \"example.com\",\n    .require_user_verification = true,\n    .enable_sign_count_check = true,\n    .known_sign_count = stored_sign_count,\n};\n\nconst auth = try passcay.auth.verify(allocator, input, expectations);\n```\n\nUpdate the stored sign count with `auth.recommended_sign_count`:\n\n### Client-Side (JavaScript)\n\n```javascript\n// Registration\nconst regOptions = {\n    challenge: base64UrlDecode(challenge),\n    rp: {\n        name: \"Example\",\n        id: \"example.com\", // Must match your domain without protocol/port\n    },\n    user: { name: username },\n    pubKeyCredParams: [\n        { type: \"public-key\", alg: -7 },   // ES256 (Most widely supported)\n        { type: \"public-key\", alg: -257 }, // RS256\n    ],\n    authenticatorSelection: {\n        authenticatorAttachment: \"platform\",\n        userVerification: \"required\", // or \"preferred\"\n    },\n    attestation: \"none\", // Fast & privacy-preserving auth without security compromise\n};\n\nconst credential = await navigator.credentials.create({ publicKey: regOptions });\nconsole.log('Credential details:', credential);\n// Pass credential to server for verification: passcay.register.verify\n\n// Authentication\nconst authOptions = {\n  challenge: base64UrlDecode(challenge),\n  rpId: 'example.com',\n  userVerification: 'preferred',\n};\nconst assertion = await navigator.credentials.get({ publicKey: authOptions });\nconsole.log('Assertion details:', assertion);\n// Retrieve public_key from assertion_id that's returned\n// Pass assertion to server for verification: passcay.auth.verify\n```\n\n\n<details>\n\n<summary>JavaScript utils for base64url <-> ArrayBuffer</summary>\n\n```javascript\n// Convert base64url <-> ArrayBuffer\nfunction base64UrlToBuffer(b64url) {\n  const pad = '='.repeat((4 - (b64url.length % 4)) % 4);\n  const b64 = (b64url + pad).replace(/-/g, '+').replace(/_/g, '/');\n  const bin = atob(b64);\n  const arr = new Uint8Array(bin.length);\n  for (let i = 0; i < bin.length; i++) arr[i] = bin.charCodeAt(i);\n  return arr.buffer;\n}\nfunction bufferToBase64Url(buf) {\n  const bytes = new Uint8Array(buf);\n  let bin = '';\n  for (const b of bytes) bin += String.fromCharCode(b);\n  return btoa(bin).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n}\n```\n\n</details>\n\n## Docs\n\nReference implementations for integrating Passcay into your application:\n\n- `docs/register.md` - Registration flow with challenge generation\n- `docs/login.md` - Authentication flow with verification\n\n## See also\n\nFor passkey authenticator implementations and library for Zig, check out [Zig-Sec/keylib](https://github.com/Zig-Sec/keylib).\n\n\n ## Spec references\n\n- [W3C WebAuthn](https://www.w3.org/TR/webauthn/)\n- [FIDO2 Client to Authenticator Protocol (CTAP)](https://fidoalliance.org/specs/fido-v2.0-ps-20190130/fido-client-to-authenticator-protocol-v2.0-ps-20190130.html)\n\n## License\nThis project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.\n\nCopyright (c) 2025 [U-Zyn Chua](https://uzyn.com).\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/280505?u=0b437c7004bf969b7718fa223423a5ce09154f94&v=4",
  "releases": [
    {
      "tag_name": "2.0.0",
      "name": "2.0.0 - Zig 0.15 support",
      "body": "Supports latest stable Zig, v0.15. \r\n",
      "prerelease": false,
      "published_at": "2025-09-06T04:02:18Z",
      "html_url": "https://github.com/uzyn/passcay/releases/tag/2.0.0",
      "assets": []
    },
    {
      "tag_name": "1.0.0",
      "name": "1.0.0",
      "body": "Initial release\r\n\r\n* Compatible with Zig 0.14.",
      "prerelease": false,
      "published_at": "2025-05-04T08:02:51Z",
      "html_url": "https://github.com/uzyn/passcay/releases/tag/1.0.0",
      "assets": []
    }
  ],
  "owner_bio": "Open Web â‹… Security â‹… Zig â‹… Progressive Rock",
  "owner_company": null,
  "owner_location": "Singapore",
  "owner_blog": "https://uzyn.com",
  "owner_twitter_username": null,
  "owner_followers": 361,
  "owner_following": 62,
  "owner_created_at": "2010-05-18T16:06:18Z",
  "license": "MIT",
  "category": "security"
}