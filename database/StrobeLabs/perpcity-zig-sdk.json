{
  "name": "perpcity-zig-sdk",
  "owner": "StrobeLabs",
  "repo": "perpcity-zig-sdk",
  "description": "High-performance Zig SDK for PerpCity perpetual futures protocol. Built for HFT bots and latency-sensitive trading systems on Base.",
  "type": "package",
  "topics": [
    "base",
    "blockchain",
    "defi",
    "erc20",
    "ethereum",
    "evm",
    "hft",
    "perpetuals",
    "sdk",
    "trading"
  ],
  "stars": 1,
  "forks": 0,
  "watchers": 1,
  "updated_at": "2026-02-27T10:40:25Z",
  "dependencies": [
    {
      "name": "eth",
      "url": "git+https://github.com/StrobeLabs/eth.zig.git#v0.2.2",
      "hash": "eth_zig-0.2.2-efEm-kNdCQBcyYFAZG0FVkmPeN7lJkLLBDaTFp0T7lSD"
    }
  ],
  "readme": "# PerpCity Zig SDK\n\nHigh-performance, low-level Zig SDK for the PerpCity perpetual futures protocol on Base. Built for HFT bots and latency-sensitive trading systems.\n\n## Why Zig?\n\nThis SDK is designed for use cases where nanoseconds matter. Zig gives us:\n\n- **Zero runtime overhead** -- no GC, no hidden allocations, no async coloring\n- **Deterministic memory layout** -- cache-friendly structs with predictable performance\n- **Comptime ABI encoding** -- function selectors computed at compile time, zero runtime cost\n- **Direct hardware control** -- atomic nonce management, lock-free data structures\n\nIf you're building a trading bot in Python or TypeScript, use [perpcity-sdk](https://github.com/StrobeLabs/perpcity-sdk) or [perpcity-python-sdk](https://github.com/StrobeLabs/perpcity-python-sdk) instead. This SDK is for systems that need sub-millisecond transaction construction and direct EVM interaction with no abstraction tax.\n\n## Features\n\n- **Contract interaction** -- Read/write calls with comptime-computed selectors via [eth.zig](https://github.com/StrobeLabs/eth.zig)\n- **Position management** -- Open/close taker and maker positions, adjust margin and notional\n- **HFT nonce manager** -- Lock-free atomic nonce acquisition, no RPC round-trip per transaction\n- **Gas cache** -- Pre-computed gas limits and fee caching to skip `estimateGas` calls\n- **Transaction pipeline** -- Combines nonce manager + gas cache for fire-and-forget submission\n- **Multi-RPC failover** -- Automatic failover across multiple RPC endpoints with latency tracking\n- **State cache** -- Multi-layer caching (mark prices, perp configs) with configurable TTLs\n- **Pure math** -- Tick/price conversions, sqrt price math, liquidity calculations -- all in pure Zig with no external deps\n- **Event streaming** -- Subscription registry for on-chain event processing\n- **Position manager** -- Stop-loss, take-profit, and trailing stop triggers\n- **Latency observability** -- Rolling window latency tracking with p50/p95/p99 percentiles\n\n## Installation\n\nAdd to your `build.zig.zon`:\n\n```zig\n.dependencies = .{\n    .perpcity_sdk = .{\n        .url = \"git+https://github.com/StrobeLabs/perpcity-zig-sdk.git#<commit>\",\n    },\n},\n```\n\nThen in `build.zig`:\n\n```zig\nconst sdk_dep = b.dependency(\"perpcity_sdk\", .{ .target = target, .optimize = optimize });\nexe.root_module.addImport(\"perpcity_sdk\", sdk_dep.module(\"perpcity_sdk\"));\n```\n\nRequires **Zig 0.15.2**.\n\n## Quick Start\n\n```zig\nconst sdk = @import(\"perpcity_sdk\");\n\n// Initialize context\nvar ctx = sdk.context.PerpCityContext.init(\n    allocator,\n    \"https://your-rpc-url.com\",\n    private_key,\n    deployments,\n);\nctx.fixPointers();\ndefer ctx.deinit();\n\n// Approve USDC once at startup (max allowance)\ntry ctx.setupForTrading();\n\n// Open a 10x long taker position\nconst position = try sdk.perp_manager.openTakerPosition(&ctx, perp_id, .{\n    .margin = 1000.0,\n    .leverage = 10.0,\n    .is_long = true,\n    .unspecified_amount_limit = 0,\n});\n```\n\n## Architecture\n\n```\nPure math layer (no dependencies):\n  types, constants, conversions, liquidity, position, perp\n\nHFT infrastructure (no dependencies):\n  nonce, gas, tx_pipeline, state_cache, multi_rpc, connection,\n  latency, events, position_manager\n\nContract interaction (requires eth.zig):\n  context, approve, perp_manager, open_position\n\nABI definitions:\n  perp_manager_abi, erc20_abi, fees_abi, margin_ratios_abi, beacon_abi\n```\n\nThe pure math and HFT infrastructure layers have zero external dependencies and can be used standalone for off-chain calculations (mark price conversions, PnL estimation, liquidation checks) and trading infrastructure (nonce management, gas caching, latency tracking).\n\n## Development\n\n### Build\n\n```bash\nzig build\n```\n\n### Test\n\n```bash\n# Unit tests (pure math + HFT infrastructure, no network)\nzig build test\n\n# Integration tests (requires Anvil running locally)\nanvil &\nzig build integration-test\n```\n\n### Lint\n\n```bash\nzig fmt --check src/ tests/\n```\n\n## Environment Setup\n\nCreate a `.env.local` file:\n\n```env\n# Required for integration tests\nPRIVATE_KEY=your_private_key_here\nRPC_URL=https://your-rpc-url.com\n\n# Contract addresses (Base Sepolia)\nPERP_MANAGER_ADDRESS=0x...\nUSDC_ADDRESS=0x...\n```\n\n## License\n\nMIT\n\n## Links\n\n- [Perp City Documentation](https://docs.perpcity.io)\n- [Strobe Labs](https://strobelabs.io)\n- [TypeScript SDK](https://github.com/StrobeLabs/perpcity-sdk)\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/129107620?v=4",
  "releases": [],
  "owner_bio": "",
  "owner_location": null,
  "owner_blog": "https://strobe.org",
  "owner_twitter_username": null,
  "owner_created_at": "2023-03-27T18:30:44Z",
  "homepage": "https://docs.perp.city/zig-sdk",
  "license": "MIT",
  "category": "library"
}