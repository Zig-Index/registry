{
  "name": "aws-lambda-zig",
  "owner": "by-nir",
  "repo": "aws-lambda-zig",
  "description": "ğŸŸ  Write AWS Lambda functions in Zig programming language",
  "type": "package",
  "topics": [
    "aws",
    "zig",
    "cloud",
    "zig-package",
    "lambda",
    "server",
    "serverless"
  ],
  "stars": 19,
  "forks": 4,
  "watchers": 1,
  "updated_at": "2026-02-24T14:31:06Z",
  "minimum_zig_version": "0.15.0",
  "readme": "# AWS Lambda Runtime for Zig\n![Zig v0.15](https://img.shields.io/badge/Zig-v0.15-black?logo=zig&logoColor=F7A41D \"Zig v0.15\")\n[![MIT License](https://img.shields.io/github/license/by-nir/aws-lambda-zig)](/LICENSE)\n\nWrite _AWS Lambda_ functions in the Zig programming language to achieve blazing fast invocations and cold starts!\n\n[ğŸ£ Quick Start](#quick-start) Â·\n[ğŸ“’ Documentation](#documentation) Â·\n[ğŸ’½ Demos](#demos)\n\n## Benchmark\nUsing zig allows creating small and fast functions.<br />\nMinimal [Hello World demo](#hello-world) (arm64, 256 MiB, Amazon Linux 2023):\n\n- â„ï¸ `~11ms` cold start invocation duration\n- âš¡ `~1.5ms` warm invocation duration\n- ğŸ’¾ `12 MiB` max memory consumption\n- âš–ï¸ `0.36 MiB` function size (zip)\n\n## Features\n- [x] Runtime API\n- [ ] Extensions API\n- [ ] Telemetry API\n- [x] Response streaming\n- [x] CloudWatch & X-Ray integration\n- [ ] Lifecycle hooks\n- [ ] Dependency injection\n- [x] Build system target configuration\n- [ ] Managed build step\n- [ ] Testing utilities\n\n### Services Events\n_Feel free to open an issue for additional integrations, or better contribute a pull request._\n\n- [ ] Unified HTTP\n- [x] Lambda URLs\n- [ ] API Gateway\n- [ ] S3\n- [ ] SQS\n- [ ] SNS\n- [ ] DynamoDB\n- [ ] Data Firehose\n\n## Quick Start\n1. Add a dependency to your project (replace `VERSION` with the desired version tag):\n    ```console\n    zig fetch --save git+https://github.com/by-nir/aws-lambda-zig#VERSION\n    ```\n2. Configure the build script.\n3. Implement a handler function (either an event handler or a streaming handler).\n4. Build a handler executable for the preferred target architecture:\n    ```console\n    zig build --release -Darch=x86\n    zig build --release -Darch=arm\n    ```\n5. Archive the executable into a zip:\n    ```console\n    zip -qj lambda.zip zig-out/bin/bootstrap\n    ```\n4. Deploy the zip archive to a Lambda function:\n    - Configure it with _Amazon Linux 2023_ or other **OS-only runtime**.\n    - Use you prefered deployment method: console, CLI, SAM or any CI solution.\n\n### Build Script\n```zig\nconst std = @import(\"std\");\nconst lambda = @import(\"aws-lambda\");\n\npub fn build(b: *std.Build) void {\n    const optimize = b.standardOptimizeOption(.{\n        .preferred_optimize_mode = .ReleaseFast,\n    });\n\n    // Add an architecture confuration option and resolves a target query\n    const target = lambda.resolveTargetQuery(b, lambda.archOption(b));\n\n    // Import the runtime module\n    const runtime = b.dependency(\"aws-lambda\", .{}).module(\"lambda\");\n\n    // Create the handlerâ€™s module\n    const mod = b.createModule(.{\n        .target = target,\n        .optimize = optimize,\n        .root_source_file = b.path(\"src/main.zig\"),\n        .imports = &.{\n            .{ .name = \"aws-lambda\", .module = runtime },\n        },\n        // .link_libc = true, // Uncomment if glibc is required.\n        // .strip = true, // Uncomment if no stack traces are needed.\n    });\n\n    // Compile and executable\n    const exe = b.addExecutable(.{\n        .name = \"bootstrap\", // The executable name must be \"bootstrap\"!\n        .root_module = mod\n    });\n}\n```\n\n### Event Handler\n```zig\nconst lambda = @import(\"aws-lambda\");\n\n// Entry point for the Lambda function.\npub fn main() void {\n    // Bind the handler to the runtime:\n    lambda.handle(handler, .{});\n}\n\n// Eeach event is processed separetly the handler function.\n// The function must have the following signature:\nfn handler(\n    ctx: lambda.Context,    // Metadata and utilities\n    event: []const u8,      // Raw event payload (JSON)\n) ![]const u8 {\n    return \"Hello, world!\";\n}\n```\n\n## Documentation\n\n### Build\nThis library provides a runtime module that handles the Lambda lifecycle and communication with the execution environment.\nTo use it, follow the following requirements:\n    - Import the Lambda Runtime module this library provides and wrap a handler function with it.\n    - Build an executable named _bootstrap_ and archive it in a Zip file.\n    - Use _Amazon Linux 2023_ runtime.\n\n#### Managed Target\nAWS Lambda supports two architectures: _x86_64_ and _arm64_ based on _Graviton2_. In order to build the event handler correctly and to squeeze the best performance, the build target must be configured accordingly.\n\nThe mananged target resolver sets the optimal operating system, architecture and specific CPU supported features. Call `lambda.resolveTargetQuery(*std.Build, arch)` to resolve the target for the given architecture (either `.x86` or `.arm`).\n\nTo add a CLI configuration option call `lambda.archOption(*std.Build)` the following and pass the result to `lambda.resolveTargetQuery`.\nIt can then by set through `-Darch=x86` or `-Darch=arm` (defaults to _x86_ when to manualy used).\n\n#### Example Build Script\n```zig\nconst std = @import(\"std\");\nconst lambda = @import(\"aws-lambda\");\n\npub fn build(b: *std.Build) void {\n    const optimize = b.standardOptimizeOption(.{\n        .preferred_optimize_mode = .ReleaseFast,\n    });\n\n    // Add an architecture CLI option (or hard code either `.x86` or `.arm`)\n    const arch: lambda.Arch = lambda.archOption(b); \n\n    // Managed architecture target resolver\n    const target = lambda.resolveTargetQuery(b, arch);\n\n    // Import the runtime module\n    const runtime = b.dependency(\"aws-lambda\", .{}).module(\"lambda\");\n\n    // Create the handlerâ€™s module\n    const mod = b.createModule(.{\n        .target = target,\n        .optimize = optimize,\n        .root_source_file = b.path(\"src/main.zig\"),\n        .imports = &.{\n            .{ .name = \"aws-lambda\", .module = runtime },\n        },\n        // .link_libc = true, // Uncomment if glibc is required.\n        // .strip = true, // Uncomment if no stack traces are needed.\n    });\n\n    // Compile and executable\n    const exe = b.addExecutable(.{\n        .name = \"bootstrap\", // The executable name must be \"bootstrap\"!\n        .root_module = mod\n    });\n    b.installArtifact(exe);\n}\n```\n\n### Event Handler\nThe event handler is the entry point for the Lambda function.\n\nThe library provides a runtime that handles the event lifecycle and communication with the Lambdaâ€™s execution environment. With it, you can focus on imlementing only the meaningful part of processing and responding to the event.\n\nSince the library manages the lifecycle, it expects the handler to have a specific signature. _Note that [response streaming](#response-streaming) has a dedicated lifecycle and handler signature._\n\n```zig\nconst lambda = @import(\"aws-lambda\");\n\n// Entry point for the Lambda function.\n// Eeach event is processed separetly the handler function.\npub fn main() void {\n    // Bind the handler to the runtime:\n    lambda.handle(handlerSync, .{});\n\n    // Alternatively, for asynchronous handlers:\n    lambda.handleAsync(handlerAsync, .{});\n}\n\nfn handlerSync(\n    ctx: lambda.Context,    // Metadata and utilities\n    event: []const u8,      // Raw event payload (JSON)\n) ![]const u8 {\n    // Process the `event` payload and return a response payload.\n    return switch(payload.len) {\n        0 => \"Empty payload.\",\n        else => event,\n    };\n}\n\nfn handlerAsync(\n    ctx: lambda.Context,    // Metadata and utilities\n    event: []const u8,      // Raw event payload (JSON)\n) !void {\n    // Process the `event` payload...\n}\n```\n\n#### Errors & Logging\nWhen a handler returns an error, the runtime will log it to _CloudWatch_ and return an error response to the client.\n\nThe runtime exposes a static logging function that can be used to manually log messages to _CloudWatch_. The function follows Zigâ€™s standard logging conventions.\n\n```zig\nconst lambda = @import(\"aws-lambda\");\n\nlambda.log.err(\"This error is logged to {s}.\", .{\"CloudWatch\"});\n```\n\n> [!WARNING]\n> In release mode only _error_ level is preserved, other levels are removed at compile time. This behavior may be overriden at build.\n\n#### Handler Context\nThe handler signature includes the parameter `ctx: lambda.Context`, it provides metadata and utilities to assist with the processing the event.\n\nThe following sections describe the context...\n\n#### Memory Allocation\nSince the runtime manages the function and invocation lifecycle, it also owns the memory. The _handler context_ provides two allocators:\n\n| Allocator | Behavior |\n| --------- | -------- |\n| `ctx.gpa` | You own the memory and **must deallocate it** by the end of the invocation. |\n| `ctx.arena` | The memory is tied to the invocationâ€™s lifetime. The runtime will deallocate it on your behalf after the invocation resolves. |\n\n> [!NOTE]\n> While `ctx.gpa` may be used to persist data and services between invocations, for such cases consider using [dependency injection](#dependency-injection) or [extensions](#extensions).\n\n#### Environment Variables\nThe functionsâ€™ environment variables are mapped by the _handler context_, they can be accesed using the `env(key)` method:\n\n```zig\nconst foo_value = ctx.env(\"FOO_KEY\") orelse \"some_default_value\";\n```\n\n#### Invocation Metadata\nPer-invocation metadata is provided by the _handler context_ `ctx.request` field. It contains the following fields:\n\n| Field | Type | Description |\n| ----- | ---- | ----------- |\n| `request_id` | `[]const u8` | AWS request ID associated with the request. |\n| `xray_trace` | `[]const u8` | X-Ray tracing id. |\n| `invoked_arn` | `[]const u8` | The function ARN requested. It may be different in **each invoke** that executes the same version. |\n| `deadline_ms` | `u64` | Function execution deadline counted in milliseconds since the _Unix epoch_. |\n| `client_context` | `[]const u8` | Information about the client application and device when invoked through the AWS Mobile SDK. |\n| `cognito_identity` | `[]const u8` | Information about the Amazon Cognito identity provider when invoked through the AWS Mobile SDK. |\n\n#### Configuration Metadata\nStatic config metadata is provided by the _handler context_ `ctx.config` field. It contains the following fields:\n\n| Field | Type | Description |\n| ----- | ---- | ----------- |\n| `aws_region` | `[]const u8` | AWS Region where the Lambda function is executed. |\n| `aws_access_id` | `[]const u8` | Access key obtained from the function's [execution role](https://docs.aws.amazon.com/lambda/latest/dg/lambda-intro-execution-role.html). |\n| `aws_access_secret` | `[]const u8` | Access key obtained from the function's [execution role](https://docs.aws.amazon.com/lambda/latest/dg/lambda-intro-execution-role.html). |\n| `aws_session_token` | `[]const u8` | Access key obtained from the function's [execution role](https://docs.aws.amazon.com/lambda/latest/dg/lambda-intro-execution-role.html). |\n| `func_name` | `[]const u8` | Name of the function. |\n| `func_version` | `[]const u8` | Version of the function being executed. |\n| `func_size` | `u16` | Amount of memory available to the function in MB. |\n| `func_init` | `InitType` | Initialization type of the function. |\n| `func_handler` | `[]const u8` | Handler location configured on the function. |\n| `log_group` | `[]const u8` | Name of the Amazon CloudWatch Logs group for the function. |\n| `log_stream` | `[]const u8` | Name of the Amazon CloudWatch Logs stream for the function. |\n\n#### Force Termination\nRequest the Lambda execution crash the runtime **AFTER** returning the response to the client.\n\n```zig\nctx.forceTerminateAfterResponse();\n```\n\n> [!WARNING]\n> Use with caution! Only use this method when you assume the function wonâ€™t behave\n> as expected in the following invocation.\n\n### Response Streaming\nThe runtime supports streaming responses to the client; though implementing a streaming handler differs from the standard handler.\n\n```zig\nconst lambda = @import(\"aws-lambda\");\n\n// Entry point for the Lambda function.\npub fn main() void {\n    // Bind the handler to the runtime:\n    lambda.handleStream(handler, .{});\n}\n\n// Eeach event is processed separetly the handler function.\n// The function must have the following signature:\nfn handler(\n    ctx: lambda.Context,    // Metadata and utilities\n    event: []const u8,      // Raw event payload (JSON)\n    stream: lambda.Stream,  // Stream delegate\n) !void {\n    // Start streaming the response for a given content type.\n    const writer = try stream.open(\"text/event-stream\");\n\n    // Append to the streaming buffer.\n    try writer.writeAll(\"data: Message\");\n    try writer.print(\" number {d}\\n\\n\", .{1});\n\n    // Send the buffer to the client.\n    try stream.publish();\n\n    // Wait for half a second.\n    std.Thread.sleep(500_000_000);\n\n    // Send additional content to the client.\n    try writer.writeAll(\"data: Message number 2\\n\\n\");\n    try writer.writeAll(\"data: Message number 3\\n\\n\");\n    try stream.publish();\n\n    // Optionally close the stream.\n    // Even after ending the response we can still do more work in the handler.\n    try stream.close();\n}\n```\n\n#### Stream Delegate\n\nInstead of resolving payload by returning from the handler we use the _stream delegate_.\n\nOnce a content type is known, the handler should call `stream.open(content_type)` to open the response stream. After the stream is opened you may incrementally append to the response.\n_Closing the stream is not required._\n\n| Method | Description |\n| ------ | ----------- |\n| `stream.open(content_type)` | Opens the response stream for a provided HTTP content type. |\n| `stream.openPrint(content_type, fmt, args)` | Opens the response stream for a provided HTTP content type and initial body payload. The user MUST format the payload with proper HTTP semantics (or use a Event Encoder). |\n| `stream.publish()` | Send the partial response buffer to the client. |\n| `stream.close()` | Optionally conclude the response stream while continuing to process the event. |\n\n### Lifecycle Hooks\nNot yet implemented.\n\n### Dependency Injection\nNot yet implemented.\n\n## Extensions\nNot yet implemented.\n\n## Demos\n\n### Hello World\nReturns a short message.\n\n```console\nzig build demo:hello --release -Darch=ARCH_OPTION\n```\n\n### Debug\nğŸ›‘ _Deploy with caution! May expose sensitive data to the public._\n\nReturns the raw payload as-is:\n```console\nzig build demo:echo --release -Darch=ARCH_OPTION\n```\n\nReturns the functionâ€™s metadata, environment variables and the eventâ€™s raw payload:\n```console\nzig build demo:debug --release -Darch=ARCH_OPTION\n```\n\n### Errors\nImmediatly returns an error; the runtime logs the error to _CloudWatch_:\n```console\nzig build demo:fail --release -Darch=ARCH_OPTION\n```\n\nReturns an output larger than the Lambda limit; the runtime logs an error to _CloudWatch_:\n```console\nzig build demo:oversize --release -Darch=ARCH_OPTION\n```\n\nForce the Lambda function instance the terminate after returning a response:\n```console\nzig build demo:terminate --release -Darch=ARCH_OPTION\n```\n\nğŸ›‘ Use with caution!\n_Only use this method when you assume the function wonâ€™t behave as expected in the following invocation._\n\n### Response Streaming\nğŸ‘‰ _Be sure to configure the Lambda function with URL enabled and RESPONSE_STREAM invoke mode._\n\nStream a response to the client and continue execution of the response conclusion:\n```console\nzig build demo:stream --release -Darch=ARCH_OPTION\n```\n\n### Lambda URLs\nUse Lambda URLs buffered invoke to serve dynamic web pages:\n```console\nzig build demo:url --release -Darch=ARCH_OPTION\n```\n\nUse Lambda URLs response streaming to serve dynamic updates:\n```console\nzig build demo:url_stream --release -Darch=ARCH_OPTION\n```\n\n## License\nThe author and contributors are not responsible for any issues or damages caused\nby the use of this software, part of it, or its derivatives. See [LICENSE](/LICENSE)\nfor the complete terms of use.\n\n**_AWS Lambda Runtime for Zig_ is not an official _Amazon Web Services_ software,\nnor is it affiliated with _Amazon Web Services, Inc_.**",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/109542784?v=4",
  "releases": [
    {
      "tag_name": "0.4.0",
      "name": "0.4.0",
      "body": "- Upgraded to **Zig 0.15.0**.\r\n\r\n## [BREAKING] Response Streaming\r\n- Use the standard writer for response streaming.\r\n- See _stream_ and _url_stream_ demos for updated usage.",
      "prerelease": false,
      "published_at": "2025-08-19T17:44:17Z",
      "html_url": "https://github.com/by-nir/aws-lambda-zig/releases/tag/0.4.0",
      "assets": []
    },
    {
      "tag_name": "0.3.1",
      "name": "0.3.1",
      "body": "- Update the package manifest for **Zig 0.14** (thanks @vytskalt)\r\n- Update the docs for Zig 0.14 best practices.\r\n- Add the package version to the user agent.\r\n- Warn when building a handler executable without explicit `-Darch` option.",
      "prerelease": false,
      "published_at": "2025-07-06T14:35:28Z",
      "html_url": "https://github.com/by-nir/aws-lambda-zig/releases/tag/0.3.1",
      "assets": []
    },
    {
      "tag_name": "0.3.0",
      "name": "",
      "body": "## Lambda URLs\r\nAdded event decoders & encoders for both buffered and streaming Lambda URLs.\r\nCheck out the demos to learn how to use `lambda.url`.\r\n\r\n## Response Streaming\r\n\r\n### **[BREAKING]** Formatting convention\r\nReplaced `stream.writeFmt(Â·Â·Â·)` and `stream.publishFmt(Â·Â·Â·)` with a conventional `stream.writer()`.\r\n\r\n### **[BREAKING]** Removed `stream.closeWithError`\r\nIt seems that while the HTTP payloads are sent correctly to the Runtime API â€“ the behavior is ignored.\r\nI'm removing it until further investigation so I could implement it with confidence.\r\n\r\nIn the meanwhile, the same can be achieved by combining `lambda.log(Â·Â·Â·)`, `stream.publish(Â·Â·Â·)`, `stream.close()`, and the new `ctx.forceTerminateAfterResponse()`.\r\n\r\n### Open With Payload\r\nAllows opening the stream and sending an initial body payload to the Runtime API in a single call.\r\nThis is mostly for supporting Lambdaâ€™s HTTP Integration protocol.\r\n\r\n```zig\r\nconst raw_http = \"6\\r\\nHello!\\r\\n\";\r\ntry stream.openWith(\"text/plain\", raw_http);\r\n```\r\n\r\n> [!WARNING]\r\n> Note that the payload is raw, as it merely appends the bytes to the HTTP request â€“ itâ€™s up to the user to format it with proper semantics (or use one of the new Event Encoders).\r\n\r\n## Misc\r\n- Support for scheduling termination of the function instance until after the handler provides a response to the client:\r\n    ```zig\r\n    ctx.forceTerminateAfterResponse();\r\n    ```\r\n- Add GPA allocator leak detection in debug mode.",
      "prerelease": false,
      "published_at": "2024-12-11T04:38:02Z",
      "html_url": "https://github.com/by-nir/aws-lambda-zig/releases/tag/0.3.0",
      "assets": []
    },
    {
      "tag_name": "0.2.2",
      "name": "",
      "body": "- Support async invocation",
      "prerelease": false,
      "published_at": "2024-12-08T00:18:02Z",
      "html_url": "https://github.com/by-nir/aws-lambda-zig/releases/tag/0.2.2",
      "assets": []
    },
    {
      "tag_name": "0.2.1",
      "name": "",
      "body": "- Merge handler context into a single struct",
      "prerelease": false,
      "published_at": "2024-12-07T19:23:45Z",
      "html_url": "https://github.com/by-nir/aws-lambda-zig/releases/tag/0.2.1",
      "assets": []
    },
    {
      "tag_name": "0.1.2",
      "name": "",
      "body": "",
      "prerelease": false,
      "published_at": "2024-12-06T03:13:07Z",
      "html_url": "https://github.com/by-nir/aws-lambda-zig/releases/tag/0.1.2",
      "assets": []
    }
  ],
  "owner_bio": "",
  "owner_location": null,
  "owner_blog": "https://bynir.com",
  "owner_twitter_username": "nirlah",
  "owner_created_at": "2022-07-18T16:35:01Z",
  "license": "MIT",
  "category": "library"
}