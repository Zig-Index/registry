{
  "name": "flags.zig",
  "owner": "atisans",
  "repo": "flags.zig",
  "description": "A type-safe command-line argument parser for Zig",
  "type": "package",
  "topics": [
    "zig-package"
  ],
  "stars": 0,
  "forks": 0,
  "watchers": 0,
  "updated_at": "2026-02-23T07:08:33Z",
  "minimum_zig_version": "0.15.2",
  "readme": "# flags.zig\n\nA type-safe command-line argument parser for Zig. Taking inspiration from **Rust clap**, and **TigerBeetle's flags** implementation, it lets you define flags using a struct or union(enum) and parses command-line arguments into it.\n\n- Zero runtime overhead — parsing happens at comptime where possible\n- Type safety — catch errors at compile time, not runtime\n- Idiomatic Zig — works with the grain of the language\n- Zero external dependencies\n\n## Features\n\n- [x] Multiple flag types (bool, string, int, float, enum)\n- [x] Struct-based argument definition\n- [x] Default values via struct fields\n- [x] Error handling for invalid/unknown flags\n- [x] Positional arguments support\n- [x] Subcommands via `union(enum)`\n- [x] Slice support (multiple values per flag)\n- [x] Two parsing patterns: repeated, comma-separated\n\n## Installation\n\n### 1. Fetch the library\n\n```bash\nzig fetch --save git+https://github.com/atisans/flags.zig\n```\n\n### 2. Add to your `build.zig`\n\n```zig\nconst flags = b.dependency(\"flags\", .{});\nexe.root_module.addImport(\"flags\", flags.module(\"flags\"));\n```\n\n## Quick Start\n\n```zig\nconst std = @import(\"std\");\nconst flags = @import(\"flags\");\n\npub fn main() !void {\n    var gpa = std.heap.GeneralPurposeAllocator(.{}){};\n    defer _ = gpa.deinit();\n    const allocator = gpa.allocator();\n\n    // Define flags as a struct with slice support\n    const Args = struct {\n        name: []const u8 = \"world\",\n        age: u32 = 25,\n        active: bool = false,\n        \n        // Multiple values supported\n        files: []const []const u8 = &[_][]const u8{},\n        ports: []u16 = &[_]u16{8080},\n    };\n\n    // Parse and use\n    const args = try std.process.argsAlloc(allocator);\n    defer std.process.argsFree(allocator, args);\n\n    const parsed = try flags.parse(allocator, args, Args);\n\n    std.debug.print(\"Hello {s}! Age: {d}, Active: {}\\n\", .{\n        parsed.name, parsed.age, parsed.active\n    });\n}\n```\n\n```bash\n./program --name=alice --age=30 --active\n\n# Slices accept repeated flags or comma-separated values\n./program --files=a.txt --files=b.txt --files=c.txt\n./program --files=a.txt,b.txt,c.txt\n```\n\n## Advanced Features\n\n### Help Documentation\n\nRunning with `-h` or `--help` prints your help text.\n\nIf no help declaration is found, it prints \"No help available\" with a hint to declare one.\n\nHelp text is defined by declaring `pub const help` on your struct or union type:\n\n```zig\nconst Args = struct {\n    verbose: bool = false,\n    port: u16 = 8080,\n    \n    pub const help = \n        \\\\Options:\n        \\\\  --verbose    Enable verbose output (default: false)\n        \\\\  --port       Port to listen on (default: 8080)\n    ;\n};\n```\n\n### Subcommands\n\nGit-style subcommands using `union(enum)`:\n\n```zig\nconst CLI = union(enum) {\n    start: struct {\n        host: []const u8 = \"localhost\",\n        port: u16 = 8080,\n    },\n    stop: struct {\n        force: bool = false,\n    },\n    \n    pub const help = \n        \\\\ Server management CLI\n        \\\\ commands:\n        \\\\  start       Start the server\n        \\\\      --host     Hostname to bind to (default: localhost)\n        \\\\      --port     Port to listen on (default: 8080)\n        \\\\  stop        Stop the server\n        \\\\      --force    Force stop (default: false)\n    ;\n};\n\nconst cli = try flags.parse(allocator, args, CLI);\nswitch (cli) {\n    .start => |s| startServer(s.host, s.port),\n    .stop => |s| stopServer(s.force),\n}\n```\n\n### Global Flags with Subcommands\n\nCombine top-level flags with subcommands using a struct that contains a `union(enum)`:\n\n```zig\nconst CLI = struct {\n    verbose: bool = false,\n    config: ?[]const u8 = null,\n    command: union(enum) {\n        serve: struct {\n            host: []const u8 = \"0.0.0.0\",\n            port: u16 = 8080,\n        },\n        migrate: struct {\n            dry_run: bool = false,\n        },\n    },\n};\n\nconst cli = try flags.parse(allocator, args, CLI);\nif (cli.verbose) std.debug.print(\"verbose mode\\n\", .{});\nswitch (cli.command) {\n    .serve => |s| startServer(s.host, s.port),\n    .migrate => |m| runMigration(m.dry_run),\n}\n```\n\n```bash\nprog --verbose serve --port=3000\nprog --config=app.toml migrate --dry_run\n```\n\n### Positional Arguments\n\nUse the `@\"--\"` marker to separate flags from positional arguments:\n\n```zig\nconst Args = struct {\n    verbose: bool = false,\n    @\"--\": void,\n    input: []const u8,\n    output: []const u8 = \"output.txt\",\n};\n\n// Usage: program --verbose input.txt output.txt\n```\n\n## Best Practices\n\n### DO\n\n1. **Use struct defaults** for common values\n2. **Define help** via `pub const help` declarations\n3. **Use unions** for mutually exclusive subcommands\n4. **Leverage enums** for constrained choices\n5. **Use optional types** for truly optional flags\n\n### DON'T\n\n1. **Don't** skip error handling\n2. **Don't** make all flags optional (defeats type safety)\n3. **Don't** use runtime string manipulation for help\n\n## Parser vs Application Boundary\n\nThe parser handles syntax; the application handles semantics. Keep these in application code:\n\n- Date/time interpretation (`--due=tomorrow`)\n- File I/O, encryption, network calls\n- Interactive prompts and terminal I/O\n- Output formatting and display\n- Command aliases (`t` → `task`)\n- Configuration file loading\n\nThe parser extracts typed values. What you do with them is your business.\n\n## Not planned\n\n- **No short flags** — only long flags (`--flag=value`), except `-h` for help\n- **No custom types** — only built-in types and enums\n- **No nested slices** — slices of slices not supported (`[][]T`)\n- **Equals syntax only** — use `--name=value` not `--name value`\n\n## Credits\nThis library draws significant inspiration from two exceptional projects:\n\n- [TigerBeetle's flags](https://github.com/tigerbeetle/tigerbeetle) — struct-based flag definitions and zero-cost abstractions\n- [Rust clap](https://github.com/clap-rs/clap) — declarative API design and derive-style patterns\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/197046972?v=4",
  "releases": [
    {
      "tag_name": "0.1.1",
      "name": "Release 0.1.1",
      "body": "- Modify parse_subcommand to handle void type as subcommand variant\r\n- Add tests for void subcommand usage\r\n- Update README to document void support instead of struct {} workaround\r\n\r\ncloses https://github.com/atisans/flags.zig/issues/6\r\n",
      "prerelease": false,
      "published_at": "2026-02-23T07:12:03Z",
      "html_url": "https://github.com/atisans/flags.zig/releases/tag/0.1.1",
      "assets": []
    },
    {
      "tag_name": "0.1.0",
      "name": "Release 0.1.0",
      "body": "## Highlights\r\nThis release removed **auto-generated help**, adds **slice support** for repeated flags, removes **short flag support**, and improved **subcommand handling**.\r\n\r\n### Breaking Changes\r\n- **Slice support**: Added `allocator` parameter to `parse()` for slice allocation\r\n- **Short flags removed**: Use `--v` (long flag with short name) instead of `-v`\r\n- **Private error set**: Error set is now private (and inferred from code)\r\n- **Boolean values**: Removed support for `1/0` as boolean values - use `true/false` only\r\n- **Generated help**: use `pub const help = \"\"` in your type instead\r\n\r\n### New Features\r\n- **Slice support**: \r\n  - Repeated flags: `--files=a.txt --files=b.txt`\r\n  - Comma-separated: `--files=a.txt,b.txt`\r\n- **Subcommands**: Improved subcommand handling with union(enum) field pattern\r\n  - also can combine global values and subcommands together \r\n\r\n### Bug Fixes\r\n- `print_help` now returns `error.HelpRequested` instead of `noreturn`\r\n- Fixed `print_help` exit behavior\r\n- Fixed positional argument parsing in subcommands\r\n\r\n### Refactoring\r\n- Removed explicit Error set in favor of compiler-inferred errors\r\n- Various internal function extractions and simplifications\r\n- Added license and readme to build.zig.zon",
      "prerelease": false,
      "published_at": "2026-02-23T05:46:35Z",
      "html_url": "https://github.com/atisans/flags.zig/releases/tag/0.1.0",
      "assets": []
    }
  ],
  "owner_bio": "In the shadow of God - move fast, break things",
  "owner_location": null,
  "owner_blog": null,
  "owner_twitter_username": null,
  "owner_created_at": "2025-01-30T07:24:18Z",
  "license": "MIT",
  "category": "library"
}