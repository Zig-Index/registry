{
  "name": "kd-tree",
  "owner": "travisstaloch",
  "repo": "kd-tree",
  "description": "A k-d tree implementation in zig",
  "type": "project",
  "topics": [
    "zig-library",
    "zig-package"
  ],
  "stars": 6,
  "forks": 1,
  "watchers": 1,
  "updated_at": "2025-07-22T18:46:02Z",
  "readme": "# About\n\nA [k-d tree](https://en.wikipedia.org/wiki/K-d_tree) implementation ported from https://github.com/gishi523/kd-tree\n\n# API\n\n* Floats only.  Accepts arrays or homogenous structures of any zig float type\n* Search for single nearest neighbor\n* Search for k nearest neighbors\n* Search for all neighbors within radius\n* Visit all nodes with user provided context\n* Validate all nodes\n\n# Usage\n\nThis package is meant to be consumed with the [zig build system](https://ziglang.org/learn/build-system) and imported as a module.\n\n```console\n# latest commit\nzig fetch --save=kdtree git+https://github.com/travisstaloch/kd-tree\n```\n```console\n# specific commit\nzig fetch --save=kdtree https://github.com/travisstaloch/kd-tree/archive/<commit-hash>.tar.gz\n```\n```zig\n// build.zig\nexe.root_module.addImport(\"kdtree\", b.dependency(\"kdtree\", .{}).module(\"kdtree\"));\n```\n```zig\n// myapp.zig\nconst kdtree = @import(\"kdtree\");\n```\n\n### Example test\n\nThis code is from [src/root.zig](src/root.zig) where there are also other similar tests.  And there is [demo raylib app](src/main.zig) too.\n\n```zig\ntest \"basic usage\" {\n    const MyPoint = struct { x: f32, y: f32 };\n    const my_points: [8]MyPoint = .{\n        .{ .x = 2.7175806e0, .y = 2.5162528e0 },\n        .{ .x = 3.0172718e0, .y = 1.1619115e-1 },\n        .{ .x = 3.9525537e0, .y = 2.9364395e-1 },\n        .{ .x = 7.0706835e0, .y = 7.9604106e0 },\n        .{ .x = 2.6941679e0, .y = 1.9487169 },\n        .{ .x = 3.7812352e0, .y = 8.3156556e-1 },\n        .{ .x = 7.326651e-1, .y = 1.2251115e0 },\n        .{ .x = 8.401675e-1, .y = 2.9021428e0 },\n    };\n\n    // TODO: const KdTree = @import(\"kdtree\").KdTree;\n    const Tree = KdTree(MyPoint, .{});\n    var tree = try Tree.init(std.testing.allocator, &my_points);\n    defer tree.deinit(std.testing.allocator);\n\n    // validate\n    try tree.validate();\n\n    // visit\n    var count: u8 = 0;\n    tree.visit(.{}, &count, struct {\n        fn visit(_: Tree, _: Tree.Node, c: *u8) bool {\n            c.* += 1;\n            return true;\n        }\n    }.visit);\n    try testing.expectEqual(my_points.len, count);\n\n    const target: MyPoint = .{ .x = 5, .y = 5 };\n\n    // nearest\n    const nearest = tree.nnSearch(target);\n    try testing.expectEqual(0, nearest.nearest_point_idx);\n\n    // knn\n    var knn_result: [2]u32 = undefined;\n    try tree.knnSearch(std.testing.allocator, target, &knn_result);\n    try testing.expectEqual(0, knn_result[0]);\n    try testing.expectEqual(3, knn_result[1]);\n\n    // radius\n    var radius_search_results = std.ArrayList(u32).init(std.testing.allocator);\n    defer radius_search_results.deinit();\n    const radius = 4;\n    try tree.radiusSearch(target, radius, &radius_search_results);\n    try testing.expectEqual(3, radius_search_results.items.len);\n}\n```\n\n# Demo\n```console\nzig build run\n```\n![Screenshot](https://github.com/user-attachments/assets/ec4a26a9-2c92-4f72-aaed-08c20c296a47)\nred is the target point and radius.  green + outlined is the closest neighbor.  green are the 5 nearest neighbors.  and blue are within the search radius.\n\nIf you want to run the demo app, you'll need to either have raylib available on your system or create a deps/raylib folder and put libraylib.a there along with include/{raylib.h,raymath.h,rlgl.h}\n\n# Bench\n```console\n$ ./bench.sh unstable\n...\n++ zig build -Doptimize=ReleaseFast\n++ zig-out/bin/bench unstable\ninit time 56.034ms\nvalidate time 215.078us\nnnSearch time 9.28us\nknnSearch time 838.642us\nradiusSearch time 4.85us\ntime 57.105ms size 100000\n$ ./bench.sh median_of_medians\n...\n++ zig build -Doptimize=ReleaseFast\n++ zig-out/bin/bench\ninit time 15.637ms\nvalidate time 250.359us\nnnSearch time 9.29us\nknnSearch time 861.343us\nradiusSearch time 5.34us\ntime 16.767ms size 100000\n```",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/1562827?v=4",
  "releases": [],
  "owner_company": null,
  "owner_location": null,
  "owner_blog": null,
  "owner_twitter_username": null,
  "owner_followers": 68,
  "owner_following": 32,
  "owner_created_at": "2012-03-22T00:22:23Z",
  "license": "MIT",
  "category": "library"
}