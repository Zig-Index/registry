{
  "name": "simdjzon-rpc",
  "owner": "travisstaloch",
  "repo": "simdjzon-rpc",
  "description": "A fast json-rpc implementation in Zig based on simdjzon",
  "type": "project",
  "topics": [
    "zig-package"
  ],
  "stars": 7,
  "forks": 0,
  "watchers": 1,
  "updated_at": "2025-10-21T18:30:24Z",
  "dependencies": [
    {
      "name": "simdjzon",
      "url": "git+https://github.com/travisstaloch/simdjzon#3a3e31f3beed48b1f7bab89abb5e9eba35e70c61",
      "hash": "simdjzon-0.0.1-7uNSgJybBQBQEGuian5c_fNW2E0y5ZSxCThZ6j75LlIp"
    }
  ],
  "readme": "# simdjzon-rpc\n\n:warning: still in early development. :warning:\n\nA fast json-rpc implementation in [Zig](https://ziglang.org/) based on [simdjzon](https://github.com/travisstaloch/simdjzon)\n\nAlso includes a very competitive [std-json-rpc](src/std-json.zig) implementation.  See benchmarks below.\n\n# usage\n```console\n$ zig fetch --save=simdjzon-rpc git+https://github.com/travisstaloch/simdjzon-rpc#main\n```\n```zig\n// build.zig\n    // simdjzon-rpc\n    const simdjzon_rpc_dep = b.dependency(\n        \"simdjzon-rpc\",\n        .{ .target = target, .optimize = optimize },\n    );\n    my_exe.addModule(\"simdjzon-rpc\", simdjzon_rpc_dep.module());\n    // std-json-rpc\n    const stdjson_rpc_dep = b.dependency(\n        \"std-json-rpc\",\n        .{ .target = target, .optimize = optimize },\n    );\n    my_exe.addModule(\"std-json-rpc\", stdjson_rpc_dep.module());\n```\n```zig\n// main.zig\nconst simjzon_rpc = @import(\"simdjzon-rpc\");\nconst stdjson_rpc = @import(\"std-json-rpc\");\n```\n\n# [examples](examples/)\n\n# Echo Server\n\n### run and test http-echo-server\n```console\n$ zig build http-echo-server\n\nlistening on http://127.0.0.1:4000\n```\nin another terminal\n```console\n$ cd examples\n$ python3 test.py\nok\n```\n\n# Benchmarks\n\nThere are 2 benchmark scripts [bench](examples/bench.zig) and [bench-std-json](examples/bench-std-json.zig).  They are very similar.  Their engines each have 4 rpc methods and randomly choose an input json from [common](src/common.zig) 'test_cases_2'.\n\nThe following output can be reproduced by running [bench.sh](scripts/bench.sh).\n\n### benchmark related build steps and options\n```console\n$ zig build -h\n#...\nSteps:\n  #...\n  bench                        Run bench\n  bench-std-json               Run bench-std-json\n\n#...\nProject-Specific Options:\n  #...\n  -Dbench-iterations=[int]     number times for benchmark to loop. default 100.\n  -Dbench-iterations=[int]     number times for benchmark to loop. default 100.\n  -Dbench-summary=[bool]       whether or not to show bench timing and memory usage summary. default false.\n  -Dbench-use-gpa=[bool]       whether or not to use zig's general purpose allocator.  use std.heap.c_allocator when false.  default false.\n  -Dbench-validate=[bool]      whether to check that rpc output matches expected output.  default false.\n...\n```\n### single benchmark summary\n```console\n$ zig build bench -Dbench-iterations=30000 -Doptimize=ReleaseFast -Dbench-summary -Dbench-use-gpa=false\n\n(simdjzon-rpc)\n reqs=30000\n time=16.066ms\nreq/s=1867.2K\n\n-- CountingAllocator summary -- \ntotal_bytes_allocated   134.2MiB\nbytes_in_use            17.8KiB\nmax_bytes_in_use        23.6KiB\nallocs                  19.06us/13 (avg 1.466us)\nfrees                   430ns/7 (avg 61ns)\nshrinks                 622.401us/30000 (avg 20ns)\nexpands                 2.355ms/59997 (avg 39ns)\ntotal_time              2.997ms\n\n```\n\n### benchmark results\n\nBelow simdjzon-rpc to std-json-rpc with these options\n\n| build mode               | allocator        |\n| ------------------------ | ---------------- |\n| ReleaseFast, ReleaseSafe | Gpa, C allocator |\n\nThese benchmarks happen at the end of [scripts/bench.sh](scripts/bench.sh).\n\nTLDR: simdjzon-rpc is between 6%-27% faster in 3/4 cases and 5.5% slower with the ReleaseSafe/Gpa combo.  simdjzon-rpc runs 27% faster with a ReleaseFast, C Allocator combo.\n\n\n#### ReleaseFast, C allocator\n\n```console\n++ zig build -Doptimize=ReleaseFast -Dbench-use-gpa=false -Dbench-iterations=30000\n++ ../poop/zig-out/bin/poop -d 2000 zig-out/bin/bench-std-json zig-out/bin/bench\nBenchmark 1 (93 runs): zig-out/bin/bench-std-json\n  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta\n  wall_time          21.2ms Â±  293us    20.8ms â€¦ 22.4ms          3 ( 3%)        0%\n  peak_rss           1.53MB Â± 61.6KB    1.44MB â€¦ 1.57MB          0 ( 0%)        0%\n  cpu_cycles         95.0M  Â±  906K     93.7M  â€¦ 98.4M           3 ( 3%)        0%\n  instructions        274M  Â± 31.0K      274M  â€¦  274M           2 ( 2%)        0%\n  cache_references    240K  Â±  109K      185K  â€¦  747K          14 (15%)        0%\n  cache_misses       6.10K  Â±  436      5.66K  â€¦ 9.10K           2 ( 2%)        0%\n  branch_misses       153K  Â± 2.25K      149K  â€¦  162K           2 ( 2%)        0%\nBenchmark 2 (131 runs): zig-out/bin/bench\n  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta\n  wall_time          15.3ms Â±  348us    15.0ms â€¦ 16.8ms          9 ( 7%)        âš¡- 27.8% Â±  0.4%\n  peak_rss           1.44MB Â± 25.2KB    1.31MB â€¦ 1.44MB          5 ( 4%)        âš¡-  6.1% Â±  0.8%\n  cpu_cycles         67.6M  Â±  594K     66.9M  â€¦ 69.9M          10 ( 8%)        âš¡- 28.9% Â±  0.2%\n  instructions        180M  Â± 36.5K      180M  â€¦  180M           3 ( 2%)        âš¡- 34.4% Â±  0.0%\n  cache_references   38.9K  Â± 54.7K     21.8K  â€¦  406K          18 (14%)        âš¡- 83.8% Â±  9.1%\n  cache_misses       5.58K  Â±  191      5.23K  â€¦ 6.35K           2 ( 2%)        âš¡-  8.5% Â±  1.4%\n  branch_misses      56.5K  Â±  526      55.5K  â€¦ 59.3K           4 ( 3%)        âš¡- 63.0% Â±  0.3%\n\n```\n\n\n#### ReleaseFast, Gpa\n```console\n++ zig build -Doptimize=ReleaseFast -Dbench-use-gpa -Dbench-iterations=30000\n++ ../poop/zig-out/bin/poop -d 2000 zig-out/bin/bench-std-json zig-out/bin/bench\nBenchmark 1 (70 runs): zig-out/bin/bench-std-json\n  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta\n  wall_time          28.9ms Â±  346us    28.4ms â€¦ 30.2ms          3 ( 4%)        0%\n  peak_rss           1.84MB Â±    0      1.84MB â€¦ 1.84MB          0 ( 0%)        0%\n  cpu_cycles          129M  Â±  877K      127M  â€¦  131M           0 ( 0%)        0%\n  instructions        319M  Â± 74.8K      319M  â€¦  319M           3 ( 4%)        0%\n  cache_references    634K  Â±  110K      561K  â€¦ 1.46M           4 ( 6%)        0%\n  cache_misses       6.90K  Â±  739      5.87K  â€¦ 10.0K           4 ( 6%)        0%\n  branch_misses       159K  Â± 2.70K      155K  â€¦  164K           0 ( 0%)        0%\nBenchmark 2 (75 runs): zig-out/bin/bench\n  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta\n  wall_time          26.7ms Â±  292us    26.2ms â€¦ 27.7ms          3 ( 4%)        âš¡-  7.5% Â±  0.4%\n  peak_rss           1.70MB Â±    0      1.70MB â€¦ 1.70MB          0 ( 0%)        âš¡-  7.1% Â±  0.0%\n  cpu_cycles          119M  Â± 1.03M      118M  â€¦  122M           3 ( 4%)        âš¡-  7.5% Â±  0.2%\n  instructions        246M  Â± 94.8K      246M  â€¦  246M           4 ( 5%)        âš¡- 22.9% Â±  0.0%\n  cache_references    318K  Â±  157K      149K  â€¦ 1.08M           2 ( 3%)        âš¡- 49.8% Â±  7.0%\n  cache_misses       5.89K  Â±  320      5.44K  â€¦ 7.10K           5 ( 7%)        âš¡- 14.6% Â±  2.7%\n  branch_misses      58.6K  Â± 3.50K     57.0K  â€¦ 87.7K           2 ( 3%)        âš¡- 63.2% Â±  0.6%\n\n```\n\n\n#### ReleaseSafe, C allocator\n```console\n++ zig build -Doptimize=ReleaseSafe -Dbench-use-gpa=false -Dbench-iterations=30000\n++ ../poop/zig-out/bin/poop -d 2000 zig-out/bin/bench-std-json zig-out/bin/bench\nBenchmark 1 (73 runs): zig-out/bin/bench-std-json\n  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta\n  wall_time          26.9ms Â±  332us    26.3ms â€¦ 28.3ms          6 ( 8%)        0%\n  peak_rss           1.57MB Â± 37.7KB    1.44MB â€¦ 1.70MB          6 ( 8%)        0%\n  cpu_cycles          121M  Â±  873K      119M  â€¦  124M           2 ( 3%)        0%\n  instructions        367M  Â± 29.2K      367M  â€¦  368M           1 ( 1%)        0%\n  cache_references   1.06M  Â± 66.0K      997K  â€¦ 1.38M           5 ( 7%)        0%\n  cache_misses       6.33K  Â±  323      5.78K  â€¦ 7.01K           0 ( 0%)        0%\n  branch_misses       141K  Â± 1.96K      137K  â€¦  147K           0 ( 0%)        0%\nBenchmark 2 (80 runs): zig-out/bin/bench\n  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta\n  wall_time          25.2ms Â±  366us    24.8ms â€¦ 27.0ms          5 ( 6%)        âš¡-  6.2% Â±  0.4%\n  peak_rss           1.57MB Â±    0      1.57MB â€¦ 1.57MB          0 ( 0%)          +  0.2% Â±  0.5%\n  cpu_cycles          113M  Â±  650K      113M  â€¦  116M           3 ( 4%)        âš¡-  6.4% Â±  0.2%\n  instructions        291M  Â± 27.8K      291M  â€¦  291M           2 ( 3%)        âš¡- 20.9% Â±  0.0%\n  cache_references    370K  Â± 98.0K      323K  â€¦ 1.06M           9 (11%)        âš¡- 65.2% Â±  2.5%\n  cache_misses       6.00K  Â±  365      5.35K  â€¦ 6.84K           0 ( 0%)        âš¡-  5.2% Â±  1.7%\n  branch_misses      61.5K  Â±  991      60.6K  â€¦ 66.7K           5 ( 6%)        âš¡- 56.6% Â±  0.3%\n```\n\n#### ReleaseSafe, Gpa\n```console\n++ zig build -Doptimize=ReleaseSafe -Dbench-use-gpa -Dbench-iterations=30000\n++ ../poop/zig-out/bin/poop -d 2000 zig-out/bin/bench-std-json zig-out/bin/bench\nBenchmark 1 (52 runs): zig-out/bin/bench-std-json\n  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta\n  wall_time          38.6ms Â±  580us    38.1ms â€¦ 41.1ms          8 (15%)        0%\n  peak_rss           1.93MB Â± 57.3KB    1.84MB â€¦ 1.97MB         13 (25%)        0%\n  cpu_cycles          174M  Â±  655K      172M  â€¦  176M           3 ( 6%)        0%\n  instructions        448M  Â± 53.6K      448M  â€¦  448M           2 ( 4%)        0%\n  cache_references   1.92M  Â±  458K     1.58M  â€¦ 4.00M           6 (12%)        0%\n  cache_misses       8.34K  Â±  890      6.89K  â€¦ 10.9K           2 ( 4%)        0%\n  branch_misses       223K  Â± 4.00K      214K  â€¦  234K           0 ( 0%)        0%\nBenchmark 2 (50 runs): zig-out/bin/bench\n  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta\n  wall_time          40.7ms Â±  407us    40.2ms â€¦ 42.0ms          3 ( 6%)        ðŸ’©+  5.4% Â±  0.5%\n  peak_rss           1.97MB Â±    0      1.97MB â€¦ 1.97MB          0 ( 0%)          +  1.7% Â±  0.8%\n  cpu_cycles          184M  Â± 1.52M      182M  â€¦  190M           3 ( 6%)        ðŸ’©+  5.9% Â±  0.3%\n  instructions        404M  Â± 74.7K      404M  â€¦  404M           4 ( 8%)        âš¡-  9.9% Â±  0.0%\n  cache_references    978K  Â±  272K      721K  â€¦ 2.19M           3 ( 6%)        âš¡- 49.1% Â±  7.7%\n  cache_misses       7.27K  Â±  592      6.42K  â€¦ 9.18K           2 ( 4%)        âš¡- 12.8% Â±  3.6%\n  branch_misses      90.7K  Â± 4.30K     79.9K  â€¦  104K           6 (12%)        âš¡- 59.3% Â±  0.7%\n\n```\n\n\n# notes\n\n* adapted from [ucall](https://github.com/unum-cloud/ucall)\n* [json-rpc spec](https://www.jsonrpc.org/specification)\n* related [zig-json-rpc](https://github.com/candrewlee14/zig-json-rpc/)\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/1562827?v=4",
  "releases": [],
  "owner_company": null,
  "owner_location": null,
  "owner_blog": null,
  "owner_twitter_username": null,
  "owner_followers": 68,
  "owner_following": 32,
  "owner_created_at": "2012-03-22T00:22:23Z",
  "license": "MIT",
  "category": "library"
}