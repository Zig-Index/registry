{
  "name": "cooklang-zig",
  "owner": "caiocdcs",
  "repo": "cooklang-zig",
  "description": "A cooklang (https://cooklang.org/) implementation in zig",
  "type": "package",
  "topics": [
    "cooklang",
    "zig",
    "zig-package"
  ],
  "stars": 0,
  "forks": 0,
  "watchers": 0,
  "updated_at": "2025-09-17T13:06:21Z",
  "dependencies": [
    {
      "name": "example",
      "url": "https://example.com/foo.tar.gz",
      "hash": "..."
    }
  ],
  "minimum_zig_version": "0.15.1",
  "readme": "# CookLang Parser for Zig\n\nA complete implementation of the [CookLang specification](https://cooklang.org/docs/spec/) written in Zig 0.15.\n\n## Features\n\nThis parser implements the full CookLang specification including:\n\n- **Ingredients**: `@ingredient{quantity%units}` syntax with support for fractions, numbers, and text quantities\n- **Cookware**: `#cookware{quantity}` syntax for kitchen equipment\n- **Timers**: `~timer{quantity%units}` and `~{quantity%units}` syntax for timing instructions\n- **Comments**: Line comments (`--`) and block comments (`[- -]`)\n- **Metadata**: YAML front matter support for recipe metadata\n- **Steps**: Automatic paragraph-based step separation\n- **Unicode Support**: Proper handling of Unicode punctuation and whitespace\n- **Fraction Parsing**: Automatic conversion of fractions like `1/2` to decimal values\n\n## Usage\n\n### As a Library\n\n```zig\nconst std = @import(\"std\");\nconst cooklang = @import(\"cooklang_zig\");\n\npub fn main() !void {\n    var gpa = std.heap.GeneralPurposeAllocator(.{}){};\n    defer _ = gpa.deinit();\n    const allocator = gpa.allocator();\n\n    const recipe_text =\n        \\\\---\n        \\\\title: Simple Pasta\n        \\\\servings: 2\n        \\\\---\n        \\\\\n        \\\\Boil @water{4%cups} in a #large pot{}.\n        \\\\Add @pasta{200%g} and cook for ~{10%minutes}.\n    ;\n\n    var recipe = try cooklang.parseRecipe(recipe_text, allocator);\n    defer recipe.deinit();\n\n    // Access metadata\n    if (recipe.metadata.get(\"title\")) |title| {\n        std.debug.print(\"Recipe: {s}\\n\", .{title});\n    }\n\n    // Access steps and components\n    for (recipe.steps.items) |step| {\n        for (step.items) |component| {\n            switch (component.type) {\n                .ingredient => {\n                    std.debug.print(\"Ingredient: {s}\\n\", .{component.name.?});\n                },\n                .cookware => {\n                    std.debug.print(\"Cookware: {s}\\n\", .{component.name.?});\n                },\n                .timer => {\n                    std.debug.print(\"Timer: {any}\\n\", .{component.quantity});\n                },\n                .text => {\n                    // Regular text content\n                },\n            }\n        }\n    }\n}\n```\n\n### Command Line Tool\n\n```bash\n# Build the project\njust build\n\n# Build and run the demo\njust demo\n\n# Parse a CookLang file (human-readable output)\njust parse recipe.cook\n\n# Parse with different output formats\njust parse-json recipe.cook         # JSON output\njust parse-md recipe.cook           # Markdown output\n\n# Run unit tests\njust test\n\n# Run canonical tests\njust test-parser\n\n# Run specific canonical test\njust test-parser-single testBasicDirection\n\n# List all available tests\njust list\n\n# Format code\njust fmt\n```\n\n## API Reference\n\n### Core Types\n\n- `Recipe`: Main container with steps and metadata\n- `Step`: Array of components representing a cooking step\n- `Component`: Individual element (text, ingredient, cookware, timer)\n- `ComponentType`: Enum of component types\n- `Quantity`: Union type for numeric or text quantities\n\n### Main Functions\n\n- `parseRecipe(text: []const u8, allocator: Allocator) !Recipe`: Parse CookLang text into a Recipe struct\n\n## CLI Usage\n\nThe compiled binary provides a comprehensive command-line interface:\n\n```bash\n# Parse any .cook file (default human-readable format)\ncooklang_zig recipe.cook\n\n# Parse with specific output formats\ncooklang_zig recipe.cook --format human       # Human-readable (default)\ncooklang_zig recipe.cook --format json        # JSON output\ncooklang_zig recipe.cook --format markdown    # Markdown output\n\n# Short format flag\ncooklang_zig recipe.cook -f json              # Same as --format json\ncooklang_zig recipe.cook -f markdown          # Same as --format markdown\n\n# Example with actual recipe files\ncooklang_zig recipes/guacamole.cook           # Human-readable output\ncooklang_zig recipes/guacamole.cook -f json   # JSON output\ncooklang_zig recipes/guacamole.cook -f markdown # Markdown output\n\n# Run demo\ncooklang_zig demo\n\n# Test commands\ncooklang_zig test                             # Run all canonical tests\ncooklang_zig test testBasicDirection          # Run specific test\ncooklang_zig list                             # List available tests\n\n# Help\ncooklang_zig help                             # Show usage information\n```\n\n**Supported Output Formats:**\n- `human` - Human-readable format with ingredients, cookware, and step-by-step instructions (default)\n- `json` - Structured JSON output for programmatic use\n- `markdown` - Markdown format suitable for documentation and rendering\n\n### Output Examples\n\n**Human Format (default):**\n```\n=== METADATA ===\ntitle: Scrambled Eggs\nservings: 2\nprep time: 2 minutes\n\n=== STEPS ===\nStep 1:\n  TEXT: \"Crack \"\n  INGREDIENT: eggs (3)\n  TEXT: \" into a \"\n  COOKWARE: bowl (quantity: 1)\n  TEXT: \".\"\n```\n\n**JSON Format:**\n```json\n{\n  \"metadata\": {\n    \"title\": \"Scrambled Eggs\",\n    \"servings\": \"2\"\n  },\n  \"steps\": [\n    [\n      {\"type\": \"text\", \"value\": \"Crack \"},\n      {\"type\": \"ingredient\", \"name\": \"eggs\", \"quantity\": 3}\n    ]\n  ]\n}\n```\n\n**Ingredients Format:**\n```\nINGREDIENTS:\n- eggs (3)\n- milk (2 tbsp)\n- salt (1 pinch)\n```\n\n**Steps Format:**\n```\n1. Crack eggs (3) into a bowl.\n2. Add milk (2 tbsp) and salt (1 pinch).\n3. Whisk until well combined.\n```\n\n## Canonical Test Compliance\n\nThis implementation includes **64 comprehensive canonical tests** covering the full [CookLang specification](https://github.com/cooklang/spec/blob/main/tests/canonical.yaml), ensuring robust parsing and compatibility.\n\n### Test Results: COMPREHENSIVE TEST SUITE\n\n**Implemented canonical tests:**\n- `testBasicDirection` - Basic text parsing\n- `testComments` - Comment handling (`--` syntax)\n- `testDirectionWithIngredient` - Complex ingredient parsing with quantities and units\n- `testFractions` - Fraction conversion (`1/2` â†’ 0.5)\n- `testFractionsLike` - Invalid fraction handling (`01/2` â†’ \"01/2\")\n- `testEquipmentOneWord` - Single-word cookware parsing\n- `testTimerInteger` - Timer parsing with numeric values\n- `testMetadata` - YAML front matter parsing\n- `testIngredientNoUnits` - Ingredients without specified quantities\n- `testMultiWordIngredient` - Multi-word ingredient names (`@hot chilli{3}`)\n- `testMultiLineDirections` - Multiple steps separated by empty lines\n- `testIngredientWithEmoji` - Unicode character support (`@ðŸ§‚`)\n- `testSingleWordTimer` - Named timers without quantities\n- `testInvalidSingleWordIngredient` - Invalid syntax handling\n\n### Running Tests\n\n```bash\n# Run all canonical tests\njust test-parser\n\n# Run specific test\njust test-parser-single testBasicDirection\n\n# List all available tests\njust list\n\n# Run unit tests\njust test\n```\n\n## Building\n\n### Requirements\n- Zig 0.15 or later\n- `just` command runner ([installation guide](https://github.com/casey/just#installation))\n\n### Build Instructions\n\n```bash\ngit clone <repository>\ncd cooklang-zig\n\n# Build the project\njust build\n\n# Build with optimizations\njust build-fast\n\n# Install globally (optional)\njust install\n```\n\n### Alternative: Direct Zig Build\n\nIf you prefer not to use `just`, you can still use Zig directly:\n\n```bash\nzig build                    # Build project\nzig build run -- demo       # Run demo\nzig build run -- test       # Run tests\n```\n\n## Sample Files\n\nThe repository includes sample `.cook` files for testing:\n\n- `recipes/guacamole.cook` - Classic guacamole recipe with multiple ingredients\n- `recipes/neapolitan-pizza.cook` - Complex pizza recipe with timers and equipment\n\nTry parsing them:\n```bash\njust parse recipes/guacamole.cook\njust parse-json recipes/guacamole.cook\n```\n\n## Examples\n\n### Basic Ingredients\n```cook\nAdd @salt and @pepper{} to taste.\n```\n\n### With Quantities\n```cook\nMix @flour{200%g} with @water{150%ml}.\n```\n\n### Fractions\n```cook\nAdd @milk{1/2%cup} to the mixture.\n```\n\n### Cookware and Timers\n```cook\nHeat #large skillet{} and cook for ~{5%minutes}.\n```\n\n### Complete Recipe\n```cook\n---\ntitle: Scrambled Eggs\nservings: 2\nprep time: 5 minutes\n---\n\nCrack @eggs{3} into a bowl and whisk.\n\nHeat @butter{1%tbsp} in a #non-stick pan{} over medium heat.\n\nPour in eggs and cook for ~{2%minutes}, stirring constantly.\n\nSeason with @salt and @pepper{} to taste.\n```\n\n## License\n\nThis project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.\n\n### MIT License Summary\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED.\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/8338516?v=4",
  "releases": [],
  "owner_bio": "â˜• Java dev exploring Rust ðŸ¦€, Zig âš¡, and dabbling in AI \r\nAlways building, always learning and always having fun",
  "owner_company": null,
  "owner_location": "Lisbon",
  "owner_blog": "https://caiocdcs.github.io",
  "owner_twitter_username": null,
  "owner_followers": 4,
  "owner_following": 3,
  "owner_created_at": "2014-08-02T16:34:25Z",
  "license": "MIT",
  "category": "library"
}