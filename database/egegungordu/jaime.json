{
  "name": "jaime",
  "owner": "egegungordu",
  "repo": "jaime",
  "description": "A fast, lightweight Japanese IME engine for Zig projects that converts romaji to hiragana, kanji, and full-width characters. Supports Google 日本語入力-style input patterns with an easy-to-use API.",
  "type": "package",
  "topics": [
    "hiragana",
    "ime",
    "input-method-engine",
    "kanji",
    "romaji",
    "text-conversion",
    "transliteration",
    "zig",
    "zig-package"
  ],
  "stars": 3,
  "forks": 0,
  "watchers": 1,
  "updated_at": "2025-11-05T02:09:00Z",
  "minimum_zig_version": "0.13.0",
  "readme": "# Jaime\n\nA headless Japanese IME (Input Method Editor) engine for Zig projects that provides:\n\n- Romaji to hiragana/katakana conversion\n\n  eiennni → えいえんに\n\n- Full-width character conversion\n\n  abc123 → ａｂｃ１２３\n\n- Dictionary-based word conversion\n\n  かんじ → 漢字\n\n- Built-in cursor and buffer management\n\nBased on Google 日本語入力 behavior.\n\n<table>\n<tr>\n<td>\n\nOn the **terminal** with libvaxis\n\n[View repository](https://github.com/egegungordu/ja-ime-terminal-demo)\n\n<img src=\".github/assets/term-demo.gif\" width=\"400\" alt=\"Terminal demo\">\n\n</td>\n<td>\n\nOn the **web** with webassembly\n\n[Online demo](https://jaime-wasm.pages.dev/)\n\n<img src=\".github/assets/web-demo.gif\" width=\"400\" alt=\"Web demo\">\n\n</td>\n</tr>\n</table>\n\n## Zig Version\n\nThe minimum Zig version required is 0.13.0.\n\n## Licensing Information\n\nThis project includes the **IPADIC dictionary**, which is provided under the license terms stated in the accompanying `COPYING` file. The IPADIC license imposes additional restrictions and requirements on its usage and redistribution. If your application cannot comply with the terms of the IPADIC license, consider using the `ime_core` module with a custom dictionary implementation instead.\n\n## Integrating jaime into your Zig Project\n\nYou can add jaime as a dependency in your `build.zig.zon` file in two ways:\n\n### Development Version\n\n```bash\n# Get the latest development version from main branch\nzig fetch --save git+https://github.com/egegungordu/jaime\n```\n\n### Release Version\n\n```bash\n# Get a specific release version (replace x.y.z with desired version)\nzig fetch --save https://github.com/egegungordu/jaime/archive/refs/tags/vx.y.z.tar.gz\n```\n\nThen instantiate the dependency in your `build.zig`:\n\n```zig\nconst jaime = b.dependency(\"jaime\", .{});\nexe.root_module.addImport(\"kana\", jaime.module(\"kana\"));         // For simple kana conversion\nexe.root_module.addImport(\"ime_core\", jaime.module(\"ime_core\")); // For IME without dictionary\nexe.root_module.addImport(\"ime_ipadic\", jaime.module(\"ime_ipadic\")); // For IME with IPADIC dictionary\n```\n\n## Usage\n\nThe library provides three modules for different use cases:\n\n### 1. Kana Module - Simple Conversions\n\nFor simple romaji to hiragana conversions without IME functionality:\n\n```zig\nconst kana = @import(\"kana\");\n\n// Using a provided buffer (no allocations)\nvar buf: [100]u8 = undefined;\nconst result = try kana.convertBuf(&buf, \"konnnichiha\");\ntry std.testing.expectEqualStrings(\"こんにちは\", result);\n\n// Using an allocator (returns owned slice)\nconst result2 = try kana.convert(allocator, \"konnnichiha\");\ndefer allocator.free(result2);\ntry std.testing.expectEqualStrings(\"こんにちは\", result2);\n```\n\n### 2. IME IPADIC Module - Full Featured IME\n\nFor applications that want to use the full-featured IME with the IPADIC dictionary:\n\n```zig\nconst ime_ipadic = @import(\"ime_ipadic\");\n\n// Using owned buffer (with allocator)\nvar ime = ime_ipadic.Ime(.owned).init(allocator);\ndefer ime.deinit();\n\n// Using borrowed buffer (fixed size, no allocations)\nvar buf: [100]u8 = undefined;\nvar ime = ime_ipadic.Ime(.borrowed).init(&buf);\n\n// Common IME operations\nconst result = try ime.insert(\"k\");\nconst result2 = try ime.insert(\"o\");\nconst result3 = try ime.insert(\"n\");\ntry std.testing.expectEqualStrings(\"こん\", ime.input.buf.items());\n\n// Dictionary Matches\nif (ime.getMatches()) |matches| {\n    // Get suggested conversions from the dictionary\n    // Returns []WordEntry containing possible word matches\n}\ntry ime.applyMatch();    // Apply the best dictionary match to the current input\n\n// Cursor Movement and Editing\nime.moveCursorBack(1);   // Move cursor left n positions\nime.moveCursorForward(1);// Move cursor right n positions\ntry ime.insert(\"y\");     // Insert at cursor position\nime.clear();             // Clear the input buffer\ntry ime.deleteBack();    // Delete one character before cursor\ntry ime.deleteForward(); // Delete one character after cursor\n```\n\n> [!WARNING]  \n> The IPADIC dictionary is subject to its own license terms. If you need to use a different dictionary or want to avoid IPADIC's license requirements, use the `ime_core` module with your own dictionary implementation.\n\n### 3. IME Core Module - Custom Dictionary\n\nFor applications that want to use IME functionality with their own dictionary implementation:\n\n```zig\nconst ime_core = @import(\"ime_core\");\n\n// Create your own dictionary loader that implements the required interface\nconst MyDictLoader = struct {\n    pub fn loadDictionary(allocator: std.mem.Allocator) !Dictionary {\n        // Your dictionary loading logic here\n    }\n\n    pub fn freeDictionary(dict: *Dictionary) void {\n        // Your dictionary cleanup logic here\n    }\n};\n\n// Use the IME with your custom dictionary\nvar ime = ime_core.Ime(MyDictLoader).init(allocator);\ndefer ime.deinit();\n```\n\n## WebAssembly Bindings\n\nFor web applications, you can build the WebAssembly bindings:\n\n```bash\n# Build the WebAssembly library\nzig build\n```\n\nThe WebAssembly library uses the IPADIC dictionary by default. For a complete example of how to use the WebAssembly bindings in a web application, check out the [web example](examples/web/index.js).\n\nThe WebAssembly library provides the following functions:\n\n```javascript\n// Initialize the IME\ninit();\n\n// Get pointer to input buffer for writing input text\ngetInputBufferPointer();\n\n// Insert text at current position\n// length: number of bytes to read from input buffer\ninsert(length);\n\n// Get information about the last insertion\ngetDeletedCodepoints(); // Number of codepoints deleted\ngetInsertedTextLength(); // Length of inserted text in bytes\ngetInsertedTextPointer(); // Pointer to inserted text\n\n// Cursor movement and editing\ndeleteBack(); // Delete character before cursor\ndeleteForward(); // Delete character after cursor\nmoveCursorBack(n); // Move cursor back n positions\nmoveCursorForward(n); // Move cursor forward n positions\n```\n\nExample usage in JavaScript:\n\n```javascript\n// Initialize\ninit();\n\n// Get input buffer\nconst inputPtr = getInputBufferPointer();\nconst inputBuffer = new Uint8Array(memory.buffer, inputPtr, 64);\n\n// Write and insert characters one by one\nconst text = \"ka\";\nfor (const char of text) {\n  // Write single character to buffer\n  const bytes = new TextEncoder().encode(char);\n  inputBuffer.set(bytes);\n\n  // Insert and get result\n  insert(bytes.length);\n\n  // Get the inserted text\n  const insertedLength = getInsertedTextLength();\n  const insertedPtr = getInsertedTextPointer();\n  const insertedText = new TextDecoder().decode(\n    new Uint8Array(memory.buffer, insertedPtr, insertedLength)\n  );\n\n  // Check if any characters were deleted\n  const deletedCount = getDeletedCodepoints();\n\n  console.log({\n    inserted: insertedText,\n    deleted: deletedCount,\n  });\n}\n// Final result is \"か\"\n```\n\n## Testing\n\nTo run the test suite:\n\n```bash\nzig build test --summary all\n```\n\n## Features\n\n- Romaji to hiragana/full-width character conversion based on Google 日本語入力 mapping\n  - Basic hiragana (あ、い、う、え、お、か、き、く...)\n    - a -> あ\n    - ka -> か\n  - Small hiragana (ゃ、ゅ、ょ...)\n    - xya -> や\n    - li -> ぃ\n  - Sokuon (っ)\n    - tte -> って\n  - Full-width characters\n    - k -> ｋ\n    - 1 -> １\n  - Punctuation\n    - . -> 。\n    - ? -> ？\n    - [ -> 「\n\n## Contributing\n\nContributions are welcome! Please feel free to open an issue or submit a Pull Request.\n\n## Acknowledgments\n\n- Based on [Google 日本語入力](https://www.google.co.jp/ime/) transliteration mappings\n- [mozc](https://github.com/google/mozc) - Google's open source Japanese Input Method Editor, which provided valuable insights for IME implementation\n- The following projects were used as a reference for the codebase structure:\n  - [chipz - 8-bit emulator in zig](https://github.com/floooh/chipz)\n  - [zg - Unicode text processing for zig](https://codeberg.org/atman/zg)\n\n## Further Reading & References\n\nFor those interested in the data structures and algorithms used in this project, or looking to implement similar functionality, the following academic papers provide excellent background:\n\n- [Efficient dictionary and language model compression for input method editors](https://aclanthology.org/W11-3503/) - Describes techniques for compressing IME dictionaries while maintaining fast lookup times\n- [Space-efficient static trees and graphs](https://doi.org/10.1109/SFCS.1989.63533) - Introduces fundamental succinct data structure techniques that enable near-optimal space usage while supporting fast operations\n- [最小コスト法に基づく形態素解析における CPU キャッシュの効率化](https://www.anlp.jp/proceedings/annual_meeting/2023/pdf_dir/C2-4.pdf) - Discusses CPU cache optimization techniques for morphological analysis using minimum-cost methods\n- [Vibrato](https://github.com/daac-tools/vibrato) - Viterbi-based accelerated tokenizer\n- [Vaporetto: 点予測法に基づく高速な日本語トークナイザ](https://www.anlp.jp/proceedings/annual_meeting/2022/pdf_dir/D2-5.pdf) - Presents a fast tokenization approach using linear classification and point prediction methods and three novel score preprocessing techniques\n- [Vaporetto](https://github.com/daac-tools/vaporetto?tab=readme-ov-file) - Implementation of the pointwise prediction tokenizer described in the paper above\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/24779436?u=468cbd690b20521c63491f7d3bd8ef0e89ee4703&v=4",
  "releases": [
    {
      "tag_name": "dictionary-v1",
      "name": "Dictionary v1",
      "body": "UniDic and IPADIC dictionaries\r\n",
      "prerelease": false,
      "published_at": "2025-02-03T17:20:15Z",
      "html_url": "https://github.com/egegungordu/jaime/releases/tag/dictionary-v1",
      "assets": [
        {
          "name": "ipadic.bin.tar.gz",
          "url": "https://github.com/egegungordu/jaime/releases/download/dictionary-v1/ipadic.bin.tar.gz",
          "size": 5379073,
          "content_type": "application/x-gzip"
        },
        {
          "name": "unidic.bin.tar.gz",
          "url": "https://github.com/egegungordu/jaime/releases/download/dictionary-v1/unidic.bin.tar.gz",
          "size": 416933842,
          "content_type": "application/x-gzip"
        }
      ]
    },
    {
      "tag_name": "v0.0.1",
      "name": "v0.0.1",
      "body": "## Initial release\r\n\r\n### Known Issues\r\n\r\n1. Memory leak in WebAssembly implementation needs investigation\r\n2. Performance optimizations needed in:\r\n   - Dictionary builder\r\n   - Trie data structure\r\n3. Dictionary-related improvements pending:\r\n   - Mapping layer for hiragana input optimization\r\n   - Review of decompressor/compressor implementation\r\n4. Multiple best matches support not yet implemented\r\n5. Unknown data needed for proper cost calculation in lattice\r\n\r\n**Full Changelog**: https://github.com/egegungordu/jaime/compare/latest...v0.0.1",
      "prerelease": false,
      "published_at": "2025-01-31T11:47:28Z",
      "html_url": "https://github.com/egegungordu/jaime/releases/tag/v0.0.1",
      "assets": [
        {
          "name": "libjaime.wasm",
          "url": "https://github.com/egegungordu/jaime/releases/download/v0.0.1/libjaime.wasm",
          "size": 17930091,
          "content_type": "application/wasm"
        }
      ]
    }
  ],
  "owner_company": null,
  "owner_location": "Tokyo, Japan",
  "owner_blog": "ege.fyi",
  "owner_twitter_username": "eggngrd",
  "owner_followers": 19,
  "owner_following": 53,
  "owner_created_at": "2016-12-26T16:37:03Z",
  "homepage": "https://jaime-wasm.pages.dev/",
  "license": "MIT",
  "category": "library"
}