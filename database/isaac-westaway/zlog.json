{
  "name": "zlog",
  "owner": "isaac-westaway",
  "repo": "zlog",
  "description": "Appplication-level logging library for Zig",
  "type": "project",
  "topics": [
    "zig-package"
  ],
  "stars": 4,
  "forks": 0,
  "watchers": 1,
  "updated_at": "2024-11-20T15:07:32Z",
  "readme": "Overview\n========\n\n`zlog` is an application-level logging library that provides some APIs to write logging message to an output file.\n\nMy inspiration came from using Google's `glog` library, writing some cool applications with the ability to log actions easily.\n\nSo credits go to Google.\n\nThis code was also taken from my `zigwm` project, which *needed* logging to figure out what was going on.\n\n> [!TIP]\n> Like Glog, this library is also thread-safe\n\nGetting Started\n---------------\n\nYou can install the library by running\n```bash\nzig fetch --save git+https://github.com/isaac-westaway/zlog\n```\n\nThen add the dependency in your `build.zig` file\n```zig\nconst zlog = b.dependency(\"zlog\", .{ .target = target, .optimize = optimize });\nexe.root_module.addImport(\"zlog\", zlog.module(\"zlog\"));\n```\n\nUsage\n-----\n\n### Quickstart\nYou can get started by initializing the logging file:\n```zig\npub fn main() !void {\n    var gpa = std.heap.GeneralPurposeAllocator(.{}){};\n    defer std.debug.assert(gpa.deinit() == .ok);\n    var allocator = gpa.allocator();\n\n    try Logger.initializeLogging(&allocator, \n        .{ .absolute_path = \"/home/isaacwestaway/Documents/zig/zlog/\", .file_name = \"log\" },\n        .{ .severity = .info }\n    );\n    defer Logger.Log.close();\n}\n```\n\nAnd then log a message to the logfile:\n```zig\n...\nvar Log = Logger.Log;\n\nconst str: []const u8 = \"world\";\nconst timestamp: i64 = std.time.timestamp();\n\nconst current_time: []const u8 = Logger.timestampToDatetime(allocator, timestamp);\ndefer allocator.free(current_time);\n\ntry Log.info(\"MAIN\", \"Hello, {s}\", .{ str });\ntry Log.warn(\"MAIN\", \"Current Timestamp: {d}\", .{ timestamp} );\ntry Log.err(\"MAIN\", \"Hello {s}, at {s}\", .{ str, current_time });\n\n// Will crash the program upon logging!\ntry Logger.Log.fatal(\"MAIN\", \"I am Crashing Now!\", .{});\n```\nOutput:\n```\nINFO-MAIN-2024/9/17-0:31:57-T250650:Hello, world\nWARN-MAIN-2024/9/17-0:31:57-T250650:Current Timestamp: 1726533117\nERROR-MAIN-2024/9/17-0:31:57-T250650:Hello world, at 2024/9/17-0:31:57\nFATAL-MAIN-2024/9/17-0:31:57-T250650:I am Crashing Now!\n```\n\n### Using a custom prefix\n```zig\n// The callback must have these two arguments\nfn testLogPrefix(allocator: *std.mem.Allocator, log_level: []const u8) []const u8 {\n    const current_time = Logger.timestampToDatetime(allocator.*, std.time.timestamp());\n    const str: []u8 = std.fmt.allocPrint(allocator.*, \"{s}: Some Extra Messages!, such as the time: {s}: \", .{ log_level, current_time }) catch {\n        return undefined;\n    };\n    return str;\n}\n\npub fn main() !void {\n\n    var gpa = std.heap.GeneralPurposeAllocator(.{}){};\n    defer std.debug.assert(gpa.deinit() == .ok);\n    var allocator = gpa.allocator();\n\n    try Logger.initializeLogging(&allocator, \n        .{ .absolute_path = \"/home/isaacwestaway/Documents/zig/zlog/\", .file_name = \"log\" }, \n        .{ .severity = .info }\n    );\n    try Logger.installLogPrefix(&testLogPrefix);\n    defer Logger.Log.close();\n\n    var Log = Logger.Log;\n\n    const str: []const u8 = \"world\";\n    const timestamp: i64 = std.time.timestamp();\n\n    const current_time: []const u8 = Logger.timestampToDatetime(allocator, timestamp);\n    defer allocator.free(current_time);\n\n    try Log.info(\"MAIN\", \"Hello, {s}\", .{str});\n    try Log.warn(\"MAIN\", \"Current Timestamp: {d}\", .{timestamp});\n    try Log.err(\"MAIN\", \"Hello {s}, at {s}\", .{ str, current_time });\n\n    // Will crash the program upon logging!\n    try Logger.Log.fatal(\"MAIN\", \"I am Crashing Now!\", .{});\n}\n```\n\nOutput:\n```\nINFO: Some Extra Messages!, such as the time: 2024/9/17-0:32:51: Hello, world\nWARN: Some Extra Messages!, such as the time: 2024/9/17-0:32:51: Current Timestamp: 1726533171\nERROR: Some Extra Messages!, such as the time: 2024/9/17-0:32:51: Hello world, at 2024/9/17-0:32:51\nFATAL: Some Extra Messages!, such as the time: 2024/9/17-0:32:51: I am Crashing Now!\n```\n\nTodo\n----\n\n- Some better test cases",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/125730392?v=4",
  "releases": [
    {
      "tag_name": "zlog",
      "name": "v1.0.0",
      "body": "",
      "prerelease": false,
      "published_at": "2024-09-17T01:07:32Z",
      "html_url": "https://github.com/isaac-westaway/zlog/releases/tag/zlog",
      "assets": []
    }
  ],
  "owner_company": null,
  "owner_location": null,
  "owner_blog": null,
  "owner_twitter_username": null,
  "owner_followers": 4,
  "owner_following": 0,
  "owner_created_at": "2023-02-18T08:56:21Z",
  "license": "MIT",
  "category": "library"
}