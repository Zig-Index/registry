{
  "name": "zprof",
  "owner": "ANDRVV",
  "repo": "zprof",
  "description": "üßÆ Cross-allocator profiler for Zig",
  "type": "package",
  "topics": [
    "allocator",
    "memory",
    "profiler",
    "zig",
    "zig-package",
    "ziglang"
  ],
  "stars": 52,
  "forks": 2,
  "watchers": 1,
  "updated_at": "2025-12-05T19:18:50Z",
  "minimum_zig_version": "0.15.0",
  "readme": "<br><br>\n\n<div align=\"center\">\n  <img alt=\"Zprof\" src=\"https://github.com/andrvv/zprof/blob/main/assets/zprof-logo.png\">\n</div>\n\n<br><br>\n\n## The Zprof cross-allocator profiler\n\nZprof is a cross-allocator wrapper for profiling memory data.\n\nDeveloped for use in Debug or official modes, it guarantees nearly the same performance as the wrapped allocator.\nZprof's development is based on a primary priority: ease of use, improved efficiency, readability, clean, minimal, and well-documented code.\n\n## üìñ Table of Contents\n\n- [The Zprof cross-allocator profiler](#the-zprof-cross-allocator-profiler)\n- [üìñ Table of Contents](#-table-of-contents)\n- [üì• Installation](#-installation)\n  - [Using a package manager](#using-a-package-manager)\n- [üöÄ Quick Start](#-quick-start)\n- [üîç Usage](#-usage)\n  - [Basic Usage](#basic-usage)\n  - [Thread safe mode](#thread-safe-mode)\n  - [Logging](#logging)\n  - [Detecting Memory Leaks](#detecting-memory-leaks)\n  - [Full Profiler API](#full-profiler-api)\n    - [Fields](#fields)\n    - [Methods](#methods)\n- [üìù Examples](#-examples)\n  - [Testing for Memory Leaks](#testing-for-memory-leaks)\n\n## üì• Installation\n\n### Using a package manager\n\nAdd `Zprof` to your project's `build.zig.zon`:\n\n```zig\n.{\n    .name = \"my-project\",\n    .version = \"1.3.0\",\n    .dependencies = .{\n        .zprof = .{\n            .url = \"https://github.com/ANDRVV/zprof/archive/v1.3.0.zip\",\n            .hash = \"...\",\n        },\n    },\n}\n```\n\nThen in your `build.zig`, add:\n\n```zig\n// Add Zprof as a dependency\nconst zprof_dep = b.dependency(\"zprof\", .{\n        .target = target,\n        .optimize = optimize,\n});\n\n// Add the module to your executable\nexe.root_module.addImport(\"zprof\", zprof_dep.module(\"zprof\"));\n```\n\nElse you can put `zprof.zig` in your project's path and import it.\n\nZig version 0.15.1 or newer is required to compile Zprof\n\n## üöÄ Quick Start\n\nHere's how to use `Zprof` in three easy steps:\n\n```zig\nconst std = @import(\"std\");\nconst Zprof = @import(\"zprof.zig\").Zprof;\n\npub fn main() !void {\n    var stdout_buf: [4096]u8 = undefined;\n    var stdout_writer = std.fs.File.stdout().writer(&stdout_buf);\n    const stdout = &stdout_writer.interface;\n    defer stdout.flush() catch {};\n\n    var gpa = std.heap.GeneralPurposeAllocator(.{}){};\n    defer _ = gpa.deinit();\n    var gpa_allocator = gpa.allocator();\n\n    // 1. Create a profiler by wrapping your allocator\n    var zprof = try Zprof(false).init(&gpa_allocator, stdout);\n    // false disable thread-safe mode and passing in a writer enables logging\n\n    defer zprof.deinit(); // deallocates Zprof instance\n\n    // 2. Use the profiler's allocator instead of your original one\n    const allocator = zprof.allocator;\n\n    // 3. Use the allocator as normal\n    const data = try allocator.alloc(u8, 1024);\n    defer allocator.free(data);\n\n    // Check for leaks\n    stdout.print(\"Has leaks: {}\\n\", .{zprof.profiler.hasLeaks()}) catch {};\n}\n```\n\n## üîç Usage\n\n### Basic Usage\n\nTo start profiling memory usage, simply wrap your allocator with `Zprof`:\n\n```zig\nvar zprof = try Zprof(false).init(&allocator, null); // on init, null disables automatic logging\nconst tracked_allocator = zprof.allocator;\n```\n\n### Thread safe mode\n\nTo use `Zprof` with mutex, you must enable thread-safe mode:\n\n```zig\nvar zprof = try Zprof(true).init(&allocator, null); // true enables thread-safe mode\nconst tracked_allocator = zprof.allocator;\n```\n\n### Logging\n\nIf logging is enabled, logs allocated/deallocated bytes when allocator\nallocates or deallocates.\n\n```zig\nvar zprof = try Zprof(false).init(&allocator, arraylist_writer); // Passing in a writer enables automatic logging\nconst tracked_allocator = zprof.allocator;\n\nconst data = try allocator.alloc(u8, 1024); // prints: Zprof::ALLOC allocated=1024\nallocator.free(data); // prints: Zprof::FREE deallocated=1024\n```\n\n### Detecting Memory Leaks\n\n`Zprof` makes it easy to detect memory leaks in your application:\n\n```zig\n// At the end of your program or test\nconst has_leaks = zprof.profiler.hasLeaks();\nif (has_leaks) {\n    // Handle leaks (e.g., report, abort in tests)\n    std.debug.print(\"Memory leak detected!\\n\", .{});\n    return error.MemoryLeak;\n}\n```\n\n### Full Profiler API\n\nThe `Profiler` struct contains several fields and methods:\n\n#### Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `allocated` | `u64` | Total bytes allocated since initialization |\n| `alloc_count` | `u64` | Number of allocation operations |\n| `free_count` | `u64` | Number of deallocation operations |\n| `live_peak` | `u64` | Maximum memory usage at any point |\n| `live_bytes` | `u64` | Current memory usage |\n\n#### Methods\n\n| Method | Description |\n|--------|-------------|\n| `hasLeaks()` | Returns `true` if there are memory leaks |\n| `reset()` | Resets all profiling statistics |\n\n## üìù Examples\n\n### Testing for Memory Leaks\n\n```zig\ntest \"no memory leaks\" {\n    var arena = std.heap.ArenaAllocator.init(std.testing.allocator);\n    defer arena.deinit();\n    var arena_allocator = arena.allocator();\n    \n    var zprof = try Zprof(false).init(&arena_allocator, null);\n    defer zprof.deinit();\n\n    const allocator = zprof.allocator;\n    \n    // Perform allocations\n    const data = try allocator.alloc(u8, 1024);\n    defer allocator.free(data);\n    \n    // Verify no leaks\n    try std.testing.expect(!zprof.profiler.hasLeaks());\n}\n```\n\n---\n\nMade with ‚ù§Ô∏è for the Zig community\n\nCopyright (c) 2025 Andrea Vaccaro\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/100683661?u=c6078a2fd9c64e0b248003bb27c0c5902d7d5a27&v=4",
  "releases": [
    {
      "tag_name": "v1.3.0",
      "name": "v1.3.0",
      "body": "Fixed bugs related to thread-safe mode.\r\nAdapted to Zig version 0.15.x.\r\nPrevented integer overflow when profiler stats are updated.\r\nChanged default logging from stderr to new custom std.Io.Writer.\r\nFinally, refactored and improved comments.",
      "prerelease": false,
      "published_at": "2025-08-23T13:05:20Z",
      "html_url": "https://github.com/ANDRVV/zprof/releases/tag/v1.3.0",
      "assets": []
    },
    {
      "tag_name": "v1.2.1",
      "name": "v1.2.1",
      "body": "Improved tests, fixed hasLeaks function and improved syntax.",
      "prerelease": false,
      "published_at": "2025-08-09T18:56:49Z",
      "html_url": "https://github.com/ANDRVV/zprof/releases/tag/v1.2.1",
      "assets": []
    },
    {
      "tag_name": "v1.2.0",
      "name": "v1.2.0",
      "body": "Added compatibility with thread safe mode, using mutex.",
      "prerelease": false,
      "published_at": "2025-08-04T22:03:41Z",
      "html_url": "https://github.com/ANDRVV/zprof/releases/tag/v1.2.0",
      "assets": []
    },
    {
      "tag_name": "v1.1.0",
      "name": "v1.1.0",
      "body": "Improved code, made regression of unused logs and improves general performance.",
      "prerelease": false,
      "published_at": "2025-08-03T12:04:14Z",
      "html_url": "https://github.com/ANDRVV/zprof/releases/tag/v1.1.0",
      "assets": []
    },
    {
      "tag_name": "v1.0.0",
      "name": "v1.0.0",
      "body": "Added `deinit()` method to free the Zprof struct.\r\nReady to stable version.",
      "prerelease": false,
      "published_at": "2025-07-01T16:03:50Z",
      "html_url": "https://github.com/ANDRVV/zprof/releases/tag/v1.0.0",
      "assets": []
    },
    {
      "tag_name": "v0.2.6",
      "name": "v0.2.6",
      "body": "Patch: bug on resize and remap, allocation appears always positive.",
      "prerelease": false,
      "published_at": "2025-06-02T22:12:12Z",
      "html_url": "https://github.com/ANDRVV/zprof/releases/tag/v0.2.6",
      "assets": []
    },
    {
      "tag_name": "v0.2.5",
      "name": "v0.2.5",
      "body": "Fixed critical bug: negative resize or remap causes integer overflow.",
      "prerelease": false,
      "published_at": "2025-06-01T20:17:14Z",
      "html_url": "https://github.com/ANDRVV/zprof/releases/tag/v0.2.5",
      "assets": []
    },
    {
      "tag_name": "v0.2.4",
      "name": "v0.2.4",
      "body": "Fixed dagling pointer, format error and docs.",
      "prerelease": false,
      "published_at": "2025-05-31T19:49:05Z",
      "html_url": "https://github.com/ANDRVV/zprof/releases/tag/v0.2.4",
      "assets": []
    },
    {
      "tag_name": "v0.1.3",
      "name": "v0.1.3",
      "body": "Fixed docs and added check for module version.",
      "prerelease": false,
      "published_at": "2025-05-12T16:48:50Z",
      "html_url": "https://github.com/ANDRVV/zprof/releases/tag/v0.1.3",
      "assets": []
    },
    {
      "tag_name": "v0.1.2",
      "name": "v0.1.2",
      "body": "Update: add compatibility for external dependency.",
      "prerelease": false,
      "published_at": "2025-05-10T23:58:18Z",
      "html_url": "https://github.com/ANDRVV/zprof/releases/tag/v0.1.2",
      "assets": []
    },
    {
      "tag_name": "v0.1.1",
      "name": "v0.1.1",
      "body": "Patch v0.1.1: LazyPath instead of path on build.zig",
      "prerelease": false,
      "published_at": "2025-05-10T22:43:14Z",
      "html_url": "https://github.com/ANDRVV/zprof/releases/tag/v0.1.1",
      "assets": []
    },
    {
      "tag_name": "v0.1.0",
      "name": "v0.1.0",
      "body": "The first release of zprof.",
      "prerelease": false,
      "published_at": "2025-05-10T19:38:20Z",
      "html_url": "https://github.com/ANDRVV/zprof/releases/tag/v0.1.0",
      "assets": []
    }
  ],
  "owner_bio": "Andrea Vaccaro üë®üèª‚Äçüíª 17 years old student",
  "owner_company": "@raptodb",
  "owner_location": "Italy",
  "owner_blog": null,
  "owner_twitter_username": null,
  "owner_followers": 19,
  "owner_following": 5,
  "owner_created_at": "2022-03-01T10:00:20Z",
  "license": "MIT",
  "category": "library"
}