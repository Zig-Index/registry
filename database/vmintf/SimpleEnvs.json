{
  "name": "SimpleEnvs",
  "owner": "vmintf",
  "repo": "SimpleEnvs",
  "description": "A zig language for environment library.",
  "type": "package",
  "topics": [
    "env",
    "zig",
    "zig-package"
  ],
  "stars": 1,
  "forks": 0,
  "watchers": 1,
  "updated_at": "2025-10-20T10:47:03Z",
  "dependencies": [
    {
      "name": "example",
      "url": "https://example.com/foo.tar.gz",
      "hash": "..."
    }
  ],
  "minimum_zig_version": "0.15.0-dev.345+ec2888858",
  "readme": "# SimpleEnvs\n\nA lightweight, secure, and idiomatic Zig library for loading and parsing `.env` files, inspired by `python-dotenv`. It provides a simple API to load environment variables into a process-local `EnvMap`, with support for strings, numbers, and booleans. Designed with Zig's philosophy of explicitness, conciseness, and safety, it ensures robust security and memory management.\n\n## Features\n\n- **Automatic** `.env` **Loading**: Scans the current directory and up to 2 subdirectories for `.env` files with `loadAuto()`.\n- **Type-Safe Parsing**: Supports strings, integers (`i64`), and booleans using a `Value` union.\n- **Secure Value Lookup**: Provides `get` and `getWithDefault` for safe access without forced unwrapping.\n- **Robust Security**:\n  - Path traversal protection (`..` blocked).\n  - Input validation (10MB file limit, 128-byte keys, 1024-byte values, 4096-byte lines).\n  - UTF-8 encoding validation.\n  - Symbolic link protection (`no_follow`).\n- **Memory Efficiency**:\n  - Uses `std.heap.GeneralPurposeAllocator` (GPA) for leak detection.\n  - Minimized memory usage (\\~1-2MB for typical use).\n  - Explicit memory cleanup with `deinit()`.\n- **Test Coverage**: Comprehensive tests for parsing, scanning, and edge cases.\n\n## Installation\n\n### Prerequisites\n\n- Zig 0.14.0 or later.\n\n### Adding to Your Project\n\n1. Clone or copy the library to your project:\n\n   ```bash\n   git clone https://github.com/vmintf/SimpleEnvs.git\n   ```\n\n2. Add it to your `build.zig`:\n\n   ```zig\n   const std = @import(\"std\");\n   \n   pub fn build(b: *std.Build) void {\n       const target = b.standardTargetOptions(.{});\n       const optimize = b.standardOptimizeOption(.{});\n   \n       const exe = b.addExecutable(.{\n           .name = \"my-app\",\n           .root_source_file = b.path(\"src/main.zig\"),\n           .target = target,\n           .optimize = optimize,\n       });\n   \n       // Add SimpleEnvs as a module\n       const dotenv_module = b.addModule(\"env\", .{\n           .root_source_file = b.path(\"src/root.zig\"),\n       });\n       exe.root_module.addImport(\"env\", dotenv_module);\n   \n       b.installArtifact(exe);\n   }\n   ```\n\n3. Import and use in your code:\n\n   ```zig\n   const env = @import(\"env\");\n   ```\n\n## Usage\n\n### Basic Example\n\nLoad a `.env` file and read values:\n\n```zig\nconst env = @import(\"env\");\nconst std = @import(\"std\");\n\npub fn main() !void {\n    var gpa = std.heap.GeneralPurposeAllocator(.{}){};\n    defer std.debug.assert(gpa.deinit() == .ok);\n    const allocator = gpa.allocator();\n\n    var env_map = try env.loadAuto(allocator);\n    defer env.deinit(&env_map); // Always call to free memory\n\n    if (env.get(env_map, \"DB_HOST\")) |host| {\n        std.debug.print(\"DB_HOST: {}\\n\", .{host}); // Outputs: DB_HOST: localhost\n    }\n    const port = env.getWithDefault(env_map, \"DB_PORT\", env.Value{ .Number = 8080 });\n    std.debug.print(\"DB_PORT: {}\\n\", .{port}); // Outputs: DB_PORT: 5432\n}\n```\n\nExample `.env` file:\n\n```\nDB_HOST=localhost\nDB_PORT=5432\nDB_USER=admin\nDEBUG=true\n```\n\n### Advanced Usage\n\nLoad a specific `.env` file with custom options:\n\n```zig\nconst env = @import(\"env\");\nconst std = @import(\"std\");\n\npub fn main() !void {\n    var gpa = std.heap.GeneralPurposeAllocator(.{}){};\n    defer std.debug.assert(gpa.deinit() == .ok);\n    const allocator = gpa.allocator();\n\n    var env_map = try env.load(allocator, .{\n        .path = \"./config/.env\",\n    });\n    defer env.deinit(&env_map);\n\n    if (env.get(env_map, \"API_KEY\")) |key| {\n        std.debug.print(\"API_KEY: {}\\n\", .{key});\n    }\n}\n```\n\n### Important Notes\n\n- **Memory Management**: Always call `env.deinit(&env_map)` to free memory. Use `GeneralPurposeAllocator` to detect leaks.\n- **Security**: The library validates paths, file sizes, and encodings to prevent attacks. Do not expose `EnvMap` values externally.\n- **Input Validation**: Keys and values are limited to 128 and 1024 bytes, respectively. Lines are capped at 4096 bytes.\n\n## Testing\n\nRun the tests to verify functionality:\n\n```bash\nzig test src/root.zig\n```\n\nTests cover:\n\n- Automatic `.env` file scanning and loading.\n- Parsing strings, numbers, and booleans.\n- Edge cases (empty files, invalid paths, large files).\n\n## Security Features\n\n- **Path Traversal Protection**: Blocks `..` in paths to prevent unauthorized access.\n- **File Size Limits**: Rejects files larger than 10MB to prevent DoS attacks.\n- **UTF-8 Validation**: Ensures `.env` files are valid UTF-8 to avoid encoding issues.\n- **Symbolic Link Protection**: Uses `no_follow` to avoid following links.\n- **Memory Safety**: Explicit cleanup with `deinit()` and GPA for leak detection.\n\n## Future Features\n\n- Encrypted `.env` file support with Diffie-Hellman key exchange and AES-256-GCM.\n- Support for scanning parent directories.\n- Environment variable override prevention.\n\n## Contributing\n\nWe welcome contributions! To contribute:\n\n1. Fork the repository.\n2. Create a feature branch (`git checkout -b feature/my-feature`).\n3. Commit your changes (`git commit -m \"Add my feature\"`).\n4. Push to the branch (`git push origin feature/my-feature`).\n5. Open a pull request.\n\nPlease include tests for new features and follow Zig's coding style.\n\n## License\n\nMIT License. See LICENSE for details.\n\n## Acknowledgments\n\nInspired by `python-dotenv` and designed for Zig's explicit and secure philosophy.\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/84371372?u=bc06a2b2aac1008a0cdb047664c72482ed5d42e4&v=4",
  "releases": [],
  "owner_bio": "Founder of @skystarry-ai  ",
  "owner_company": "@LYNC-TEAM ",
  "owner_location": "Gyeongsangbuk-do, Republic of Korea",
  "owner_blog": "https://skystarry.xyz",
  "owner_twitter_username": null,
  "owner_followers": 5,
  "owner_following": 13,
  "owner_created_at": "2021-05-18T06:24:14Z",
  "license": "MIT",
  "category": "library"
}