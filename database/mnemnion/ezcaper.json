{
  "name": "ezcaper",
  "owner": "mnemnion",
  "repo": "ezcaper",
  "description": "ezcape z ztrings",
  "type": "package",
  "topics": [
    "escaping",
    "repr",
    "strings",
    "zig",
    "zig-package"
  ],
  "stars": 2,
  "forks": 0,
  "watchers": 1,
  "updated_at": "2025-09-30T12:56:46Z",
  "dependencies": [
    {
      "name": "runerip",
      "url": "https://github.com/mnemnion/runerip/archive/refs/tags/v0.0.3.tar.gz",
      "hash": "runerip-0.0.3-k0AJad8bAQARKzvniiqjPyCmfBZzkXCSRscNcf5cOl72"
    }
  ],
  "minimum_zig_version": "0.15.1",
  "readme": "# Ezcaper\n\nA simple library for escaping strings and codepoints in format printing.\n\n## Purpose\n\nDebugging and logging, among other uses, often want to print a string in the style of a source-code string.  Zig has [std.zig.stringEscape](https://ziglang.org/documentation/master/std/#std.zig.stringEscape), but this escapes all non-ASCII input using `\\xXX`-style escape sequences, which is valid Zig, but not ideal for seeing what a multi-byte string actually consists of.\n\nThe `ezcaper` library has several functions which serve to print strings, and codepoints, in a way which is valid Zig source code, but more legible, more like one might write the string naturally.\n\n## Install\n\n```sh\nzig fetch --save https://github.com/mnemnion/ezcaper/archive/refs/tags/v0.3.0.tar.gz\n```\n\n## Design\n\n\nThe brains of the operation is the oddly-specific function `whichControlKind`, which answers with the enums `.control`, `.format`, and `.normal`.  This allows for strings and codepoints to have different behavior for format characters: escaped as codepoints and printed directly as strings.  This lets Farmer Bob \"üë®üèª‚Äçüåæ\" print as a single grapheme, while the ZWJ in Farmer Bob, in isolation, becomes `'\\u{200d}'`.\n\nThere's also the simpler `isControl`, which converts `.control` and `.format` to `true` and `.normal` to `false`.  Both of these are public functions, on the off chance that one might find them independently useful.\n\nThe functions are code-generated from the Unicode Character Database data for version 16.0, and will be updated upon the occasion of subsequent versions of Unicode.  It uses a master switch to separate codepoints by power-of-two, which generates superior object code to a single ginormous switch, but is likely somewhat less efficient than the lookup table employed by `zg`.  With the compensating advantage that it's pure code with no allocations.\n\nThese are used to power a few structs, intended to be used in formatted printing. `EscChar` and `EscCharQuoted` will print a single `u21`.  `EscChar` will print the character 'bare', `EscCharQuoted` will surround it with a pair of quotes and write `'` as `\\'`.  This will throw an error if the codepoint is too large; since the `0.15` error set is no longer inferred, that error will be `WriteFailed`, instead of the original `CodepointTooLarge`.  Sorry.\n\nThere are four structs for printing escaped strings: `EscStringExact` and `EscStringLossy`, and their `-Quoted` variants. `EscStringExact` will print `\\x` codes for any invalid Unicode data, while `EscStringLossy` will print the Unicode Replacement Character `U+FFFD` for any invalid sequences, following the recommended approach to substitution in the Unicode Standard.\n\nThe \"not `Quoted`\" pair will print the string without quotes, while the other two will print the string in double-quotes, and escape a double quote as `\\\"` and a backslash as `\\\\`.  Both use the escape sequences `\\t`, `\\r`, and `\\n`, print ASCII C0 codes as `\\xXX`, and all other escaped values in the `\\u{XXXX}` format.\n\nIt is a bug if the string produced by `EscStringExact(Quoted)` does not read into Zig with a byte-identical result to the source string.  It is *not* a bug if `zig fmt` formats the result string differently from `ezcaper`.\n\nNote that `EscChar` will escape surrogate codepoints, which is not (currently) valid in Zig source code.  The string printers will replace or byte-print surrogates, respectively, and this will change if and when escaped surrogates become valid in Zig strings, see issue [#20270](https://github.com/ziglang/zig/issues/20270).\n\nFor convenient formatting, these structs can be created with helper functions `escChar`, `escStringExact`, and `escStringLossy`, all of which, you guessed it, have `Quoted` variants[^1].  Example use:\n\n```zig\nstd.debug.print(\"a string: {} and a char {u}\", .{escStringExact(str), escChar(c)});\n```\n\nThe mnemonic here is that `{s}` and `{u}` do the same thing which the standard library does, and `{}` does the fancier custom thing.\n\n\n## Plans\n\nI don't expect changes to this library at any point, other than to update the generated code each time Unicode releases a new standard.  If you see output which looks like a bug, and I agree, I'll fix that.\n\nThis module has [runerip](https://github.com/mnemnion/runeset) as a dependency, because the API makes handling both kinds of string print easier.  This dependency may be removed at some future point.\n\n[^1]: This was perhaps the only library in existence which was using the now-removed format strings for `.format` printing. If that [changes further](https://github.com/ziglang/zig/issues/25358), however unlikely that may seem, the interface will change again to match it.\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/231785?u=8a0cdeb97b0a614b0350536ecd6921ee6166c611&v=4",
  "releases": [
    {
      "tag_name": "v0.3.0",
      "name": "Zig 0.15-compatible API",
      "body": "This moves all the format-string-specific stuff into a doubling\r\nof the functions and structs used in the library.",
      "prerelease": false,
      "published_at": "2025-09-29T16:13:02Z",
      "html_url": "https://github.com/mnemnion/ezcaper/releases/tag/v0.3.0",
      "assets": []
    },
    {
      "tag_name": "v0.2.2",
      "name": "Zon correction",
      "body": "The only difference between this and `v0.2.1` is that the Zon file tells you that it's `0.2.2`, while `0.2.1` claims to be `0.0.1`.  Oops.",
      "prerelease": false,
      "published_at": "2025-05-22T19:14:14Z",
      "html_url": "https://github.com/mnemnion/ezcaper/releases/tag/v0.2.2",
      "assets": []
    },
    {
      "tag_name": "v0.2.1",
      "name": "Check format validity at comptime",
      "body": "Erroneous format string are now a compile error, not a runtime panic.  As they should be.",
      "prerelease": false,
      "published_at": "2025-05-22T02:40:20Z",
      "html_url": "https://github.com/mnemnion/ezcaper/releases/tag/v0.2.1",
      "assets": []
    },
    {
      "tag_name": "v0.2.0",
      "name": "Zig 0.14 compatibility",
      "body": "Modified `build.zig.zon` to conform to the `0.14` syntax.",
      "prerelease": false,
      "published_at": "2025-03-17T17:22:23Z",
      "html_url": "https://github.com/mnemnion/ezcaper/releases/tag/v0.2.0",
      "assets": []
    },
    {
      "tag_name": "v0.1.0",
      "name": "Package Release",
      "body": "The code which does, the thing.",
      "prerelease": false,
      "published_at": "2024-11-22T23:56:14Z",
      "html_url": "https://github.com/mnemnion/ezcaper/releases/tag/v0.1.0",
      "assets": []
    }
  ],
  "owner_company": null,
  "owner_location": "Eastern Standard Tribe",
  "owner_blog": null,
  "owner_twitter_username": null,
  "owner_followers": 91,
  "owner_following": 24,
  "owner_created_at": "2010-03-27T23:31:39Z",
  "license": "MIT",
  "category": "library"
}