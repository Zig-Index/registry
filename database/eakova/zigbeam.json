{
  "name": "zigbeam",
  "owner": "eakova",
  "repo": "zigbeam",
  "description": "Zig-Beam: Reusable building blocks for high-performance concurrency and parallel computing",
  "type": "project",
  "topics": [
    "zig-package",
    "deque",
    "mcmp",
    "automatic-reference-counting",
    "chase-lev",
    "ebr",
    "epoch-based-reclamation",
    "multithreading",
    "parallel-computing",
    "parallel-processing"
  ],
  "stars": 6,
  "forks": 0,
  "watchers": 0,
  "updated_at": "2025-12-02T17:44:53Z",
  "dependencies": [
    {
      "name": "example",
      "url": "https://example.com/foo.tar.gz",
      "hash": "..."
    }
  ],
  "minimum_zig_version": "0.15.2",
  "readme": "# ZigBeam: Reusable building blocks for concurrent programming\n\n![Zig 0.15.2+](https://img.shields.io/badge/Zig-0.15.2+-blue)\n![License](https://img.shields.io/badge/license-MIT_OR_Apache--2.0-blue.svg)\n![CI](https://github.com/eakova/zigbeam/actions/workflows/ci.yml/badge.svg)\n\nThis repository hosts multiple Zig libraries under one roof. Each library can be used on its own or together via a common wrapper. The workspace is designed to be practical: every library ships with small samples, focused tests, and repeatable benchmarks.\n\n#### Arc\n- Atomic smart pointer with Small Value Optimization (SVO) and weak references\n- Import: `@import(\"zigbeam\").Libs.Arc`\n- Samples: `zig build samples-arc`\n- Source: [src/libs/beam-arc/arc.zig](src/libs/beam-arc/arc.zig)\n- Tests: `zig build test-arc`\n\n#### Arc Pool\n- Reuse `Arc(T).Inner` allocations; fronted by ThreadLocalCache and global Treiber stack\n- Import: `@import(\"zigbeam\").Libs.ArcPool`\n- Samples: (covered in Arc samples)\n- Source: [src/libs/beam-arc/arc-pool/arc_pool.zig](src/libs/beam-arc/arc-pool/arc_pool.zig)\n- Tests: `zig build test-arc-pool`\n\n#### Cycle Detector\n- Debug utility to find unreachable Arc cycles using a user-provided trace function\n- Import: `@import(\"zigbeam\").Libs.ArcCycleDetector`\n- Source: [src/libs/beam-arc/cycle-detector/arc_cycle_detector.zig](src/libs/beam-arc/cycle-detector/arc_cycle_detector.zig)\n- Tests: `zig build test-arc-cycle`\n\n#### Thread-Local Cache\n- Per-thread, lock-free L1 pool to reduce allocator pressure and contention\n- Import: `@import(\"zigbeam\").Libs.ThreadLocalCache`\n- Samples: `zig build samples-tlc`\n- Source: [src/libs/beam-thread-local-cache/thread_local_cache.zig](src/libs/beam-thread-local-cache/thread_local_cache.zig)\n- Tests: `zig build test-tlc`\n\n#### Tagged Pointer\n- Pack a small tag into a pointer's low bits (common for lightweight flags)\n- Import: `@import(\"zigbeam\").Libs.TaggedPointer`\n- Samples: `zig build samples-tagged`\n- Source: [src/libs/beam-tagged-pointer/tagged_pointer.zig](src/libs/beam-tagged-pointer/tagged_pointer.zig)\n- Tests: `zig build test-tagged`\n\n#### Beam-Ebr (Epoch-Based Reclamation)\n- Lock-free memory reclamation for concurrent data structures\n- Import (internal): primarily used by `SegmentedQueue` as its EBR engine; not exposed via `beam.Libs`\n- Samples: `zig build samples-ebr`\n- Source: [src/libs/beam-ebr/ebr.zig](src/libs/beam-ebr/ebr.zig)\n- Tests: `zig build test` (full suite, includes EBR coverage)\n- Docs: [src/libs/beam-ebr/README.md](src/libs/beam-ebr/README.md)\n\n#### DVyukov MPMC Queue\n- Lock-free bounded Multi-Producer Multi-Consumer queue (Dmitry Vyukov's algorithm)\n- **Performance**: 20-100 Mops/s under high contention (industry-standard)\n- Import: `@import(\"zigbeam\").Libs.DVyukovMPMCQueue`\n- Samples: `zig build samples-dvyukov`\n- Source: [src/libs/beam-dvyukov-mpmc-queue/dvyukov_mpmc_queue.zig](src/libs/beam-dvyukov-mpmc-queue/dvyukov_mpmc_queue.zig)\n- Tests: `zig build test-dvyukov`\n\n#### Sharded DVyukov MPMC Queue\n- High-performance variant distributing contention across multiple independent queues\n- **Performance**: 100-133 Mops/s (2.5-6x faster than non-sharded under high contention)\n- **Use when**: 4+ producers AND 4+ consumers with balanced workload\n- Import: `@import(\"zigbeam\").Libs.ShardedDVyukovMPMCQueue`\n- Samples: (covered in DVyukov samples)\n- Source: [src/libs/beam-dvyukov-mpmc-queue/sharded_dvyukov_mpmc_queue.zig](src/libs/beam-dvyukov-mpmc-queue/sharded_dvyukov_mpmc_queue.zig)\n- Tests: `zig build test-dvyukov`\n\n#### Deque\n- Bounded work-stealing deque for building task schedulers and thread pools\n- **Performance**: Owner push ~2-5ns, Owner pop ~3-10ns, Steal ~20-50ns\n- Import: `@import(\"zigbeam\").Libs.Deque`\n- Source: [src/libs/beam-deque/beam_deque.zig](src/libs/beam-deque/beam_deque.zig)\n- Tests: `zig build test-beam-deque`\n- Benchmarks: `zig build bench-beam-deque`\n- Docs: [src/libs/beam-deque/README.md](src/libs/beam-deque/README.md)\n\n#### DequeChannel\n- MPMC work-stealing channel with automatic load balancing\n- **Performance**: Send fast path ~5-15ns, Recv ~5-80ns depending on source\n- Import: `@import(\"zigbeam\").Libs.DequeChannel`\n- Source: [src/libs/beam-deque/beam_deque_channel.zig](src/libs/beam-deque/beam_deque_channel.zig)\n- Tests: `zig build test-beam-deque-channel`\n- Benchmarks: `zig build bench-beam-deque-channel`\n- Docs: [src/libs/beam-deque/README.md](src/libs/beam-deque/README.md)\n\n#### Backoff\n- Exponential/spin/snooze backoff helper for contention control and polling loops\n- Import: wire the `beam-backoff` module from the package and use `Backoff` directly\n- Source: [src/libs/beam-backoff/backoff.zig](src/libs/beam-backoff/backoff.zig)\n- Samples: [src/libs/beam-backoff/samples/_backoff_samples.zig](src/libs/beam-backoff/samples/_backoff_samples.zig)\n\n#### CachePadded\n- Cache-line aware padding helpers for isolating hot fields and atomics\n- Import: wire the `beam-cache-padded` module from the package and use `CachePadded` directly\n- Source: [src/libs/beam-cache-padded/cache_padded.zig](src/libs/beam-cache-padded/cache_padded.zig)\n- Docs: [src/libs/beam-cache-padded/docs/CACHE_PADDED_IMPLEMENTATION.md](src/libs/beam-cache-padded/docs/CACHE_PADDED_IMPLEMENTATION.md)\n\n#### Task\n- Cancellable OS-thread task abstraction (inspired by C#'s CancellationToken)\n- Import: `@import(\"zigbeam\").Libs.Task`\n- Source: [src/libs/beam-task/task.zig](src/libs/beam-task/task.zig)\n- Tests: `zig build test-beam-task`\n- Docs: [src/libs/beam-task/README.md](src/libs/beam-task/README.md)\n\n#### BoundedSPSCQueue\n- Lock-free bounded Single-Producer Single-Consumer queue\n- Import: `@import(\"zigbeam\").Libs.BoundedSPSCQueue`\n- Source: [src/libs/spsc-queue/spsc_queue.zig](src/libs/spsc-queue/spsc_queue.zig)\n- Tests: `zig build test-spsc-queue`\n- Benchmarks: `zig build bench-spsc-queue`\n\n#### SegmentedQueue\n- Unbounded MPMC queue with dynamic growth using segmented memory\n- Import: `@import(\"zigbeam\").Libs.SegmentedQueue`\n- Source: [src/libs/beam-segmented-queue/segmented_queue.zig](src/libs/beam-segmented-queue/segmented_queue.zig)\n- Tests: `zig build test-segmented-queue`\n- Benchmarks: `zig build bench-segmented-queue`\n\n## Requirements\n\n- Zig 0.15.2 or later\n- macOS, Linux, or Windows\n\n## Libraries\n\n- `src/libs/` — Concurrent programming primitives and data structures\n  - **Arc**: Smart pointer with Small Value Optimization + pool + cycle detector\n  - **Thread-Local Cache**: Lock-free per-thread L1 pool\n  - **Tagged Pointer**: Bit-packed metadata in pointer low bits\n  - **Backoff**: Configurable backoff strategy for spin/snooze/wait loops\n  - **Beam-Ebr**: Epoch-Based Reclamation for safe memory reclamation\n  - **DVyukov MPMC Queue**: Lock-free bounded queue (20-133 Mops/s)\n  - **Deque**: Work-stealing deque for task schedulers\n  - **DequeChannel**: MPMC work-stealing channel with load balancing\n  - **Task**: Cancellable OS-thread task abstraction\n  - **BoundedSPSCQueue**: Lock-free single-producer single-consumer queue\n  - **SegmentedQueue**: Unbounded MPMC queue with dynamic growth\n   - **CachePadded**: Cache-line aware padding helpers\n  - Build targets: tests, samples, and benchmarks\n\n\n## Use These Libraries In Your Project\n\nYou can consume libraries from this repo via Zig's package system (recommended) or by vendoring the code. Below shows the package approach with the `zigbeam` wrapper module (which exposes all libraries under `Libs`).\n\n1) Add the dependency to your `build.zig.zon`\n\n```zig\n// build.zig.zon (top-level of your app)\n.{\n    .name = \"your-app\",\n    .version = \"0.1.0\",\n    .dependencies = .{\n        .zigbeam = .{\n            // Track a tag or commit tarball (recommended)\n            .url = \"https://github.com/eakova/zigbeam/archive/refs/heads/main.tar.gz\",\n            // Compute and fill the content hash:\n            //   zig fetch https://github.com/eakova/zigbeam/archive/refs/heads/main.tar.gz --save\n            .hash = \"<fill-with-zig-fetch-output>\",\n        },\n    },\n}\n```\n\nTip: run `zig fetch <url> --save` to automatically compute and insert the `hash`.\n\n2) Wire the dependency in your `build.zig`\n\n```zig\nconst std = @import(\"std\");\n\npub fn build(b: *std.Build) void {\n    const target = b.standardTargetOptions(.{});\n    const optimize = b.standardOptimizeOption(.{});\n\n    // Declare a dependency on zigbeam package\n    const beam_dep = b.dependency(\"zigbeam\", .{ .target = target, .optimize = optimize });\n    const beam = beam_dep.module(\"zigbeam\");\n\n    // Example: an executable that imports zigbeam\n    const exe = b.addExecutable(.{\n        .name = \"your-app\",\n        .root_source_file = b.path(\"src/main.zig\"),\n        .target = target,\n        .optimize = optimize,\n    });\n    exe.root_module.addImport(\"zigbeam\", beam);\n    b.installArtifact(exe);\n}\n```\n\n3) Import and use in your code\n\n```zig\n// src/main.zig\nconst std = @import(\"std\");\nconst beam = @import(\"zigbeam\");\n\npub fn main() !void {\n    // Tagged pointer\n    const TaggedPointer = beam.Libs.TaggedPointer;\n\n    // Thread-local cache\n    const ThreadLocalCache = beam.Libs.ThreadLocalCache;\n\n    // Arc core and pool\n    const Arc = beam.Libs.Arc;\n    const ArcPool = beam.Libs.ArcPool;\n\n    // Beam-Ebr (Epoch-Based Reclamation)\n    const BeamEbr = beam.Libs.BeamEbr;\n\n    // DVyukov MPMC Queue\n    const DVyukovMPMCQueue = beam.Libs.DVyukovMPMCQueue;\n    const ShardedDVyukovMPMCQueue = beam.Libs.ShardedDVyukovMPMCQueue;\n\n    // Work-stealing deque and channel\n    const Deque = beam.Libs.Deque;\n    const DequeChannel = beam.Libs.DequeChannel;\n\n    // Cancellable task abstraction\n    const Task = beam.Libs.Task;\n\n    // Lock-free queues\n    const BoundedSPSCQueue = beam.Libs.BoundedSPSCQueue;\n    const SegmentedQueue = beam.Libs.SegmentedQueue;\n\n    // minimal smoke check\n    var gpa = std.heap.GeneralPurposeAllocator(.{}){}; defer _ = gpa.deinit();\n    const alloc = gpa.allocator();\n    var arc_u64 = try Arc(u64).init(alloc, 42);\n    defer arc_u64.release();\n    std.debug.print(\"arc.get() = {}\\n\", .{arc_u64.get().*});\n}\n```\n\n## Notes\n- The `zig_beam` wrapper re-exports the main libraries under `Libs` for easy access: Arc, Arc Pool, Arc Cycle Detector, Thread-Local Cache, Tagged Pointer, Backoff, DVyukov MPMC Queue, Sharded DVyukov, Deque, DequeChannel, Task, BoundedSPSCQueue, and SegmentedQueue.\n- Benchmark reports are in each library's directory:\n  - Arc: [src/libs/beam-arc/benchmarks/ARC_BENCHMARK_RESULTS.md](src/libs/beam-arc/benchmarks/ARC_BENCHMARK_RESULTS.md)\n  - Arc Pool: [src/libs/beam-arc/arc-pool/benchmarks/ARC_POOL_BENCHMARK_RESULTS.md](src/libs/beam-arc/arc-pool/benchmarks/ARC_POOL_BENCHMARK_RESULTS.md)\n  - Thread-Local Cache: [src/libs/beam-thread-local-cache/benchmarks/TLC_BENCHMARK_RESULTS.md](src/libs/beam-thread-local-cache/benchmarks/TLC_BENCHMARK_RESULTS.md)\n  - DVyukov MPMC Queue: [src/libs/beam-dvyukov-mpmc-queue/benchmarks/DVYUKOV_MPMC_BENCHMARK_RESULTS.md](src/libs/beam-dvyukov-mpmc-queue/benchmarks/DVYUKOV_MPMC_BENCHMARK_RESULTS.md)\n  - Sharded DVyukov: [src/libs/beam-dvyukov-mpmc-queue/benchmarks/DVYUKOV_MPMC_BENCHMARK_RESULTS_SHARDED.md](src/libs/beam-dvyukov-mpmc-queue/benchmarks/DVYUKOV_MPMC_BENCHMARK_RESULTS_SHARDED.md)\n\n## Compatibility\n\nOS support: macOS, Linux, Windows\n- Uses only Zig std APIs (`std.Thread`, `std.time`, `std.fs`, `std.atomic`).\n- Cross-compiling: use `-Dtarget` if you need artifacts for another OS/arch.\n\nZig version policy: Requires Zig 0.15.2 or later.\n\n## Layout Conventions\n\n- `src/` — library code (keep public API in files imported by the library’s `build.zig`)\n- `src/libs/<lib>/` — individual libraries (code, tests, samples, benchmarks, docs)\n- `docs/` — high-level documentation and meta-notes\n- Samples — `_..._samples.zig` with `pub fn main() !void` so they can run via `zig run`\n- Tests — `_..._unit_tests.zig`, `_..._integration_tests.zig`, `_..._fuzz_tests.zig` (as applicable)\n- Benchmarks — `_..._benchmarks.zig` under `src/libs/<lib>/benchmarks/`, write Markdown results into that directory and print a short console summary\n\n## Adding a New Library\n\n1. Create `src/libs/<lib>/` with:\n   - `/<lib>.zig` (public API surface)\n   - optional `tests/`, `samples/`, `benchmarks/`, and `docs/` subdirectories\n2. Wire the new library into the top-level `build.zig` by:\n   - adding a module in `createModules`\n   - adding test entries in `test_specs`\n   - adding benchmark entries in `bench_specs` (if you provide benchmarks)\n3. Provide:\n   - At least one small sample (`samples/_..._samples.zig`) with `main()`\n   - Focused unit tests (and integration/fuzz tests if needed)\n   - A short `src/libs/<lib>/README.md` or docs file with description and commands\n\n## CI\n\n- Build matrix: Zig (pinned + next), OS (macOS, Linux)\n- Jobs:\n  - Build + test for each library\n  - Run samples (smoke check)\n- Run benchmarks (ReleaseFast, quick mode) and publish Markdown reports\n\n## Contributing\n\nContributions are welcome in the form of issues, PRs, and feedback. Please include:\n- Zig version\n- OS/arch\n- Exact build command\n- A minimal snippet or path to a failing sample/test\n\nGood first steps:\n- File a bug or feature request: https://github.com/eakova/zigbeam/issues/new\n- Propose improvements to samples/bench docs or add a new small sample\n\n## License\n\nLicensed under either of\n\n* Apache License, Version 2.0 ([LICENSE-APACHE](LICENSE-APACHE) or http://www.apache.org/licenses/LICENSE-2.0)\n* MIT license ([LICENSE-MIT](LICENSE-MIT) or http://opensource.org/licenses/MIT)\n\nat your option.\n\n### Contribution\n\nUnless you explicitly state otherwise, any contribution intentionally submitted\nfor inclusion in the work by you, as defined in the Apache-2.0 license, shall be\ndual licensed as above, without any additional terms or conditions.\n\n## Support\n\nIssues and PRs are welcome. Please include:\n- Zig version\n- OS/arch\n- Exact build command\n- A short snippet or a link to a failing sample/test\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/1556416?u=43ad962cce6b8ae1fee0d6dd1bf9c2c0b888a637&v=4",
  "releases": [
    {
      "tag_name": "v0.1.5",
      "name": "v0.1.5",
      "body": "# Zig‑Beam v0.1.5\r\n\r\nDate: 2025-11-22\r\n\r\nThis is a draft release generated from tag v0.1.5.\r\n\r\n## Quick Start (pin by tag)\r\n\r\n\r\nIn build.zig:\r\n\r\n\r\nIn code:\r\n\r\n",
      "prerelease": false,
      "published_at": "2025-11-22T14:08:47Z",
      "html_url": "https://github.com/eakova/zigbeam/releases/tag/v0.1.5",
      "assets": []
    },
    {
      "tag_name": "v0.1.0",
      "name": "v0.1.0",
      "body": "# Zig‑Beam v0.1.0\r\n\r\nDate: 2025-11-21\r\n\r\nThis is a draft release generated from tag v0.1.0.\r\n\r\n## Quick Start (pin by tag)\r\n\r\n\r\nIn build.zig:\r\n\r\n\r\nIn code:\r\n\r\n",
      "prerelease": false,
      "published_at": "2025-11-21T22:25:10Z",
      "html_url": "https://github.com/eakova/zigbeam/releases/tag/v0.1.0",
      "assets": [
        {
          "name": "README.md",
          "url": "https://github.com/eakova/zigbeam/releases/download/v0.1.0/README.md",
          "size": 4627,
          "content_type": "text/markdown"
        }
      ]
    },
    {
      "tag_name": "v0.1.0-rc3",
      "name": "v0.1.0-rc3",
      "body": "# Zig‑Beam v0.1.0-rc3\r\n\r\nDate: 2025-11-12\r\n\r\nThis is a draft release generated from tag v0.1.0-rc3.\r\n\r\n## Reports\r\n- Arc benchmarks: docs/utils/arc_benchmark_results.md\r\n- Thread‑Local Cache benchmarks: docs/utils/thread_local_cache_benchmark_results.md\r\n- Dependency graph: docs/utils/dependency_graph.md\r\n\r\n## Quick Start (pin by tag)\r\n\r\n\r\nIn build.zig:\r\n\r\n\r\nIn code:\r\n\r\n",
      "prerelease": true,
      "published_at": "2025-11-12T23:58:51Z",
      "html_url": "https://github.com/eakova/zigbeam/releases/tag/v0.1.0-rc3",
      "assets": [
        {
          "name": "arc_benchmark_results.md",
          "url": "https://github.com/eakova/zigbeam/releases/download/v0.1.0-rc3/arc_benchmark_results.md",
          "size": 1548,
          "content_type": "text/markdown"
        },
        {
          "name": "arcpool_benchmark_results.md",
          "url": "https://github.com/eakova/zigbeam/releases/download/v0.1.0-rc3/arcpool_benchmark_results.md",
          "size": 984,
          "content_type": "text/markdown"
        },
        {
          "name": "thread_local_cache_benchmark_results.md",
          "url": "https://github.com/eakova/zigbeam/releases/download/v0.1.0-rc3/thread_local_cache_benchmark_results.md",
          "size": 2303,
          "content_type": "text/markdown"
        },
        {
          "name": "dependency_graph.md",
          "url": "https://github.com/eakova/zigbeam/releases/download/v0.1.0-rc3/dependency_graph.md",
          "size": 5068,
          "content_type": "text/markdown"
        }
      ]
    }
  ],
  "owner_company": null,
  "owner_location": "Istanbul",
  "owner_blog": null,
  "owner_twitter_username": null,
  "owner_followers": 7,
  "owner_following": 10,
  "owner_created_at": "2012-03-20T12:31:29Z",
  "license": "Apache-2.0",
  "category": "library"
}