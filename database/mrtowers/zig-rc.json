{
  "name": "zig-rc",
  "owner": "mrtowers",
  "repo": "zig-rc",
  "description": "Reference counting module for Zig",
  "type": "package",
  "topics": [
    "zig-package",
    "library",
    "reference-counting",
    "zig",
    "zig-lib",
    "zig-library"
  ],
  "stars": 1,
  "forks": 0,
  "watchers": 1,
  "updated_at": "2026-01-27T09:04:13Z",
  "readme": "> [!WARNING]\n> **zig-rc** is still WIP. I'm still doing **breaking changes**\n\n# Reference Counting Smart Pointer for Zig\n\nA simple and efficient implementation of a reference counting smart pointer for Zig. This library helps manage the lifetime of heap-allocated objects by automatically tracking references and freeing memory when no references remain.\n\n## Features\n\n- **Automatic Memory Management**: Simplifies memory handling by automatically freeing unused resources.\n- **Thread-Safe**: Includes support for atomic reference counting for multithreaded applications via Arc.\n- **Lightweight**: Designed to be minimal and efficient.\n- **Auto deinit**: Rc and Arc support an optional auto_deinit mode. When enabled, the managed value is automatically deinitialized on the final destroy. If the wrapped type defines a deinit() method, it will be called before the memory is released.\n- **Weak Pointers**: Provide non-owning references to managed values without increasing the reference count. Weak pointers do not keep the value alive and can be safely upgraded to a strong `Rc`/`Arc` only if the value still exists. This helps prevent reference cycles and memory leaks, especially in graph-like data structures.\n\n## Installation\n\n### Adding to Your Project\n\n```bash\nzig fetch --save git+https://github.com/mrtowers/zig-rc\n```\nIn `build.zig`:\n\n```zig\nconst rc = b.dependency(\"zig-rc\", .{\n    .target = target,\n    .optimize = optimize,\n});\nyour_app.root_module.addImport(\"rc\", rc.module(\"rc\"));\n```\n\n## Usage\n\n### Basic Example\n\n```zig\nconst std = @import(\"std\");\nconst rc = @import(\"rc\");\nconst Allocator = std.mem.Allocator;\n\nconst User = struct {\n    name: []u8,\n    allocator: Allocator,\n\n    pub fn deinit(self: *const User) u8 { //run automatically by `auto_deinit`\n        self.allocator.free(self.name);\n        return 0;\n    }\n};\n\npub fn main() !void {\n    var gpa = std.heap.DebugAllocator(.{}).init;\n    defer _ = gpa.deinit();\n\n    var ptr = try rc.Rc(User).init(gpa.allocator(), User{\n        .allocator = gpa.allocator(),\n        .name = try gpa.allocator().dupe(u8, \"some user\"),\n    }, .{\n        .auto_deinit = true,\n    });\n    var ptr2 = ptr.ref();\n    _ = ptr.deref();\n    _ = ptr2.deref(); // object cleaned up here\n\n}\n```\n\n### Weak pointers\n```zig\nconst std = @import(\"std\");\nconst rc = @import(\"rc\");\nconst Rc = rc.Rc;\nconst WeakRc = rc.WeakRc;\n\npub fn main() !void {\n    var gpa = std.heap.DebugAllocator(.{}).init;\n    defer _ = gpa.deinit();\n\n    const ptr = try Rc(i32).init(gpa.allocator(), 5, .{});\n    defer ptr.deref();\n\n    usingWeak(ptr.weak());\n}\n\nfn usingWeak(weak: WeakRc(i32)) void {\n    defer weak.deref(); //deref every instance\n\n    if (weak.upgrade()) |number_ref| {\n        defer number_ref.deref();\n        std.debug.print(\"number is: {d}\\n\", .{number_ref.value.*});\n    }\n}\n\n```\n\n## License\n\nThis project is licensed under the MIT License. See the [LICENSE](./LICENSE) file for details.\n\n## Contributing\n\nContributions are welcome! Feel free to open issues or submit pull requests.\n\nAlso you can donate me [here](https://buymeacoffee.com/mrtowers), this helps alot! (mainly because i drink a lot of coffee)\n\nHappy coding! ðŸŽ‰\n\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/30564150?u=90af66c587cf6ca836d3a5bfb581ebfd6272f302&v=4",
  "releases": [
    {
      "tag_name": "0.4.0",
      "name": "0.4.0",
      "body": "## What's Changed\r\n* added standard format functions by @mrtowers in https://github.com/mrtowers/zig-rc/pull/14\r\n* added asserts by @mrtowers in https://github.com/mrtowers/zig-rc/pull/15\r\n* Weak pointers - WeakRc, WeakArc by @mrtowers in https://github.com/mrtowers/zig-rc/pull/16\r\n\r\n\r\n**Full Changelog**: https://github.com/mrtowers/zig-rc/compare/0.3.0...0.4.0",
      "prerelease": false,
      "published_at": "2026-01-04T11:03:58Z",
      "html_url": "https://github.com/mrtowers/zig-rc/releases/tag/0.4.0",
      "assets": []
    },
    {
      "tag_name": "0.3.0",
      "name": "0.3.0",
      "body": "A lot of rework done, major breakage but the design is simpler now\r\n\r\n## What's Changed\r\n* V0.3.0 by @mrtowers in https://github.com/mrtowers/zig-rc/pull/9\r\n\r\n## New Contributors\r\n* @mrtowers made their first contribution in https://github.com/mrtowers/zig-rc/pull/9\r\n\r\n**Full Changelog**: https://github.com/mrtowers/zig-rc/compare/0.2.0...0.3.0",
      "prerelease": false,
      "published_at": "2025-12-24T07:52:01Z",
      "html_url": "https://github.com/mrtowers/zig-rc/releases/tag/0.3.0",
      "assets": []
    },
    {
      "tag_name": "0.2.0",
      "name": "0.2.0",
      "body": null,
      "prerelease": false,
      "published_at": "2025-02-20T21:41:19Z",
      "html_url": "https://github.com/mrtowers/zig-rc/releases/tag/0.2.0",
      "assets": []
    },
    {
      "tag_name": "0.1.0",
      "name": "0.1.0",
      "body": "first release of zig-rc",
      "prerelease": false,
      "published_at": "2025-01-24T17:48:14Z",
      "html_url": "https://github.com/mrtowers/zig-rc/releases/tag/0.1.0",
      "assets": []
    }
  ],
  "owner_company": null,
  "owner_location": null,
  "owner_blog": null,
  "owner_twitter_username": null,
  "owner_followers": 1,
  "owner_following": 7,
  "owner_created_at": "2017-07-30T05:00:57Z",
  "license": "MIT",
  "category": "library"
}