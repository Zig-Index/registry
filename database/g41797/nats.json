{
  "name": "nats",
  "owner": "g41797",
  "repo": "nats",
  "description": "Zig client for NATS Core and JetStream",
  "type": "package",
  "topics": [
    "jetstream",
    "nats",
    "zig-library",
    "zig-package"
  ],
  "stars": 34,
  "forks": 1,
  "watchers": 3,
  "updated_at": "2026-01-06T19:51:17Z",
  "dependencies": [
    {
      "name": "mailbox",
      "url": "git+https://github.com/g41797/mailbox#v0.0.13",
      "hash": "mailbox-0.0.13-a-vFm3lcAAD33j3q2G2Hj6lnDahYuT1ESGBq99aVehow"
    },
    {
      "name": "zul",
      "url": "vendor/zul"
    }
  ],
  "minimum_zig_version": "0.15.0",
  "readme": "![](_logo/nats-streams-ordersimage.png)\n\n![](_logo/logo.png)\n\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)\n[![CI](https://github.com/g41797/nats/actions/workflows/linux.yml/badge.svg)](https://github.com/g41797/nats/actions/workflows/linux.yml)\n[![CI](https://github.com/g41797/nats/actions/workflows/mac.yml/badge.svg)](https://github.com/g41797/nats/actions/workflows/mac.yml)\n\n## Straight to the point\n\nLet's try to program the prototype of the system shown in [the picture above](_logo/nats-streams-ordersimage.png).\n\nKey points:\n- Many related _subjects_ are stored in a _Stream_\n- _Consumers_ can have different modes of operation and receive just _subsets_ of the messages\n- Multiple _Acknowledgement_ modes are supported\n\nFlow:\n- A new _order_ \n    - arrives on ORDERS.received, \n    - gets sent to the **NEW** _Consumer_ who, on success, \n    - will create a new message on ORDERS.processed\n- The ORDERS.processed message\n  - again enters the Stream \n  - where a **DISPATCH** Consumer receives it\n  - and once processed it will create an ORDERS.completed message\n  - which will again enter the Stream\n- All messages are delivered to a MONITOR Consumer\n  - who pushes them to monitor\n\nAcknowledgements:\n- **NEW** and **DISPATCH** Consumers acknowledged all received messages to ensure no order is missed.\n- MONITOR Consumer receives all messages without acknowledge.\n\nYou can find more details on [NATS Example page](https://docs.nats.io/nats-concepts/jetstream/consumers/example_configuration)\n\n### Stream creation\n```zig\nconst DefaultConnectOpts: protocol.ConnectOpts = .{};\nconst STREAM: []const u8 = \"ORDERS\";\n\nvar js: JetStream = try JetStream.CONNECT(std.testing.allocator, DefaultConnectOpts);\ndefer js.DISCONNECT();\n\nvar CONF: protocol.StreamConfig = .{ .name = STREAM, .subjects = &.{ \"ORDERS.*\" } };\n\ntry js.CREATE(&CONF);\n```\n\n### Submit(publish) orders to the stream\n```zig\nvar submitter: JetStream = try JetStream.CONNECT(std.testing.allocator, DefaultConnectOpts);\ndefer submitter.DISCONNECT();\n\ntry submitter.PUBLISH(\"ORDERS.received\", null, \"order-1 ...\");\n```\n\n### Consume received orders\n```zig\nconst DeleteConsumer: bool = true;\n\nconst conf: ConsumerConfig = .{\n    .durable_name = \"NEW\",\n    .filter_subject = \"ORDERS.received\",\n};\n\nvar NEW: Consumer = try Consumer.START(std.testing.allocator, DefaultConnectOpts, STREAM, &conf);\ndefer NEW.STOP(DeleteConsumer);\n\nvar order = try NEW.CONSUME(protocol.SECNS * 2);\n.... process order ....\ntry NEW.ACK(order.?, true);\ntry NEW.PUBLISH(\"ORDERS.processed\", null, \"...\");\n```\n### Consume processed orders\n```zig\nconst DeleteConsumer: bool = true;\n\nconst conf = .{\n    .durable_name = \"DISPATCH\",\n    .filter_subject = \"ORDERS.processed\",\n};\n\nvar DISPATCH: Consumer = try Consumer.START(std.testing.allocator, DefaultConnectOpts, STREAM, &conf);\ndefer DISPATCH.STOP(DeleteConsumer);\n\norder = try DISPATCH.CONSUME(protocol.SECNS * 2);\n.... process order ....\ntry DISPATCH.ACK(order.?, false);\ntry DISPATCH.PUBLISH(\"ORDERS.completed\", null, \"...\");\n```\n### Track all orders(messages)\n```zig\nvar subscriber: Subscriber = try Subscriber.SUBSCRIBE(std.testing.allocator, DefaultConnectOpts, STREAM, \"ORDERS.*\");\ndefer subscriber.UNSUBSCRIBE();\n\nwhile (true) {\n    const pmsg = try subscriber.NEXT(protocol.SECNS * 5);\n    ... pushes info to monitor ...\n    subscriber.REUSE(pmsg);\n}\n```\n## Installation\nAdd *nats* to build.zig.zon:\n```bach\nzig fetch --save=nats git+https://github.com/g41797/nats\n```\n\nAdd *nats* to build.zig:\n```zig\nconst nats = b.dependency(\"nats\", .{\n    .target = target,\n    .optimize = optimize,\n});\n\nconst lib = b.addStaticLibrary(..);\nlib.root_module.addImport(\"nats\", nats.module(\"nats\"));\n\nconst lib_unit_tests = b.addTest(...);\nlib_unit_tests.root_module.addImport(\"nats\", nats.module(\"nats\"));\n```\n\nImport *nats*:\n```zig\nconst nats = @import(\"nats\");\n```\n\n## Credits\nThe project is largely inspired by the very existence of [Nats client for php](https://github.com/basis-company/nats.php).\n\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/9116281?u=2db219a6136b07d51afe2002b80a7e47b3b37427&v=4",
  "releases": [],
  "owner_company": null,
  "owner_location": null,
  "owner_blog": null,
  "owner_twitter_username": null,
  "owner_followers": 14,
  "owner_following": 9,
  "owner_created_at": "2014-10-09T16:33:35Z",
  "homepage": "https://g41797.github.io/nats/",
  "license": "MIT",
  "category": "library"
}