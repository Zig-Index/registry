{
  "name": "beanstalkz",
  "owner": "g41797",
  "repo": "beanstalkz",
  "description": "Zig client for Beanstalkd - simple and fast general purpose work queue",
  "type": "package",
  "topics": [
    "background-jobs",
    "beanstalkd",
    "job-queue",
    "submitter",
    "worker",
    "zig-library",
    "zig-package",
    "producer",
    "consumer"
  ],
  "stars": 6,
  "forks": 0,
  "watchers": 1,
  "updated_at": "2025-05-08T03:44:28Z",
  "dependencies": [
    {
      "name": "example",
      "url": "https://example.com/foo.tar.gz",
      "hash": "..."
    }
  ],
  "minimum_zig_version": "0.11.0",
  "readme": "![](_logo/1p0c_8c0637.jpg)\n\n# Zig client for Beanstalkd\n[![CI](https://github.com/g41797/beanstalkz/actions/workflows/ci.yml/badge.svg)](https://github.com/g41797/beanstalkz/actions/workflows/ci.yml)\n\n\n[Beanstalkd](https://pmatseykanets.github.io/beanstalkd-docs/) is\n>             Simple and fast general purpose work queue.\n>         The beauty of Beanstalkd is its absolute simplicity.\n\n\nActually you can use just 3 commands\n\n- submit(put) job into the queue\n- take(reserve) job from the queue for processing\n- delete job from the queue\n\n```zig\n    // On producer side\n    _ = try producer.put(1, 0, 120, \"job data\");\n    \n    // On worker side\n    var job: Job = .{};\n    try job.init(allocator);\n    defer job.deinit();\n    \n    try worker.reserve(10, &job);\n        \n    // job.body().? - contains \"job data\"\n    // process job\n    // ...........\n    \n    // job.id().?   - contains job id\n    try worker.delete(job.id().?);\n```\nBeanstalkd is the part of main distros, you can install it using [appropriate package manager](https://pmatseykanets.github.io/beanstalkd-docs/guide/installation.html).\n\nAnd of course you can use Beanstalkd [with Docker](https://hub.docker.com/search?q=beanstalkd).  \n\nIf you don't have experience using `Beanstalkd`, it's a good idea to read:\n- [beanstalkd protocol](https://pmatseykanets.github.io/beanstalkd-docs/protocol/)\n- [beanstalkd FAQ](https://pmatseykanets.github.io/beanstalkd-docs/resources/faq.html)\n\n## Job\n\n*Job* is opaque array of bytes. Beanstalkd does not force you to use a specific data format.\n\nAfter being placed in a queue, job can be in the following states:\n\n- delayed (waiting for time-out before moving to next state) \n- ready (for processing)\n- reserved (processed)\n- buried (failed)\n\n\n## Job lifecycle supported by beanstalkz\n```txt\n  'put' with delay                                'delete'             \n  ----------------> [DELAYED] ---------------------------X\n                        |     \n                        | 'kick-job' or time passes\n                        |              \n  'put'                 v     'reserve'           'delete'\n  -----------------> [READY] ---------> [RESERVED] ------X\n                       |  ^                 |  \n                       |  |                 | 'bury'\n                       |  |   'kick-job'    v     'delete'\n                       |   `------------ [BURIED]  ------X    \n                       |                  \n                       |                          'delete'\n                        `--------------------------------X\n```\n\n\n## Tube\n\nInstead of the term _queue_ Beanstalkd uses term _tube_,\nthis explains the picture above.\n\n*Tube* is _named queue_. \n>Tubes are created on demand whenever they are referenced.\n> \n> If a tube is empty (that is, it contains no ready, delayed, or buried jobs)\n> \n> and no client refers to it, it will be deleted.\n\nIf tube was not referenced, Beanstalkd creates *\"default\"* tube.\n\nEvery tube has 3 sub-queues:\n\n- delay - contains jobs in _delayed_ state\n- ready - contains jobs in _ready_ or _reserved_ states\n- bury (dead-letter) - contains failed jobs\n\n## Supported commands\n\n| Name                                                                                     |                 Description                  |                                                                API                                                                |\n|:-----------------------------------------------------------------------------------------|:--------------------------------------------:|:---------------------------------------------------------------------------------------------------------------------------------:|\n| [use](https://github.com/beanstalkd/beanstalkd/blob/master/doc/protocol.txt#L178)        |           Set current tube(queue)            |                   [use(tname: []const u8)](https://github.com/g41797/beanstalkz/blob/main/src/client.zig#L116)                    |\n| [put](https://github.com/beanstalkd/beanstalkd/blob/master/doc/protocol.txt#L124)        |          Submit job to current tube          |    [put(pri: u32, delay: u32, ttr: u32, job: []const u8)](https://github.com/g41797/beanstalkz/blob/main/src/client.zig#L139)     |\n| [watch](https://github.com/beanstalkd/beanstalkd/blob/master/doc/protocol.txt#L347)      |   Subscribe to jobs submitted to the tube    |                  [watch(tname: []const u8)](https://github.com/g41797/beanstalkz/blob/main/src/client.zig#L243)                   |\n| [reserve](https://github.com/beanstalkd/beanstalkd/blob/master/doc/protocol.txt#L203)    |                 Consume job                  |              [reserve(timeout: u32, job: *Job)](https://github.com/g41797/beanstalkz/blob/main/src/client.zig#L272)               |\n| [bury](https://github.com/beanstalkd/beanstalkd/blob/master/doc/protocol.txt#L310)       |    Put job to the failed(\"buried\") state     |                   [bury(id: u32, pri: u32)](https://github.com/g41797/beanstalkz/blob/main/src/client.zig#L308)                   |\n| [kick-job](https://github.com/beanstalkd/beanstalkd/blob/master/doc/protocol.txt#L424)   | Put delayed or failed job to the ready state |                      [kick_job(id: u32)](https://github.com/g41797/beanstalkz/blob/main/src/client.zig#L342)                      |\n| [ignore](https://github.com/beanstalkd/beanstalkd/blob/master/doc/protocol.txt#L363)     |                 Un-subscribe                 |                  [ignore(tname: []const u8)](https://github.com/g41797/beanstalkz/blob/main/src/client.zig#L383)                  |\n| [delete](https://github.com/beanstalkd/beanstalkd/blob/master/doc/protocol.txt#L271)     |          Remove job from the system          |                       [delete(id: u32)](https://github.com/g41797/beanstalkz/blob/main/src/client.zig#L369)                       |\n| [state](https://github.com/beanstalkd/beanstalkd/blob/master/doc/protocol.txt#L465)      |                Get job state                 |                       [state(id: u32)](https://github.com/g41797/beanstalkz/blob/main/src/client.zig#L198)                        |\n| connect                                                                                  |                   Connect                    | [connect(allocator: Allocator, addr: ?[]const u8, port: ?u16)](https://github.com/g41797/beanstalkz/blob/main/src/client.zig#L48) |\n| [disconnect](https://github.com/beanstalkd/beanstalkd/blob/master/doc/protocol.txt#L728) |                  Disconnect                  |                         [disconnect()](https://github.com/g41797/beanstalkz/blob/main/src/client.zig#L84)                         |\n  \n \n\n\n## Installation\n\nAdd *beanstalkz* to build.zig.zon:\n```bach\nzig fetch --save=beanstalkz git+https://github.com/g41797/beanstalkz\n```\n\nAdd *beanstalkz* to build.zig:\n```zig\n    const beanstalkz = b.dependency(\"beanstalkz\", .{\n        .target = target,\n        .optimize = optimize,\n    });\n\n    const lib = b.addStaticLibrary(..);\n    lib.root_module.addImport(\"beanstalkz\", beanstalkz.module(\"beanstalkz\"));\n\n    const lib_unit_tests = b.addTest(...);\n    lib_unit_tests.root_module.addImport(\"beanstalkz\", beanstalkz.module(\"beanstalkz\"));\n```\n\nImport *beanstalkz*:\n```zig\nconst beanstalkz = @import(\"beanstalkz\");\n```\n\n\n## Credits\nContent of README is heavily inspired by \n- [README of jackd](https://github.com/getjackd/jackd#jackd)\n- [Giant Killing with Beanstalkd](https://www.sitepoint.com/giant-killing-with-beanstalkd/)\n \n## License\n[MIT](LICENSE)\n\n<br />\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/9116281?u=2db219a6136b07d51afe2002b80a7e47b3b37427&v=4",
  "releases": [],
  "owner_company": null,
  "owner_location": null,
  "owner_blog": null,
  "owner_twitter_username": null,
  "owner_followers": 11,
  "owner_following": 7,
  "owner_created_at": "2014-10-09T16:33:35Z",
  "license": "MIT",
  "category": "library"
}