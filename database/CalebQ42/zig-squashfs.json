{
  "name": "zig-squashfs",
  "owner": "CalebQ42",
  "repo": "zig-squashfs",
  "description": "Learning zig via squashfs",
  "type": "package",
  "topics": [
    "zig",
    "zig-library",
    "zig-package",
    "zig-lib"
  ],
  "stars": 4,
  "forks": 0,
  "watchers": 1,
  "updated_at": "2026-03-01T08:28:55Z",
  "minimum_zig_version": "0.15.2",
  "readme": "# zig-squashfs\n\nThis is my experiments to learn Zig. Might amount to something. Might not.\n\nA library and application to decompress or view squashfs archives.\n\n## Current State\n\nOverall works, but currently is missing some features ([see below](#capabilities)) and has significantly slow performance compared to `unsquashfs` ([see below](#performance)).\n\n## Build options\n\n> `-Duse_c_libs=true`\n\nInstead of using Zig's standard library for decompression, use the system's C libraries. Has the benefit of being much faster and enabling LZO and LZ4 decompression.\n\n> `-Dallow_lzo=true`\n\nEnable compiling with LZO decompression support. The LZO library currently has some issues with Zig when imported so it's easier to just disable it by default. Only has an effect when using `-Duse_c_libs=true`.\n\n> `-Dvalgrind=true`\n\nJust sets the valgrind build option.\n\n> `-Dversion=0.0.0`\n\nSets the version of `unsquashfs` shown when `--version` is passed.\n\n## Capabilities\n\nMost features are present except for the following:\n\n* xattrs are not applied on extraction\n* When using Zig decompression libraries then lzo and lz4 compression types are unavailable. I don't _currently_ plan on spending the time to find and validate a library since neither is popular.\n* When using C decompression libraries, lzo is not supported by default due to [some issues](#build-considerations). If it's needed it's trivial to fix, but it's easiest to just leave it disabled.\n\n## Performance\n\nThis is some basic observation's I've made about this library's performance when compared to `unsquashfs`. Unless otherwise stated, most observations were made when extracting my test archive (which is fairly small and uses zstd compression) and with `--release=fast`.\n\n* Under ideal circumstances, my library is ~70% slower (.11s vs .18s)\n* Mutli-threading on small archives noticably increases extraction times (when using C libraries) (.18s vs .57s). This should theoretically reverse on larger archives with many inodes, but I haven't tested that yet.\n* Using Zig libraries *significantly* increases decompression time by ~600% under ideal circumstances.\n\nTimes:\n\n* *unsquashfs*: .11s\n* *C-libs, single-threaded*: .18s\n* *C-libs, multi-threaded*: .57s\n* *Zig-libs, single-threaded*: 5.87s\n* *Zig-libs, multi-threaded*: 1.10s\n\n## Build considerations\n\nCompilation without `use_c_libs` works completely fine, but Zig has issues with some symbols from the lzo library that needs to be manually fixed. In particular you need to fix the definitions for `lzo_bytep` and `lzo_voidp` to be `*u8` and `?*anyopaque` respectively. Due to this, you have to manually enable LZO decompression using `-Dallow_lzo=true` when building.\n\n```zig\npub const lzo_bytep = @compileError(\"unable to translate C expr: unexpected token ''\");\n// /usr/include/lzo/lzoconf.h:148:9\npub const lzo_charp = @compileError(\"unable to translate C expr: unexpected token ''\");\n// /usr/include/lzo/lzoconf.h:149:9\npub const lzo_voidp = @compileError(\"unable to translate C expr: unexpected token ''\");\n```\n\nto\n\n```zig\npub const lzo_bytep = *u8;\n// /usr/include/lzo/lzoconf.h:148:9\npub const lzo_charp = @compileError(\"unable to translate C expr: unexpected token ''\");\n// /usr/include/lzo/lzoconf.h:149:9\npub const lzo_voidp = ?*anyopaque;\n```\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/8998514?u=35e3a7483b8b15120c39776dbf1f4a5be21833c6&v=4",
  "releases": [
    {
      "tag_name": "v0.0.5",
      "name": "v0.0.5",
      "body": "* Add more explicit `Allocator` arguments to many functions. Previously the library would largely use the `Archive`'s allocator.\r\n* Fixed a couple bugs relating to extraction\r\n  * Fixed bug from setting a file's modified time\r\n  * Fixed bug from multi-threading `WaitGroup`\r\n* Made `ExtractionOptions` public.\r\n* Moved setting thread count to `ExtractionOptions` instead of when creating an `Archive`.\r\n  * To facilitate this, `Default` is now a function that returns an error union (`VerboseDefault` now also returns an error union)\r\n  * There's now a `SingleThreadedDefault` option.\r\n* Removed `initAdvanced` in favor of just `init`.\r\n\r\n**Full Changelog**: https://github.com/CalebQ42/zig-squashfs/compare/v0.0.3...v0.0.5",
      "prerelease": true,
      "published_at": "2026-03-01T04:39:59Z",
      "html_url": "https://github.com/CalebQ42/zig-squashfs/releases/tag/v0.0.5",
      "assets": [
        {
          "name": "unsquashfs-x86_64-c-libs",
          "url": "https://github.com/CalebQ42/zig-squashfs/releases/download/v0.0.5/unsquashfs-x86_64-c-libs",
          "size": 694368,
          "content_type": "application/octet-stream"
        },
        {
          "name": "unsquashfs-x86_64",
          "url": "https://github.com/CalebQ42/zig-squashfs/releases/download/v0.0.5/unsquashfs-x86_64",
          "size": 3530512,
          "content_type": "application/octet-stream"
        }
      ]
    },
    {
      "tag_name": "v0.0.3",
      "name": "v0.0.3",
      "body": "* `unsquashfs` verbose flag\r\n\r\n**Full Changelog**: https://github.com/CalebQ42/zig-squashfs/compare/v0.0.2...v0.0.3",
      "prerelease": true,
      "published_at": "2026-02-13T07:38:08Z",
      "html_url": "https://github.com/CalebQ42/zig-squashfs/releases/tag/v0.0.3",
      "assets": [
        {
          "name": "unsquashfs",
          "url": "https://github.com/CalebQ42/zig-squashfs/releases/download/v0.0.3/unsquashfs",
          "size": 3520008,
          "content_type": "application/octet-stream"
        },
        {
          "name": "unsquashfs-c-libs",
          "url": "https://github.com/CalebQ42/zig-squashfs/releases/download/v0.0.3/unsquashfs-c-libs",
          "size": 687336,
          "content_type": "application/octet-stream"
        }
      ]
    },
    {
      "tag_name": "v0.0.2",
      "name": "v0.0.2",
      "body": "* File/folder mod times are now set when extracted.\r\n* Fixed files not being closed properly causing FD quota errors.",
      "prerelease": true,
      "published_at": "2026-02-12T14:59:10Z",
      "html_url": "https://github.com/CalebQ42/zig-squashfs/releases/tag/v0.0.2",
      "assets": [
        {
          "name": "unsquashfs",
          "url": "https://github.com/CalebQ42/zig-squashfs/releases/download/v0.0.2/unsquashfs",
          "size": 3487640,
          "content_type": "application/octet-stream"
        },
        {
          "name": "unsquashfs-c-libs",
          "url": "https://github.com/CalebQ42/zig-squashfs/releases/download/v0.0.2/unsquashfs-c-libs",
          "size": 659264,
          "content_type": "application/octet-stream"
        }
      ]
    },
    {
      "tag_name": "v0.0.1",
      "name": "Initial Release",
      "body": "* `unsquashfs` should mostly work, but it's arguments are limited to just `-d` and `-o` right now.\r\n  * Further limitation are listed in the README.",
      "prerelease": true,
      "published_at": "2026-02-12T10:33:05Z",
      "html_url": "https://github.com/CalebQ42/zig-squashfs/releases/tag/v0.0.1",
      "assets": [
        {
          "name": "unsquashfs",
          "url": "https://github.com/CalebQ42/zig-squashfs/releases/download/v0.0.1/unsquashfs",
          "size": 3469936,
          "content_type": "application/octet-stream"
        },
        {
          "name": "unsquashfs-c-libs",
          "url": "https://github.com/CalebQ42/zig-squashfs/releases/download/v0.0.1/unsquashfs-c-libs",
          "size": 653024,
          "content_type": "application/octet-stream"
        }
      ]
    }
  ],
  "owner_bio": "Coding is cool",
  "owner_company": null,
  "owner_location": "United States",
  "owner_blog": "https://darkstorm.tech",
  "owner_twitter_username": "CalebQ42",
  "owner_followers": 17,
  "owner_following": 2,
  "owner_created_at": "2014-10-02T15:38:45Z",
  "license": "MIT",
  "category": "library"
}