{
  "name": "zig-zmq",
  "owner": "jrosberg",
  "repo": "zig-zmq",
  "description": "ZMQ with ZIG ⚡️",
  "type": "package",
  "topics": [
    "zig-library",
    "zeromq",
    "zig-package"
  ],
  "stars": 15,
  "forks": 0,
  "watchers": 1,
  "updated_at": "2026-02-24T06:23:02Z",
  "minimum_zig_version": "0.15.0",
  "readme": "# zmq.zig\n\nA pure Zig implementation of ZeroMQ with ZMTP 3.1 protocol support.\n\nNote that this is an experimental implementation intended for learning and exploration purposes. It may not cover all edge cases or be suitable for production use.\n\n## Features\n\n- **ZMTP 3.1 Protocol**: Full implementation of ZeroMQ Message Transport Protocol\n- **Socket Types**: REQ/REP (request-reply) and PUB/SUB (publish-subscribe) patterns\n- **Multi-Connection Support**: PUB sockets support multiple concurrent subscribers\n- **Subscription Filtering**: Topic-based message filtering for PUB/SUB\n- **Python Interoperability**: Full compatibility with PyZMQ clients\n- **NULL Security**: ZMTP 3.1 NULL mechanism (no security)\n\n## Requirements\n\n- Zig 0.15.2\n- Python 3.x with PyZMQ (optional, for interoperability tests)\n\n## Installation\n\n```shell\n\n# Clone the repository\ngit clone https://github.com/jrosberg/zig-zmq.git\ncd zmq.zig\n\n# Build the project\nzig build\n\n# Run tests\nzig build test\n```\n\n## Usage\n\n1. Add `zig-zmq` as a dependency in your Zig project.\n\n```shell\n# get latest version\nzig fetch --save git+https://github.com/jrosberg/zig-zmq.git\n```\n2. add `zmq` to your `build.zig` dependencies:\n\n```zig\nconst zmq = b.dependency(\"zmq_zig\", .{\n    .target = target,\n    .optimize = optimize,\n});\n\n// Replace `exe` with your actual library or executable\nexe.root_module.addImport(\"zmq\", zmq.artifact(\"zmq_zig\").root_module);\n```\n\n## Quick Start\n\n### REQ/REP Pattern (Request-Reply)\n\n**Server (REP):**\n```zig\nconst std = @import(\"std\");\nconst zmq = @import(\"zmq\");\n\npub fn main() !void {\n    const allocator = std.heap.page_allocator;\n\n    const ctx = try zmq.Context.init(allocator);\n    defer ctx.deinit();\n\n    const sock = try ctx.socket(.REP);\n    defer sock.close();\n\n    try sock.bind(\"tcp://*:42123\");\n    try sock.accept();\n\n    var buffer: [512]u8 = undefined;\n    while (true) {\n        const len = try sock.recv(&buffer, 0);\n        std.debug.print(\"Received: {s}\\n\", .{buffer[0..len]});\n\n        try sock.send(\"Reply message\", .{});\n    }\n}\n```\n\n**Client (REQ):**\n```zig\nconst ctx = try zmq.Context.init(allocator);\ndefer ctx.deinit();\n\nconst sock = try ctx.socket(.REQ);\ndefer sock.close();\n\ntry sock.connect(\"tcp://127.0.0.1:42123\");\n\ntry sock.send(\"Hello server\", .{});\n\nvar buffer: [512]u8 = undefined;\nconst len = try sock.recv(&buffer, 0);\nstd.debug.print(\"Got reply: {s}\\n\", .{buffer[0..len]});\n```\n\n### PUB/SUB Pattern (Publish-Subscribe)\n\n**Publisher (PUB):**\n```zig\nconst ctx = try zmq.Context.init(allocator);\ndefer ctx.deinit();\n\nconst sock = try ctx.socket(.PUB);\ndefer sock.close();\n\ntry sock.bind(\"tcp://*:5555\");\ntry sock.accept();\n\n// Publish messages with topics\ntry sock.send(\"weather Temperature: 25°C\", .{});\ntry sock.send(\"news Breaking news!\", .{});\n```\n\n**Subscriber (SUB):**\n```zig\nconst ctx = try zmq.Context.init(allocator);\ndefer ctx.deinit();\n\nconst sock = try ctx.socket(.SUB);\ndefer sock.close();\n\ntry sock.connect(\"tcp://127.0.0.1:5555\");\n\n// Subscribe to specific topics\ntry sock.subscribe(\"weather\");\ntry sock.subscribe(\"news\");\n// Or subscribe to all messages\n// try sock.subscribe(\"\");\n\nvar buffer: [512]u8 = undefined;\nwhile (true) {\n    const len = try sock.recv(&buffer, 0);\n    std.debug.print(\"Received: {s}\\n\", .{buffer[0..len]});\n}\n```\n\n## API Reference\n\n### Context\n\n```zig\n// Create a new context\nconst ctx = try zmq.Context.init(allocator);\ndefer ctx.deinit();\n\n// Create a socket\nconst sock = try ctx.socket(.REQ);  // or .REP, .PUB, .SUB\n```\n\n### Socket Operations\n\n```zig\n// Binding (server mode)\ntry sock.bind(\"tcp://*:5555\");\ntry sock.accept();  // Accept connections\n\n// Connecting (client mode)\ntry sock.connect(\"tcp://127.0.0.1:5555\");\n\n// Sending\ntry sock.send(\"message\", .{});\n\n// Receiving\nvar buffer: [1024]u8 = undefined;\nconst len = try sock.recv(&buffer, 0);\n\n// Subscription (SUB sockets only)\ntry sock.subscribe(\"topic\");      // Subscribe to topic\ntry sock.unsubscribe(\"topic\");    // Unsubscribe\ntry sock.subscribe(\"\");           // Subscribe to all\n```\n\n### Socket Types\n\n- `SocketType.REQ` - Request socket (client)\n- `SocketType.REP` - Reply socket (server)\n- `SocketType.PUB` - Publisher socket (broadcasts)\n- `SocketType.SUB` - Subscriber socket (receives filtered)\n\n### SendFlags\n\n```zig\n// Default (blocking)\ntry sock.send(\"message\", .{});\n\n// With flags\ntry sock.send(\"message\", .{ .dontwait = true });\ntry sock.send(\"message\", .{ .sndmore = true });\ntry sock.send(\"message\", .{ .dontwait = true, .sndmore = true });\n```\n\nAvailable flags:\n- `dontwait`: Non-blocking send (ZMQ_DONTWAIT)\n- `sndmore`: More message parts follow (ZMQ_SNDMORE)\n\n## Project Structure\n\n```\nzmq.zig/\n├── src/\n│   ├── zmq.zig           # Main module exports\n│   ├── main.zig          # Example REQ client\n│   └── zmq/\n│       ├── context.zig   # Context management\n│       ├── socket.zig    # Socket implementation\n│       ├── types.zig     # Socket types and enums\n│       ├── protocol.zig  # ZMTP protocol (Greeting, Commands)\n│       └── zmtp.zig      # Frame engine and ZMTP details\n├── examples/\n│   ├── rep_server.zig    # REP server example\n│   ├── pub_server.zig    # PUB server example\n│   ├── pub_multi_server.zig  # Multi-connection PUB\n│   ├── sub_client.zig    # SUB client example\n│   └── simple_multi.zig  # Simple multi-connection demo\n├── testing/\n│   ├── test_bind.sh      # Automated test suite\n│   ├── test_zmq_client.py    # Python REQ client\n│   ├── test_zmq_server.py    # Python REP server\n│   ├── ZMQSubClient.py   # Python SUB client\n│   └── ZMQPubServer.py   # Python PUB server\n└── build.zig             # Build configuration\n```\n\n## Build Commands\n\n```bash\n# Build all\nzig build\n\n# Run examples\nzig build run          # REQ client\nzig build run-rep      # REP server\nzig build run-pub      # PUB server\nzig build run-sub      # SUB client\n\n# Run tests\nzig build test\n./testing/test_bind.sh  # Full test suite with Python interop\n```\n\n## Testing\n\nThe project includes comprehensive tests:\n\n```bash\n# Automated test suite\n./testing/test_bind.sh\n\n# Individual tests\n./testing/test_multi_connection.sh\n./testing/test_pubsub.sh\n```\n\nTests validate:\n- ✅ REQ/REP pattern (Zig-to-Zig)\n- ✅ PUB/SUB pattern (Zig-to-Zig)\n- ✅ Python REQ client → Zig REP server\n- ✅ Python SUB client → Zig PUB server\n- ✅ Multi-connection support\n- ✅ Subscription filtering\n\n## Python Interoperability\n\nThis implementation is compatible with PyZMQ:\n\n```python\n# Python client connecting to Zig server\nimport zmq\n\ncontext = zmq.Context()\nsocket = context.socket(zmq.REQ)\nsocket.connect(\"tcp://localhost:42123\")\n\nsocket.send(b\"Hello from Python\")\nreply = socket.recv()\nprint(f\"Reply: {reply}\")\n```\n\n## Implementation Details\n\n### ZMTP 3.1 Protocol\n\n- Full ZMTP 3.1 handshake (greeting + READY command)\n- NULL security mechanism\n- Message framing with proper flags (MORE, COMMAND)\n- Compatible with ZeroMQ 4.x implementations\n\n### Socket Behavior\n\n- **REP/REQ**: Blocking I/O for reliable request-reply\n- **PUB/SUB**: Non-blocking I/O for PUB with subscription harvesting\n- **Multi-connection**: PUB sockets support multiple subscribers\n- **Topic filtering**: Prefix-based topic matching for subscriptions\n\n## Limitations\n\n- Only NULL security mechanism supported\n- No CURVE, PLAIN, or GSSAPI security\n- Limited to TCP transport (no IPC, inproc, PGM)\n- Some advanced ZeroMQ features not implemented\n\n## License\n\nMIT License - See LICENSE file for details\n\n## Contributing\n\nContributions are welcome! Please ensure:\n- Code follows Zig style guidelines\n- Tests pass (`zig build test` and `./testing/test_bind.sh`)\n- New features include tests and documentation\n\n## References\n\n- [ZMTP 3.1 Specification](https://rfc.zeromq.org/spec/23/)\n- [ZeroMQ Guide](https://zguide.zeromq.org/)\n- [PyZMQ Documentation](https://pyzmq.readthedocs.io/)\n\n---\n\n**Note**: This is a learning/experimental implementation. For production use, consider using the official ZeroMQ C library with Zig bindings.\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/12546697?u=a51645dbaf0f8dba83e7615076b7ad4220bec219&v=4",
  "releases": [],
  "owner_company": "Offcode",
  "owner_location": "Oulu, Finland",
  "owner_blog": "https://offcode.fi",
  "owner_twitter_username": null,
  "owner_followers": 1,
  "owner_following": 3,
  "owner_created_at": "2015-05-21T14:45:04Z",
  "license": "MIT",
  "category": "library"
}