{
  "name": "Closure.zig",
  "owner": "zhuyadong",
  "repo": "Closure.zig",
  "description": "closure for zig.",
  "type": "package",
  "topics": [
    "closure",
    "zig",
    "zig-package"
  ],
  "stars": 4,
  "forks": 0,
  "watchers": 1,
  "updated_at": "2025-11-16T14:57:32Z",
  "dependencies": [
    {
      "name": "example",
      "url": "https://example.com/foo.tar.gz",
      "hash": "..."
    }
  ],
  "minimum_zig_version": "0.11.0",
  "readme": "# Closure.zig\nNow we can use closure in zig ;)\n## Example: up value support\n```zig\n    var val: i32 = 100;\n    var clo = Closure.make(&.{ .pval = &val }, struct {\n        pub fn call(up: anytype) void {\n            up.pval.* = 400;\n        }\n    });\n    try clo.call(.{});\n    try t.expect(val == 400);\n```\n## Example: up value + call argument\n```zig\n    var val: i32 = 100;\n    var clo = Closure.make(&.{ .pval = &val }, struct {\n        pub fn call(up: anytype, new_val: i32) void {\n            up.pval.* = new_val;\n        }\n    });\n    try clo.call(&.{@as(i32, 900)});\n    try t.expect(val == 900);\n```\n## Example: up value on heap\n```zig\n    const t = std.testing;\n    var val: i32 = 100;\n    var clo = Closure.new(t.allocator, &.{ .pval = &val }, struct {\n        pub fn call(up: anytype, new_val: i32) void {\n            up.pval.* = new_val;\n        }\n    });\n    defer clo.deinit();\n    try clo.call(&.{@as(i32, 900)});\n    try t.expect(val == 900);\n```\n\n## Example: Make the parameters of the closure clearly readable\n```zig\n    var val:i32 = 100;\n    var clo:Closure.Of(fn (new_val: i32) void) = Closure.make(&.{ .pval = &val }, struct {\n        pub fn call(up: anytype, new_val: i32) void {\n            up.pval.* = new_val;\n        }\n    });\n    try clo.call(&.{@as(i32, 400)});\n    try t.expect(val == 400);\n```\n\n## Example: Optional deinit function\nYou can define an optional `deinit` function in your Func struct. It will be called when the closure is deinitialized, before the memory is freed (for heap closures) or before the ptr is set to null (for stack closures).\n\n```zig\n    const Data = struct {\n        age: i32,\n        name: []const u8,\n    };\n    var data: Data = .{ .age = 10, .name = \"default\" };\n    \n    var clo = try Closure.new(t.allocator, &.{ .data = &data }, struct {\n        pub fn call(up: anytype, new_age: i32, new_name: []const u8) void {\n            up.data.* = .{ .age = new_age, .name = new_name };\n        }\n        pub fn deinit(up: anytype) void {\n            up.data.* = .{ .age = 0, .name = \"deinitialized\" };\n        }\n    });\n    try clo.call(&.{ @as(i32, 80), @as([]const u8, \"hello\") });\n    clo.deinit();\n    // deinit function was called\n    try t.expectEqualStrings(data.name, \"deinitialized\");\n```\n\n## Example: Error handling\nThe `call` method returns `!void` and will return `error.Deinitialized` if the closure has already been deinitialized.\n\n```zig\n    var clo = try Closure.new(t.allocator, &.{ .data = &data }, struct {\n        pub fn call(up: anytype) void {\n            // ...\n        }\n    });\n    clo.deinit();\n    // Now calling clo.call() will return an error\n    const result = clo.call(.{});\n    try t.expectError(error.Deinitialized, result);\n```\n\nMore examples in source code: [here](src/root.zig) ",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/910428?v=4",
  "releases": [
    {
      "tag_name": "0.2.2",
      "name": "0.2.2",
      "body": "optimise error",
      "prerelease": false,
      "published_at": "2025-11-16T10:21:58Z",
      "html_url": "https://github.com/zhuyadong/Closure.zig/releases/tag/0.2.2",
      "assets": []
    },
    {
      "tag_name": "0.2.1",
      "name": "0.2.1",
      "body": "support zig 0.15,  support deinit() process",
      "prerelease": false,
      "published_at": "2025-11-09T15:44:32Z",
      "html_url": "https://github.com/zhuyadong/Closure.zig/releases/tag/0.2.1",
      "assets": []
    },
    {
      "tag_name": "0.2.0",
      "name": "0.2.0",
      "body": "refactor",
      "prerelease": false,
      "published_at": "2025-11-04T05:12:04Z",
      "html_url": "https://github.com/zhuyadong/Closure.zig/releases/tag/0.2.0",
      "assets": []
    },
    {
      "tag_name": "0.1.11",
      "name": "0.1.11",
      "body": "update to zig 0.14",
      "prerelease": false,
      "published_at": "2025-03-08T11:57:34Z",
      "html_url": "https://github.com/zhuyadong/Closure.zig/releases/tag/0.1.11",
      "assets": []
    },
    {
      "tag_name": "0.1.10",
      "name": "0.1.10",
      "body": "add invoke() and invokeTyped() which return bool instead void",
      "prerelease": false,
      "published_at": "2024-10-11T03:42:10Z",
      "html_url": "https://github.com/zhuyadong/Closure.zig/releases/tag/0.1.10",
      "assets": []
    },
    {
      "tag_name": "0.1.9",
      "name": "0.1.9",
      "body": "support init with function",
      "prerelease": false,
      "published_at": "2024-08-16T07:58:18Z",
      "html_url": "https://github.com/zhuyadong/Closure.zig/releases/tag/0.1.9",
      "assets": []
    },
    {
      "tag_name": "0.1.8",
      "name": "0.1.8",
      "body": "Add Closure.Of() to make the type of closure clear",
      "prerelease": false,
      "published_at": "2024-08-09T13:55:40Z",
      "html_url": "https://github.com/zhuyadong/Closure.zig/releases/tag/0.1.8",
      "assets": []
    },
    {
      "tag_name": "0.1.7",
      "name": "0.1.7",
      "body": "fix slice upvalue incorrectly pass to closure",
      "prerelease": false,
      "published_at": "2024-07-23T14:54:52Z",
      "html_url": "https://github.com/zhuyadong/Closure.zig/releases/tag/0.1.7",
      "assets": []
    },
    {
      "tag_name": "0.1.6",
      "name": "0.1.6",
      "body": "fix slice upvalue incorrectly pass to stack closure",
      "prerelease": false,
      "published_at": "2024-07-23T14:21:42Z",
      "html_url": "https://github.com/zhuyadong/Closure.zig/releases/tag/0.1.6",
      "assets": []
    },
    {
      "tag_name": "0.1.5",
      "name": "0.1.5",
      "body": "lowercase module name in build.zig.on",
      "prerelease": false,
      "published_at": "2024-07-05T07:51:08Z",
      "html_url": "https://github.com/zhuyadong/Closure.zig/releases/tag/0.1.5",
      "assets": []
    },
    {
      "tag_name": "0.1.4",
      "name": "0.1.4",
      "body": "use lowercase module name",
      "prerelease": false,
      "published_at": "2024-07-05T07:47:07Z",
      "html_url": "https://github.com/zhuyadong/Closure.zig/releases/tag/0.1.4",
      "assets": []
    },
    {
      "tag_name": "0.1.3",
      "name": "0.1.3",
      "body": "export as module",
      "prerelease": false,
      "published_at": "2024-07-05T05:20:46Z",
      "html_url": "https://github.com/zhuyadong/Closure.zig/releases/tag/0.1.3",
      "assets": []
    },
    {
      "tag_name": "0.1.2",
      "name": "0.1.2",
      "body": "replace ArgType with std.meta.Tuple",
      "prerelease": false,
      "published_at": "2024-07-01T02:58:22Z",
      "html_url": "https://github.com/zhuyadong/Closure.zig/releases/tag/0.1.2",
      "assets": []
    },
    {
      "tag_name": "0.1.1",
      "name": "0.1.1",
      "body": "closure allocated on stack support",
      "prerelease": false,
      "published_at": "2024-06-12T09:33:45Z",
      "html_url": "https://github.com/zhuyadong/Closure.zig/releases/tag/0.1.1",
      "assets": []
    },
    {
      "tag_name": "0.1.0",
      "name": "0.1.0",
      "body": "init release\r\n\r\n**Full Changelog**: https://github.com/zhuyadong/Closure.zig/commits/0.1.0",
      "prerelease": false,
      "published_at": "2024-05-31T04:40:46Z",
      "html_url": "https://github.com/zhuyadong/Closure.zig/releases/tag/0.1.0",
      "assets": []
    }
  ],
  "owner_company": null,
  "owner_location": null,
  "owner_blog": null,
  "owner_twitter_username": null,
  "owner_followers": 14,
  "owner_following": 9,
  "owner_created_at": "2011-07-12T14:44:51Z",
  "license": "MIT",
  "category": "library"
}