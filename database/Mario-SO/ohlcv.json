{
  "name": "ohlcv",
  "owner": "Mario-SO",
  "repo": "ohlcv",
  "description": "OHLCV library in zig",
  "type": "package",
  "topics": [
    "zig-package",
    "trading",
    "finance"
  ],
  "stars": 22,
  "forks": 0,
  "watchers": 1,
  "updated_at": "2026-01-21T23:27:23Z",
  "dependencies": [
    {
      "name": "example",
      "url": "https://example.com/foo.tar.gz",
      "hash": "..."
    }
  ],
  "minimum_zig_version": "0.15.1",
  "readme": "# ‚úÖ Optimized for Zig 0.15+\n\n# üìä OHLCV Zig Library\n\n[![CI](https://github.com/Mario-SO/ohlcv/actions/workflows/ci.yml/badge.svg)](https://github.com/Mario-SO/ohlcv/actions/workflows/ci.yml)\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)\n[![Zig Version](https://img.shields.io/badge/Zig-0.15.0+-orange.svg)](https://ziglang.org/)\n\nA modern Zig library for fetching and parsing Open-High-Low-Close-Volume (OHLCV) financial data from remote CSV files‚Äîno API keys or registration required.\n\n---\n\n## ‚ú® Features\n\n- **Multiple Data Sources**: HTTP, local files, in-memory data\n\n- **Preset Datasets**: BTC, S&P 500, ETH, Gold (from GitHub or local)\n\n- **High-Performance Parsing**: \n  - Standard CSV parser with robust error handling\n  - **NEW**: Streaming CSV parser for processing large datasets without full memory load\n  - **NEW**: Optimized fast parser with SIMD-aware line counting\n  - Handles headers, skips invalid/zero rows automatically\n\n- **Memory Management**:\n  - **NEW**: Memory pooling system for efficient allocation reuse\n  - **NEW**: IndicatorArena for batch indicator calculations\n  - All allocations are explicit and easy to free\n\n- **Time Series Management**: Efficient slicing, filtering, and operations\n\n- **33 Technical Indicators**: Complete suite including trend (SMA, EMA, ADX), momentum (RSI, MACD, Stochastic), volatility (Bollinger Bands, ATR, Keltner Channels), volume (OBV, MFI, CMF), and advanced systems (Ichimoku Cloud, Heikin Ashi)\n\n- **Performance Testing**:\n  - **NEW**: Comprehensive performance benchmarks\n  - **NEW**: Streaming vs non-streaming comparison tools\n  - Memory profiling capabilities\n\n- **Extensible**: add new data sources, indicators, or parsers easily\n\n---\n\n## üèóÔ∏è Building & Running\n\n1. **Build the library and demo:**\n   ```sh\n   zig build\n   ```\n2. **Run the demo application:**\n   ```sh\n   zig build run\n   ```\n   The demo fetches S&P 500 data and prints a sample of parsed rows.\n\n3. **Run tests:**\n   ```sh\n   zig build test\n   ```\n\n4. **Run benchmarks:**\n   ```sh\n   zig build benchmark              # Basic benchmark\n   zig build benchmark-performance   # Comprehensive performance tests\n   zig build benchmark-streaming     # Compare streaming vs non-streaming\n   zig build profile-memory         # Memory usage profiler\n   ```\n\n\n---\n\n## üì¶ Using as a Library\n\n### Add to Your Project\n\n```bash\n# Fetch from GitHub\nzig fetch --save https://github.com/Mario-SO/ohlcv/archive/refs/heads/main.tar.gz\n```\n\n### Configure build.zig\n\n```zig\nconst ohlcv_dep = b.dependency(\"ohlcv\", .{\n    .target = target,\n    .optimize = optimize,\n});\nexe.root_module.addImport(\"ohlcv\", ohlcv_dep.module(\"ohlcv\"));\n```\n\n### Import and Use\n\n```zig\nconst ohlcv = @import(\"ohlcv\");\n\n// Your code here\nvar series = try ohlcv.fetchPreset(.btc_usd, allocator);\ndefer series.deinit();\n```\n\nSee [USAGE.md](docs/USAGE.md) for detailed integration guide.\n\n## üöÄ Usage Example\n\n```zig\nconst std = @import(\"std\");\nconst ohlcv = @import(\"ohlcv\");\n\npub fn main() !void {\n    var gpa = std.heap.GeneralPurposeAllocator(.{}){};\n    defer _ = gpa.deinit();\n    const allocator = gpa.allocator();\n\n    // Fetch preset data\n    var series = try ohlcv.fetchPreset(.sp500, allocator);\n    defer series.deinit();\n\n    std.debug.print(\"Fetched {d} rows of data.\\n\", .{series.len()});\n\n    // Slice by time range\n    const from_ts = 1672531200; // 2023-01-01\n    const to_ts = 1704067199; // 2023-12-31\n    var filtered = try series.sliceByTime(from_ts, to_ts);\n    defer filtered.deinit();\n\n    // Calculate SMA\n    const sma = ohlcv.SmaIndicator{ .u32_period = 20 };\n    var result = try sma.calculate(filtered, allocator);\n    defer result.deinit();\n\n    // Print sample\n    const count = @min(5, result.len());\n    for (0..count) |i| {\n        std.debug.print(\"TS: {d}, SMA: {d:.2}\\n\", .{result.arr_timestamps[i], result.arr_values[i]});\n    }\n}\n```\n\n### Streaming Large Datasets\n\n```zig\nconst std = @import(\"std\");\nconst ohlcv = @import(\"lib/ohlcv.zig\");\n\npub fn processLargeDataset(allocator: std.mem.Allocator) !void {\n    // Use streaming parser for large files\n    var parser = ohlcv.StreamingCsvParser.init(allocator);\n    defer parser.deinit();\n    \n    // Process data in chunks without loading entire file\n    const file = try std.fs.cwd().openFile(\"huge_dataset.csv\", .{});\n    defer file.close();\n    \n    while (try parser.parseChunk(file.reader())) |chunk| {\n        defer chunk.deinit();\n        // Process each chunk independently\n        for (chunk.rows) |row| {\n            // Your processing logic here\n        }\n    }\n}\n```\n\n### Memory Pool Usage\n\n```zig\n// Use memory pool for efficient indicator calculations\nvar pool = try ohlcv.MemoryPool.init(allocator, 1024 * 1024); // 1MB pool\ndefer pool.deinit();\n\nvar arena = ohlcv.IndicatorArena.init(&pool);\n// All allocations within arena are automatically managed\nconst result = try sma.calculateWithArena(series, &arena);\n// No need to manually free result - arena handles it\n```\n\n---\n\n## üßë‚Äçüíª API Overview\n\n### Types\n\n- `OhlcvRow` ‚Äî Full OHLCV record:\n  ```zig\n  pub const OhlcvRow = struct {\n      u64_timestamp: u64,\n      f64_open: f64,\n      f64_high: f64,\n      f64_low: f64,\n      f64_close: f64,\n      u64_volume: u64,\n  };\n  ```\n\n- `OhlcBar` ‚Äî OHLC without volume:\n  ```zig\n  pub const OhlcBar = struct {\n      u64_timestamp: u64,\n      f64_open: f64,\n      f64_high: f64,\n      f64_low: f64,\n      f64_close: f64,\n  };\n  ```\n\n- `PresetSource` ‚Äî Available presets:\n  ```zig\n  pub const PresetSource = enum { btc_usd, sp500, eth_usd, gold_usd };\n  ```\n\n- `TimeSeries` ‚Äî Data container with operations\n\n- `IndicatorResult` ‚Äî Results from indicators\n\n### Key Components\n\n- **Data Sources**: `DataSource`, `HttpDataSource`, `FileDataSource`, `MemoryDataSource`\n\n- **Parsers**: \n  - `CsvParser` - Standard CSV parser with robust error handling\n  - `StreamingCsvParser` - Process large files in chunks\n  - Fast parser primitives for optimized parsing\n\n- **Memory Management**:\n  - `MemoryPool` - Reusable memory allocation pool\n  - `IndicatorArena` - Arena allocator for batch calculations\n\n- **33 Indicators**: Including trend analysis (SMA, EMA, WMA, ADX, DMI, Parabolic SAR), momentum oscillators (RSI, MACD, Stochastic, Stochastic RSI, Ultimate Oscillator, TRIX), volatility bands (Bollinger Bands, Keltner Channels, Donchian Channels, Price Channels), volume analysis (OBV, MFI, CMF, Force Index, A/D Line), and advanced systems (Ichimoku Cloud, Heikin Ashi, Pivot Points, Elder Ray, Aroon, Zig Zag)\n\n- **Convenience**: `fetchPreset(source: PresetSource, allocator) !TimeSeries`\n\nFor detailed usage, see [USAGE.md](docs/USAGE.md)\n\n### Errors\n\n- `ParseError` ‚Äî Possible parsing errors:\n  - `InvalidFormat`, `InvalidTimestamp`, `InvalidOpen`, `InvalidHigh`, `InvalidLow`, `InvalidClose`, `InvalidVolume`, `InvalidDateFormat`, `DateBeforeEpoch`, `OutOfMemory`, `EndOfStream`\n- `FetchError` ‚Äî `HttpError` or any `ParseError`\n\n---\n\n## üìÅ Project Structure\n\n```\nohlcv/\n  - CLAUDE.md              # Claude Code guidance\n  - docs/                  # Extended documentation\n    - CHANGELOG.md         # Project changelog\n    - PROFILING.md         # Performance profiling guide\n    - USAGE.md            # Detailed usage guide\n    - README.md           # Documentation index\n  - build.zig\n  - build.zig.zon\n  - benchmark/\n    - performance_benchmark.zig\n    - simple_benchmark.zig\n    - simple_memory_profiler.zig\n    - streaming_benchmark.zig\n  - data/\n    - btc.csv\n    - eth.csv\n    - gold.csv\n    - sp500.csv\n  - demo.zig\n  - lib/\n    - data_source/\n      - data_source.zig\n      - file_data_source.zig\n      - http_data_source.zig\n      - memory_data_source.zig\n    - indicators/         # 33 technical indicators\n      - indicator_result.zig\n      - [Single-line indicators: SMA, EMA, WMA, RSI, ATR, ROC, Momentum, etc.]\n      - [Multi-line indicators: MACD, Bollinger Bands, Ichimoku Cloud, etc.]\n      - README.md         # Complete indicator documentation\n    - ohlcv.zig\n    - parser/\n      - csv_parser.zig\n      - fast_parser.zig         # Optimized parsing primitives\n      - streaming_csv_parser.zig # Chunked processing\n    - utils/\n      - date.zig\n      - memory_pool.zig         # Memory pooling system\n      - time_series.zig\n    - types/\n      - ohlc_bar.zig\n      - ohlcv_row.zig\n  - README.md\n  - scripts/\n    - boxify.ts\n    - update_assets.py\n  - test/\n    - fixtures/\n      - sample_data.csv\n    - integration/\n      - test_full_workflow.zig\n    - README.md\n    - test_all.zig\n    - test_helpers.zig\n    - unit/\n      - test_csv_parser.zig\n      - test_data_sources.zig\n      - test_indicators.zig\n      - test_time_series.zig\n  - zig-out/\n```\n\n---\n\n## ‚ö†Ô∏è Row Skipping & Data Cleaning\n\n- The parser **skips**:\n  - The header row\n  - Rows with invalid format or parser errors\n  - Rows with pre-1970 dates\n  - Rows where any of the OHLCV values are zero\n- This means the number of parsed rows may be less than the number of lines in the CSV file.\n\n---\n\n## üß© Extending & Contributing\n\n- Add new formats: add new parser functions in `parser.zig`\n- PRs and issues welcome!\n\n---\n\n## üìö See Also\n\n- [demo.zig](demo.zig) ‚Äî Full example usage\n- [USAGE.md](docs/USAGE.md) ‚Äî Detailed usage guide and integration examples\n- [lib/ohlcv.zig](lib/ohlcv.zig) ‚Äî Public API\n\n---\n\n## üìú License\n\nThis project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.\n\n---\n\n**Made with ‚ù§Ô∏è using Zig** \n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/36546318?u=1e28f8f367cdb4f44f8320cb2fd85ff8f3754208&v=4",
  "releases": [
    {
      "tag_name": "v2.0.0",
      "name": "v2.0.0 - Zig 0.15.1 update",
      "body": "# Changelog\r\n\r\n  All notable changes to this project will be documented in this file.\r\n\r\n  The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\r\n  and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\r\n\r\n  ## [2.0.0] - 2025-10-09\r\n\r\n  ### üöÄ Compatibility & Tooling\r\n\r\n  #### Build System\r\n  - Reworked `build.zig` for Zig‚ÄØ0.15+: executables/tests/benchmarks now share helper-generated modules, and\r\n  the static archive installs via `b.addLibrary`.\r\n  - Exported module name stays stable for dependents (`@import(\"ohlcv\")`), removing the old `lib/ohlcv.zig`\r\n  path requirement.\r\n  - `zig build run`, `zig build test`, and benchmark steps (`zig build benchmark`, `zig build benchmark-streaming`, etc.) stay available through new helper wiring.\r\n\r\n  #### HTTP & IO Updates\r\n  - HTTP data source now streams into a managed ArrayList writer adapted with `writer.adaptToNewApi(...)`,\r\n  passing the new `response_writer` on Zig‚ÄØ0.15‚Äôs `std.http.Client.fetch`.\r\n  - Demo stdout uses `std.fs.File.stdout().writer(...)` and guards against `std.Io.Writer.Error.WriteFailed`\r\n  (common when piping output).\r\n\r\n  ### üß† Library Improvements\r\n\r\n  #### Parsers & Time Series\r\n  - CSV parser, streaming parser, and time-series utilities now rely on `std.array_list.Managed`, preserving\r\n  `.init`, `.writer`, and capacity helpers under Zig‚ÄØ0.15.\r\n  - Benchmarks allocate via the managed lists, matching parser semantics for non-streaming and streaming\r\n  runs.\r\n\r\n  #### Consumer Experience\r\n  - README now highlights Zig‚ÄØ0.15+ support, with import instructions showing `const ohlcv = @import(\"ohlcv\");`.\r\n  - Build instructions clarify dependency wiring:\r\n    ```zig\r\n    const ohlcv_dep = b.dependency(\"ohlcv\", .{ .target = target, .optimize = optimize });\r\n    exe.root_module.addImport(\"ohlcv\", ohlcv_dep.module(\"ohlcv\"));\r\n\r\n  ### ‚úÖ Verification\r\n\r\n  - Commands executed on macOS arm64 with Zig‚ÄØ0.15.1:\r\n      - zig build\r\n      - zig build test\r\n      - zig build benchmark, zig build benchmark-streaming, zig build benchmark-performance\r\n      - zig build profile-memory\r\n  - Downstream sample (rayzig) compiles once imports switch to `@import(\"ohlcv\")` and zig fetch --save ‚Ä¶\r\n    refreshes the dependency.\r\n\r\n  ### Known Limitations\r\n\r\n  - Requires Zig‚ÄØ0.15.0 or higher.\r\n  - CSV dates before 1970 are skipped.\r\n  - Rows with zero values are filtered out.",
      "prerelease": false,
      "published_at": "2025-10-09T21:47:24Z",
      "html_url": "https://github.com/Mario-SO/ohlcv/releases/tag/v2.0.0",
      "assets": []
    },
    {
      "tag_name": "v1.0.0",
      "name": "v1.0.0 - Initial Release",
      "body": "# Changelog\r\n\r\nAll notable changes to this project will be documented in this file.\r\n\r\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\r\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\r\n\r\n## [1.0.0] - 2025-08-18\r\n\r\n### üéâ Initial Release\r\n\r\n#### Features\r\n- **37 Technical Indicators** - Complete suite of trading indicators:\r\n  - Trend: SMA, EMA, WMA, ADX, DMI, Parabolic SAR\r\n  - Momentum: RSI, MACD, Stochastic, Williams %R, ROC, TRIX, and more\r\n  - Volatility: ATR, Bollinger Bands, Keltner Channels, Donchian Channels\r\n  - Volume: OBV, MFI, CMF, Force Index, Accumulation/Distribution\r\n  - Advanced: Ichimoku Cloud, Heikin Ashi, Pivot Points, Elder Ray, Aroon, Zig Zag\r\n\r\n- **High-Performance Parsing**:\r\n  - Standard CSV parser with 15,000+ rows/ms throughput\r\n  - Streaming parser for processing gigabyte-sized files with constant 4KB memory\r\n  - Optimized fast parser primitives with SIMD-aware line counting\r\n  - Robust error handling (skips invalid rows automatically)\r\n\r\n- **Memory Management**:\r\n  - Memory pooling system for efficient allocation reuse\r\n  - IndicatorArena for batch indicator calculations\r\n  - Zero memory leaks verified across all components\r\n\r\n- **Data Sources**:\r\n  - HTTP data source for remote CSV files\r\n  - File data source for local files\r\n  - Memory data source for in-memory data\r\n  - Preset sources: Bitcoin, S&P 500, Ethereum, Gold\r\n\r\n- **Time Series Operations**:\r\n  - Efficient slicing by time range\r\n  - Filtering with custom predicates\r\n  - Sorting and transformation operations\r\n  - Zero-copy operations where possible\r\n\r\n#### Performance\r\n- Parser throughput: 15,000+ rows/millisecond\r\n- SMA-20 calculation: <0.03ms for 1K data points\r\n- Memory usage: ~47KB per 1K OHLCV rows\r\n- Streaming mode: Constant 4KB regardless of file size\r\n\r\n#### Infrastructure\r\n- Comprehensive test suite with 100% indicator coverage\r\n- GitHub Actions CI/CD pipeline (3 streamlined workflows)\r\n- Automated daily market data updates\r\n- Performance benchmarking suite\r\n- Memory profiling tools\r\n\r\n#### Documentation\r\n- Complete API documentation\r\n- Usage guide with examples\r\n- Architecture documentation\r\n- Performance monitoring guide\r\n\r\n### Known Limitations\r\n- Requires Zig 0.14.0 or higher\r\n- CSV dates before 1970 are skipped\r\n- Rows with zero values are filtered out\r\n\r\n[1.0.0]: https://github.com/Mario-SO/ohlcv/releases/tag/v1.0.0\r\n",
      "prerelease": false,
      "published_at": "2025-08-18T16:02:39Z",
      "html_url": "https://github.com/Mario-SO/ohlcv/releases/tag/v1.0.0",
      "assets": []
    }
  ],
  "owner_bio": "‚ú¶ Be best, not first ‚ú¶",
  "owner_company": "@hireflix",
  "owner_location": "Remote",
  "owner_blog": "mariodev.xyz",
  "owner_twitter_username": "mariodev__",
  "owner_followers": 35,
  "owner_following": 26,
  "owner_created_at": "2018-02-16T17:50:15Z",
  "license": "MIT",
  "category": "library"
}