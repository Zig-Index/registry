{
  "name": "trie.zig",
  "owner": "hedzr",
  "repo": "trie.zig",
  "description": "key-value storage identified by dotted path",
  "type": "project",
  "topics": [
    "radix-tree",
    "trie",
    "trie-tree",
    "zig-lib",
    "zig-library",
    "zig-package",
    "zig"
  ],
  "stars": 0,
  "forks": 0,
  "watchers": 1,
  "updated_at": "2025-04-17T11:01:50Z",
  "dependencies": [
    {
      "name": "example",
      "url": "https://example.com/foo.tar.gz",
      "hash": "..."
    }
  ],
  "minimum_zig_version": "0.14.0",
  "readme": "# trie.zig\n\n`trie.zig` implement a Trie-tree structure in zig-lang.\n\n`trie.zig` provides a key value storage identified by the dotted path, such as `app.logging.file` => `/var/log/app/stdout.log`.\n\n`trie.zig` allows these value to be inserted: string, int, float, and boolean. The future vision includes supporting a broader array of data types, which is dependent on the usefulness of zig-lang's syntax as it evolves.\n\n## Usage\n\nThe usage is,\n\n```zig\nconst std = @import(\"std\");\nconst trie = @import(\"trie_lib\");\n\nfn trie_test(writer: anytype) !void {\n    const GPA = std.heap.GeneralPurposeAllocator;\n    // var general_purpose_allocator = GPA(.{}){};\n    // const gpa = general_purpose_allocator.allocator();\n    var gpa = GPA(.{ .enable_memory_limit = true }){};\n    const allocator = gpa.allocator();\n    defer _ = gpa.deinit();\n\n    var t = try trie.Trie(trie.NodeValue).init(allocator, \"app\");\n    defer t.deinit();\n\n    try t.set(\"logging.file\", \"/var/log/app/stdout.log\");\n    try t.set(\"logging.rotate\", true);\n    try t.set(\"logging.interval\", 3 * 24 * 60 * 60 * 1000 * 1000); // 3 days\n    try t.set(\"debug\", false);\n    try t.set(\"deb.install\", false);\n    try t.set(\"deb.target\", \"app-debug.deb\");\n    try t.set(\"debfile\", \"app-release.deb\");\n\n    // print(\"t: {s} \\n\", .{try t.dump()});\n    const dstr = try t.dump();\n    try writer.print(\"\\nt.dump: \\n{s} \\n\", .{dstr});\n\n    var v = try t.get(\"deb.target\");\n    try writer.print(\"\\ndeb.target: {s} \\n\", .{v.string});\n\n    v = try t.get(\"debfile\");\n    try writer.print(\"debfile: {s} \\n\", .{v.string});\n    v = try t.get(\"deb.install\");\n    try writer.print(\"deb.install: {} \\n\", .{v.boolean});\n    v = try t.get(\"logging.interval\");\n    try writer.print(\"logging.interval: {} \\n\", .{v.int});\n    v = try t.get(\"logging.rotate\");\n    try writer.print(\"logging.rotate: {} \\n\", .{v.boolean});\n    v = try t.get(\"debug\");\n    try writer.print(\"debug: {} \\n\", .{v.boolean});\n}\n```\n\n### Import `trie.zig`\n\n#### Dependency in `build.zig.zon`\n\nIn your `build.zig.zon`, add a reference to `trie.zig`:\n\n```zig\n.{\n  .name = \"my-app\",\n  .paths = .{\"\"},\n  .version = \"0.0.0\",\n  .dependencies = .{\n    .trie = .{\n      .url = \"https://github.com/hedzr/trie.zig/archive/master.tar.gz\",\n      .hash = \"$INSERT_HASH_HERE\"\n    },\n  },\n}\n```\n\nThe hash can also be written and updated by this command line:\n\n```bash\nzig fetch https://github.com/hedzr/trie.zig/archive/master.tar.gz --save\n```\n\n> Instead of `master` you can use a specific commit/tag.\n\n#### Dependency in `build.zig`\n\nSuppose you should already have an executable, something like:\n\n```zig\n    const exe = b.addExecutable(.{\n        .name = \"my-app\",\n        .root_module = exe_mod,\n    });\n```\n\nAdd the following line:\n\n```zig\n    const trie_dep = b.dependency(\"trie\", .{\n        .target = target,\n        .optimize = optimize,\n    });\n    std.debug.print(\"trie_dep: {s} \\n\", .{trie_dep.builder.modules.keys()});\n    exe.root_module.addImport(\"trie\", trie_dep.module(\"trie\"));\n```\n\nYou can now `const trie = @import(\"trie\");` in your project.\n\n### In your `main.zig`\n\nNow insert these codes as a first look,\n\n```zig\nconst trie = @import(\"trie\");\n\nfn trie_test(writer: anytype) !void {\n    const GPA = std.heap.GeneralPurposeAllocator;\n    // var general_purpose_allocator = GPA(.{}){};\n    // const gpa = general_purpose_allocator.allocator();\n    var gpa = GPA(.{ .enable_memory_limit = true }){};\n    const allocator = gpa.allocator();\n    defer _ = gpa.deinit();\n\n    var t = try trie.Trie(trie.NodeValue).init(allocator, \"app\");\n    defer t.deinit();\n\n    try t.set(\"logging.file\", \"/var/log/app/stdout.log\");\n    try t.set(\"logging.rotate\", true);\n}\n```\n\n## APIs\n\n### get\n\nGet leaf node value by its dotted path, or an `Error` on unexisted node or branch node.\n\n### set\n\nSet `(key, value)` pair into trie tree.\n\n### dump\n\nDump internal structure for debugging purpose.\n\n### walk\n\nWalk on all nodes.\n\n```zig\ntest \"walker\" {\n    print(\"\\n\", .{});\n\n    var t = try Trie(NodeValue).init(test_allocator, \"app\");\n    defer t.deinit();\n\n    try t.set(\"logging.file\", \"/var/log/app/stdout.log\");\n    try t.set(\"logging.rotate\", true);\n    try t.set(\"logging.interval\", 3 * 24 * 60 * 60 * 1000 * 1000); // 3 days\n    try t.set(\"debug\", false);\n    try t.set(\"deb.install\", false);\n    try t.set(\"deb.target\", \"app-debug.deb\");\n    try t.set(\"debfile\", \"app-release.deb\");\n\n    try t.walk(walkOnTTree);\n}\n\nfn walkOnTTree(key: []const u8, val: ?*NodeValue, props: anytype) bool {\n    _ = props.level;\n    const delim = props.trie.delimiter;\n    const alloc = props.trie.alloc.allocator();\n    const node = props.node;\n    if (node.endsWith(delim) and node.isBranch()) {\n        print(\"{}. {s}/\\n\", .{ props.level, key });\n    } else if (node.isLeaf()) {\n        var vs: []const u8 = \"(null)\";\n        if (val) |v| {\n            vs = v.toString(alloc) catch \"(nothing)\";\n        }\n        print(\"{}. {s} => {s}  ; '{s}'\\n\", .{ props.level, key, vs, node.fragment.? });\n    }\n    return false;\n}\n```\n\n## LICENSE\n\nApache 2.0\n",
  "owner_avatar_url": "https://avatars.githubusercontent.com/u/12786150?v=4",
  "releases": [],
  "owner_bio": "zzZ...\r\n",
  "owner_company": null,
  "owner_location": "Chongqing, China",
  "owner_blog": "https://hedzr.com",
  "owner_twitter_username": null,
  "owner_followers": 134,
  "owner_following": 26,
  "owner_created_at": "2015-06-07T16:12:21Z",
  "license": "Apache-2.0",
  "category": "library"
}